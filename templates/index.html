{% extends "base.html" %}
{% block title %}Home - RipeSense AI{% endblock %}

{% block content %}

<header class="hero-section text-center py-5 mb-5 fade-in-up" 
        style="background: radial-gradient(circle at top right, #43A047, #1B5E20); color: white;">
    
    <div class="hero-overlay"></div>
    
    <div class="container position-relative py-5 z-2">
        
        <h1 class="display-3 fw-bold mb-3 text-white">Precision Agriculture <br>in Your Pocket</h1>
        <p class="lead mb-4 text-white-75 mx-auto" style="max-width: 650px;">
            Utilizing Convolutional Neural Networks (CNN) and YOLOv8 to reduce food waste and optimize harvest timing with 97% accuracy.
        </p>
        
        <div class="d-flex justify-content-center gap-3">
            <a href="{{ url_for('ripeness_detection') }}" class="btn btn-success btn-lg rounded-pill px-5 shadow-lg">
                üöÄ Launch App
            </a>
            <a href="#how-it-works" class="btn btn-outline-light btn-lg rounded-pill px-4">
                How it Works
            </a>
        </div>
    </div>
</header>

<div class="container mb-5 fade-in-up" style="animation-delay: 0.2s;">
    <div class="row g-4 text-center">
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-number" data-target="97.3">0%</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Model Accuracy</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card" style="border-bottom-color: #FFC107;">
                <div class="stat-number" data-target="14">0</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Weeks in Development</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card" style="border-bottom-color: #2196F3;">
                <div class="stat-number" data-target="3">0</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Supported Fruits</p>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 justify-content-center mb-5 fade-in-up" style="animation-delay: 0.4s;">
    <div class="col-lg-10">
        <div class="row g-4">
            <div class="col-md-6">
                <div class="card h-100 glass-card hover-effect p-4 border-0">
                    <div class="card-body d-flex flex-column align-items-center text-center">
                        <div class="bg-success bg-opacity-10 text-success rounded-circle p-3 mb-3 display-6">
                            üìÅ
                        </div>
                        <h3 class="fw-bold">Static Analysis</h3>
                        <p class="text-muted">Upload high-res images for a detailed breakdown of ripeness, color composition, and nutritional data.</p>
                        <a href="{{ url_for('ripeness_detection') }}" class="btn btn-outline-success rounded-pill w-100 mt-auto">Upload Image</a>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card h-100 glass-card hover-effect p-4 border-0">
                    <div class="card-body d-flex flex-column align-items-center text-center">
                        <div class="bg-primary bg-opacity-10 text-primary rounded-circle p-3 mb-3 display-6">
                            üì∑
                        </div>
                        <h3 class="fw-bold">Real-Time Detection</h3>
                        <p class="text-muted">Activate the YOLOv8-Live stream to detect and classify fruits instantly in the field environment.</p>
                        <a href="{{ url_for('fruit_detection') }}" class="btn btn-outline-primary rounded-pill w-100 mt-auto">Start Camera</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="how-it-works" class="py-5 mb-5 fade-in-up" style="animation-delay: 0.6s;">
    <div class="text-center mb-5">
        <h6 class="text-uppercase text-success fw-bold" style="letter-spacing: 2px;">The Technology</h6>
        <h2 class="fw-bold">How RipeSense Analyzes Your Fruit</h2>
        <p class="text-muted">A 3-step hybrid approach combining Deep Learning and Color Science.</p>
    </div>
    
    <div class="row g-4 justify-content-center text-center">
        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 hover-effect bg-white">
                <div class="display-5 mb-3 text-success">
                    <i class="fas fa-camera-retro"></i>
                </div>
                <h5 class="fw-bold">1. Digital Capture</h5>
                <p class="small text-muted mb-0">The system captures an RGB image and uses <strong>OpenCV</strong> to normalize lighting and reduce background noise for a clean scan.</p>
                <div class="mt-3 badge bg-light text-success border">Pre-processing</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 hover-effect bg-white" style="border-top: 4px solid #2E7D32 !important;">
                <div class="display-5 mb-3 text-primary">
                    <i class="fas fa-brain"></i>
                </div>
                <h5 class="fw-bold">2. Neural Inference</h5>
                <p class="small text-muted mb-0">Our <strong>YOLOv8</strong> engine identifies the fruit and runs a specialized classification to determine its physical ripeness stage.</p>
                <div class="mt-3 badge bg-light text-primary border">Deep Learning</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 hover-effect bg-white">
                <div class="display-5 mb-3 text-warning">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h5 class="fw-bold">3. Color Validation</h5>
                <p class="small text-muted mb-0">The <strong>HSV Color Histogram</strong> verifies the AI's guess by measuring exact pixel values to ensure a 97% accuracy rate.</p>
                <div class="mt-3 badge bg-light text-warning border">Data Analytics</div>
            </div>
        </div>
    </div>
</div>

<div class="text-center mb-5 fade-in-up" style="animation-delay: 0.8s;">
    <h5 class="fw-bold text-muted mb-4">Currently Calibrated For</h5>
    <div>
        <span class="fruit-badge">üçå Banana</span>
        <span class="fruit-badge">üçÖ Tomato</span>
        <span class="fruit-badge">ü•≠ Mango</span>
        <span class="fruit-badge text-muted bg-light border-0">...more coming soon</span>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const counters = document.querySelectorAll('.stat-number');
        
        counters.forEach(counter => {
            const updateCount = () => {
                const target = +counter.getAttribute('data-target');
                const count = +counter.innerText.replace('%', ''); // Handle the % sign
                
                const inc = target / 50; 

                if (count < target) {
                    if(counter.getAttribute('data-target').includes('.')) {
                        counter.innerText = (count + inc).toFixed(1) + (target === 96.5 ? '%' : '');
                    } else {
                        counter.innerText = Math.ceil(count + inc);
                    }
                    setTimeout(updateCount, 30);
                } else {
                    counter.innerText = target + (target === 96.5 ? '%' : '');
                }
            };
            updateCount();
        });
    });
</script>

{% endblock %}