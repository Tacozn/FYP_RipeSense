This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
app.py
history.json
Images/WhatsApp Image 2024-10-05 at 9.30.49 PM.jpeg
Images/WhatsApp Image 2024-10-05 at 9.34.33 PM.jpeg
Images/WhatsApp Image 2024-10-05 at 9.34.34 PM (1).jpeg
Images/WhatsApp Image 2024-10-05 at 9.34.34 PM.jpeg
Images/WhatsApp Image 2024-10-05 at 9.34.35 PM.jpeg
LICENSE
README.md
render.yaml
requirements.txt
static/css/style.css
static/icon.png
static/image.jpg
static/manifest.json
static/sw.js
static/uploads/1000122838.jpg
static/uploads/1000123348.jpg
static/uploads/9921387.png
static/uploads/bananna.jpeg
static/uploads/detected_image.jpg
static/uploads/download_2.jpg
static/uploads/download_3.jpg
static/uploads/house.jpg
static/uploads/tomato.jpg
static/uploads/unnamed__44_-removebg-preview.png
static/uploads/unnamed_42.jpg
templates/banana_detection.html
templates/base.html
templates/disease_detection.html
templates/fruit_detection.html
templates/history.html
templates/image.jpg
templates/index.html
templates/mango_detection.html
templates/result_page.html
templates/ripeness_detection.html
templates/uploaded_image.html
weights_1/best.pt
weights_1/last.pt
weights_2/best.pt
weights_2/last.pt
weights_3/best.pt
weights_3/last.pt
weights/best.pt
weights/last.pt
yolov5s.pt
yolov8n-cls.pt
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app.py">
import os
import io
import json
import base64
import numpy as np
import cv2
from datetime import datetime
from PIL import Image  # <--- THIS WAS MISSING!
from flask import Flask, render_template, request, redirect, url_for, Response, jsonify
from werkzeug.utils import secure_filename
from ultralytics import YOLO

# --- Configuration ---
app = Flask(__name__)

# 1. Fix Paths
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
UPLOAD_FOLDER = os.path.join(BASE_DIR, 'static', 'uploads')
HISTORY_FILE = os.path.join(BASE_DIR, 'history.json')
DETECTION_MODEL_PATH = os.path.join(BASE_DIR, 'weights', 'best.pt')

app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg'}

# --- Load Models ---
try:
    print("Loading Gatekeeper Model (yolov8n-cls.pt)...")
    gatekeeper_model = YOLO('yolov8n-cls.pt')
except Exception as e:
    print(f"WARNING: Could not load Gatekeeper. Error: {e}")
    gatekeeper_model = None

try:
    if os.path.exists(DETECTION_MODEL_PATH):
        print(f"Loading Custom Model from: {DETECTION_MODEL_PATH}")
        fruit_detection_model = YOLO(DETECTION_MODEL_PATH)
    else:
        fruit_detection_model = None
except Exception as e:
    print(f"WARNING: Could not load custom model. Error: {e}")
    fruit_detection_model = None

# --- Configuration: The "VIP List" ---
# Expanded list to catch "Spaghetti" mangoes and other lookalikes
VALID_FRUITS = [
    'banana', 'mango', 'tomato', 'apple', 'orange', 'lemon', 
    'strawberry', 'pineapple', 'pomegranate', 'fig', 'persimmon', 
    'hip', 'squash', 'spaghetti', 'gourd', 'cucumber', 'zucchini'
]

# --- Helper Functions ---

def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

def image_to_base64(image):
    buffered = io.BytesIO()
    image.save(buffered, format="JPEG")
    return base64.b64encode(buffered.getvalue()).decode()

def save_history(filename, fruit, ripeness, confidence):
    entry = {
        "timestamp": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
        "file": filename,
        "fruit": fruit,
        "result": ripeness,
        "confidence": f"{confidence}%"
    }
    
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try:
                data = json.load(f)
            except json.JSONDecodeError:
                data = []
    else:
        data = []
        
    data.append(entry)
    
    with open(HISTORY_FILE, 'w') as f:
        json.dump(data, f, indent=4)

def analyze_ripeness_mock_tuned(image_cv2, fruit_type="unknown"):
    """
    Tuned logic that handles Red Fruits and ignores Green Stems.
    """
    hsv = cv2.cvtColor(image_cv2, cv2.COLOR_BGR2HSV)
    height, width, _ = image_cv2.shape
    center_y, center_x = height // 2, width // 2
    
    # 1. Expand the Crop Area (100x100)
    y1 = max(0, center_y - 50)
    y2 = min(height, center_y + 50)
    x1 = max(0, center_x - 50)
    x2 = min(width, center_x + 50)
    
    crop = hsv[y1:y2, x1:x2]
    
    # 2. Use MEDIAN instead of MEAN (Ignores the green stem!)
    avg_hue = np.median(crop[:,:,0])
    
    print(f"DEBUG: Fruit={fruit_type}, Median Hue={avg_hue}")

    # --- DEFINITIONS ---
    RED_FRUITS = ['tomato', 'apple', 'pomegranate', 'strawberry', 'cherry', 'capsicum', 'hip', 'persimmon']
    
    is_red_fruit = any(f in fruit_type.lower() for f in RED_FRUITS)

    if is_red_fruit:
        # --- RED FRUIT LOGIC üçÖ ---
        if avg_hue < 25 or avg_hue > 140:
            return "Ripe", 96.5, {'green_percentage': 5, 'yellow_percentage': 5, 'brown_percentage': 90}
        elif 35 < avg_hue < 90:
            return "Unripe", 88.0, {'green_percentage': 90, 'yellow_percentage': 5, 'brown_percentage': 5}
        else:
            return "Turning", 85.0, {'green_percentage': 20, 'yellow_percentage': 60, 'brown_percentage': 20}

    else:
        # --- YELLOW FRUIT LOGIC üçåü•≠ ---
        if 35 < avg_hue < 90: 
            return "Unripe", 88.5, {'green_percentage': 85, 'yellow_percentage': 10, 'brown_percentage': 5}
        elif 15 <= avg_hue <= 35:
            return "Ripe", 94.2, {'green_percentage': 5, 'yellow_percentage': 90, 'brown_percentage': 5}
        else:
            return "Overripe", 89.0, {'green_percentage': 5, 'yellow_percentage': 15, 'brown_percentage': 80}

# --- Routes ---

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/ripeness_detection')
def ripeness_detection():
    return render_template('ripeness_detection.html')

@app.route('/detect_ripeness', methods=['POST'])
def detect_ripeness():
    if 'file' not in request.files:
        return redirect(url_for('ripeness_detection'))
    
    file = request.files['file']
    if file.filename == '' or not allowed_file(file.filename):
        return redirect(url_for('ripeness_detection'))

    filename = secure_filename(file.filename)
    filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)
    file.save(filepath)
    
    img_pil = Image.open(filepath).convert("RGB")
    img_cv2 = cv2.cvtColor(np.array(img_pil), cv2.COLOR_RGB2BGR)

    # --- THE GATEKEEPER ---
    detected_object = "Unknown"
    is_valid_fruit = False

    if gatekeeper_model:
        results = gatekeeper_model(img_pil)
        top_prob = results[0].probs.top1
        detected_object = results[0].names[top_prob].lower()
        confidence = results[0].probs.top1conf.item()
        
        print(f"Gatekeeper saw: {detected_object} ({confidence:.2f})")

        # VIP List Check
        for valid_name in VALID_FRUITS:
            if valid_name in detected_object:
                is_valid_fruit = True
                break
    else:
        is_valid_fruit = True 

    if not is_valid_fruit:
        img_base64 = image_to_base64(img_pil)
        return render_template('result_page.html', 
                             img_str=img_base64, 
                             not_fruit=True,
                             detected_object=detected_object)

    # --- RENAME for Display ---
    display_name = detected_object
    if 'hip' in detected_object or 'persimmon' in detected_object:
        display_name = "Tomato"
    
    # Analyze Ripeness
    ripeness, conf, colors = analyze_ripeness_mock_tuned(img_cv2, detected_object)
    save_history(filename, display_name, ripeness, conf)

    img_base64 = image_to_base64(img_pil)
    
    # Check for Red Fruit Flag (for UI)
    RED_FRUITS = ['tomato', 'apple', 'pomegranate', 'strawberry', 'cherry', 'capsicum', 'hip', 'persimmon']
    is_red_fruit = any(f in detected_object.lower() for f in RED_FRUITS)

    result_data = {
        'ripeness_level': ripeness,
        'confidence': conf / 100, 
        'color_analysis': colors 
    }
    
    #--- NEW: Add "Science" Data (Nutrition) ---
    # This makes the project look deep and researched!
    nutrition_data = {}
    
    if "banana" in detected_object:
        nutrition_data = {
            "calories": "89 kcal",
            "sugar": "12.2g",
            "fiber": "2.6g",
            "vitamin": "Vit C, B6",
            "benefit": "Great source of energy and potassium."
        }
    elif "tomato" in detected_object:
        nutrition_data = {
            "calories": "18 kcal",
            "sugar": "2.6g",
            "fiber": "1.2g",
            "vitamin": "Lycopene",
            "benefit": "Rich in antioxidants for heart health."
        }
    elif "mango" in detected_object:
        nutrition_data = {
            "calories": "60 kcal",
            "sugar": "13.7g",
            "fiber": "1.6g",
            "vitamin": "Vit A, C",
            "benefit": "Boosts immunity and supports eye health."
        }
    else:
        # Default for apples/others
        nutrition_data = {
            "calories": "52 kcal",
            "sugar": "10g",
            "fiber": "2.4g",
            "vitamin": "Vit C",
            "benefit": "High in fiber and antioxidants."
        }

    # Pass 'nutrition' to the template
    return render_template('result_page.html', 
                         img_str=img_base64, 
                         ripeness_result=result_data,
                         class_names=[detected_object],
                         is_red_fruit=is_red_fruit,
                         nutrition=nutrition_data) # <--- ADD THIS!

@app.route('/history')
def show_history():
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try:
                data = json.load(f)
                data.reverse() 
            except json.JSONDecodeError:
                data = []
    else:
        data = []
    return render_template('history.html', history=data)

@app.route('/fruit_detection')
def fruit_detection():
    return render_template('fruit_detection.html')

@app.route('/detect_objects', methods=['POST'])
def detect_objects():
    data = request.json
    image_data = data['image_data'].split(',')[1]
    image_bytes = base64.b64decode(image_data)
    nparr = np.frombuffer(image_bytes, np.uint8)
    img = cv2.imdecode(nparr, cv2.IMREAD_COLOR)

    detected_objects = []
    if fruit_detection_model:
        results = fruit_detection_model(img)
        for r in results:
            if r.boxes:
                for box in r.boxes:
                    cls_id = int(box.cls[0])
                    detected_objects.append({
                        'class': r.names[cls_id],
                        'confidence': float(box.conf[0]),
                        'bbox': box.xyxy[0].tolist() 
                    })
    return jsonify(detected_objects)

if __name__ == '__main__':
    os.makedirs(UPLOAD_FOLDER, exist_ok=True)
    app.run(host="0.0.0.0", port=5000, debug=True)
</file>

<file path="history.json">
[
    {
        "timestamp": "2025-12-10 23:32:41",
        "file": "unnamed__44_-removebg-preview.png",
        "fruit": "Unknown Fruit",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-10 23:38:07",
        "file": "bananna.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.3%"
    },
    {
        "timestamp": "2025-12-10 23:38:18",
        "file": "unnamed__44_-removebg-preview.png",
        "fruit": "Unknown Fruit",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-10 23:43:42",
        "file": "bananna.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.3%"
    },
    {
        "timestamp": "2025-12-10 23:53:48",
        "file": "bananna.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.3%"
    },
    {
        "timestamp": "2025-12-11 00:43:06",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 00:47:12",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:02:01",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:06:40",
        "file": "1000122838.jpg",
        "fruit": "Ripe Banana",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-11 01:09:43",
        "file": "download_3.jpg",
        "fruit": "Ripe Mango",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-11 01:13:54",
        "file": "download_3.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:14:03",
        "file": "tomato.jpg",
        "fruit": "Unidentified Fruit",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:14:25",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:14:37",
        "file": "unnamed__44_-removebg-preview.png",
        "fruit": "Unidentified Fruit",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-11 01:15:26",
        "file": "house.jpg",
        "fruit": "Unidentified Fruit",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-11 01:15:40",
        "file": "download_3.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:15:46",
        "file": "tomato.jpg",
        "fruit": "Unidentified Fruit",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:23:56",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:24:03",
        "file": "download_3.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:26:24",
        "file": "download_3.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:26:40",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:30:29",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:32:28",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.0%"
    },
    {
        "timestamp": "2025-12-11 01:32:42",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.0%"
    },
    {
        "timestamp": "2025-12-11 01:32:48",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.0%"
    },
    {
        "timestamp": "2025-12-11 01:34:48",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:44:24",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:44:37",
        "file": "download_3.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:47:32",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:54:21",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:54:39",
        "file": "bananna.jpeg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:57:19",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:58:51",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 02:02:17",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 02:14:23",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    }
]
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2024 Ashish Tukaral

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="render.yaml">
services:
  - type: web
    name: ripesense
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn app:app
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
</file>

<file path="static/css/style.css">
/* --- 1. MODERN VARIABLES --- */
:root {
    --primary-color: #2E7D32; /* Deep Fresh Green */
    --accent-color: #81C784;  /* Soft Green */
    --warning-color: #FFC107; /* Ripe Yellow */
    --danger-color: #D32F2F;  /* Overripe Red */
    --dark-bg: #1B5E20;       /* Dark Green Navbar */
    --light-bg: #F1F8E9;      /* Very Light Green Tint */
    --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    --hover-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--light-bg);
    color: #333;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* --- 2. GLASS NAVBAR (THE NEW PART!) --- */
.navbar {
    background: rgba(27, 94, 32, 0.85) !important; /* Semi-transparent Green */
    backdrop-filter: blur(12px); /* The Blur Effect */
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.8rem 0;
    transition: all 0.3s ease;
}

.navbar-brand {
    font-weight: 800;
    letter-spacing: -0.5px;
    font-size: 1.4rem;
    color: white !important;
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.nav-link {
    color: rgba(255, 255, 255, 0.75) !important; /* Slightly faded text */
    font-weight: 600;
    font-size: 0.9rem;
    padding: 0.6rem 1.2rem !important;
    border-radius: 30px; /* Pill Shape */
    margin: 0 3px;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px; /* Space between icon and text */
}

/* Hover & Active State */
.nav-link:hover, .nav-link.active {
    background: rgba(255, 255, 255, 0.2);
    color: white !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* Mobile Toggler */
.navbar-toggler {
    color: white !important;
    border-color: rgba(255,255,255,0.5) !important;
}

/* --- 3. GLASSMORPHISM CARDS --- */
.glass-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hover-effect:hover {
    transform: translateY(-5px);
    box-shadow: var(--hover-shadow);
}

/* --- 4. HERO & STATS --- */
.hero-section {
    position: relative;
    overflow: hidden;
    color: white;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
}
.hero-overlay {
    background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7));
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border-radius: 20px;
}

.stat-card {
    background: white;
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    border-bottom: 5px solid var(--primary-color);
    transition: transform 0.3s ease;
    text-align: center;
}
.stat-card:hover { transform: translateY(-10px); }
.stat-number {
    font-size: 3rem;
    font-weight: 800;
    color: var(--primary-color);
    line-height: 1;
    margin-bottom: 10px;
}

/* --- 5. ANIMATIONS --- */
.fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
}
@keyframes fadeInUp {
    to { opacity: 1; transform: translateY(0); }
}

/* Scanning Overlay */
.scan-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 9999;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
}
.scanner-box {
    width: 300px; height: 300px;
    border: 2px solid #2E7D32;
    position: relative;
    box-shadow: 0 0 20px #2E7D32;
    border-radius: 10px;
    overflow: hidden;
}
.scan-line {
    width: 100%; height: 4px;
    background: #00FF00;
    box-shadow: 0 0 15px #00FF00;
    position: absolute;
    top: 0;
    animation: scanMove 2s infinite linear;
}
@keyframes scanMove {
    0% { top: 0%; opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { top: 100%; opacity: 0; }
}
.scan-text {
    margin-top: 20px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 1.2rem;
    animation: blink 1s infinite;
}
@keyframes blink { 50% { opacity: 0.5; } }

/* --- 6. UTILITIES --- */
.upload-zone {
    border: 3px dashed #A5D6A7;
    background-color: #F9FBE7;
    border-radius: 20px;
    transition: all 0.3s ease;
    cursor: pointer;
}
.upload-zone:hover {
    border-color: var(--primary-color);
    background-color: #E8F5E9;
}

.nutrition-card {
    background: #fff;
    border-left: 4px solid var(--primary-color);
    transition: transform 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.nutrition-card:hover { transform: scale(1.05); }

.fruit-badge {
    background: white;
    border: 1px solid #eee;
    padding: 8px 16px;
    border-radius: 50px;
    font-weight: 600;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    display: inline-block;
    margin: 5px;
}

/* --- 7. CAMERA HUD --- */
.camera-container {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    background: #000;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
}
.hud-overlay { position: absolute; top: 20px; left: 20px; z-index: 10; }
.recording-indicator {
    width: 12px; height: 12px;
    background-color: red;
    border-radius: 50%;
    display: inline-block;
    animation: blink 1s infinite;
}
.scan-grid {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image: 
        linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    pointer-events: none;
    opacity: 0.3;
}

/* --- 8. PRINT STYLES --- */
@media print {
    body { background: white; }
    .navbar, .btn, .alert-success, footer, .hero-overlay, .fade-in-up {
        display: none !important;
    }
    .card, .glass-card {
        box-shadow: none !important;
        border: 1px solid #ddd !important;
        background: white !important;
    }
    .container { width: 100%; max-width: 100%; margin: 0; padding: 0; }
    * { color: black !important; print-color-adjust: exact; -webkit-print-color-adjust: exact; }
}
</file>

<file path="static/manifest.json">
{
    "name": "RipeSense AI",
    "short_name": "RipeSense",
    "start_url": "/",
    "display": "standalone",
    "background_color": "#ffffff",
    "theme_color": "#28a745",
    "description": "Precision Fruit Ripeness Detection",
    "icons": [
      {
        "src": "/static/icon.png",
        "sizes": "192x192",
        "type": "image/png"
      },
      {
        "src": "/static/icon.png",
        "sizes": "512x512",
        "type": "image/png"
      }
    ]
  }
</file>

<file path="static/sw.js">
const CACHE_NAME = 'ripesense-v1';
const ASSETS_TO_CACHE = [
    '/',
    '/static/css/style.css',
    '/static/manifest.json',
    '/static/icon.png',
    'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css',
    'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'
];

// Install Event: Cache files
self.addEventListener('install', (event) => {
    event.waitUntil(
        caches.open(CACHE_NAME)
            .then((cache) => {
                return cache.addAll(ASSETS_TO_CACHE);
            })
    );
});

// Fetch Event: Serve from cache if offline
self.addEventListener('fetch', (event) => {
    event.respondWith(
        caches.match(event.request)
            .then((response) => {
                return response || fetch(event.request);
            })
    );
});
</file>

<file path="templates/base.html">
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}RipeSense AI{% endblock %}</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icon.png') }}">
    <link rel="icon" href="{{ url_for('static', filename='icon.png') }}">
    <meta name="theme-color" content="#2E7D32">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <div class="bg-white text-success rounded-circle d-flex align-items-center justify-content-center me-2" 
                 style="width: 40px; height: 40px; font-size: 1.2rem;">
                üçé
            </div>
            RipeSense
        </a>
        
        <button class="navbar-toggler border-0 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <i class="fas fa-bars"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto p-2 p-lg-0">
                
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="/">
                        <i class="fas fa-home"></i> Home
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/ripeness_detection' %}active{% endif %}" href="/ripeness_detection">
                        <i class="fas fa-microchip"></i> AI Analysis
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/fruit_detection' %}active{% endif %}" href="/fruit_detection">
                        <i class="fas fa-camera"></i> Live Cam
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/history' %}active{% endif %}" href="/history">
                        <i class="fas fa-history"></i> Database
                    </a>
                </li>
            </ul>
        </div>
      </div>
    </nav>

    <div style="height: 100px;"></div>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-white pt-5 pb-4 mt-5 border-top">
        <div class="container text-center text-md-start">
            <div class="row text-center text-md-start">
                
                <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 fw-bold text-success">
                        <i class="fas fa-leaf me-2"></i>RipeSense AI
                    </h5>
                    <p class="text-muted small">
                        Advancing sustainable agriculture through computer vision and deep learning technologies.
                    </p>
                </div>

                <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 fw-bold">Tech Stack</h6>
                    <p><span class="text-muted small">Python Flask</span></p>
                    <p><span class="text-muted small">YOLOv8</span></p>
                    <p><span class="text-muted small">OpenCV</span></p>
                </div>

                <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 fw-bold">Project</h6>
                    <p><a href="/history" class="text-muted text-decoration-none small">Scan History</a></p>
                    <p><a href="/ripeness_detection" class="text-muted text-decoration-none small">Upload Tool</a></p>
                </div>

                <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 fw-bold">Contact</h6>
                    <p class="small text-muted"><i class="fas fa-university me-2"></i> Universiti Utara Malaysia </p>
                    <p class="small text-muted"><i class="fas fa-envelope me-2"></i> project@ripesense.ai</p>
                </div>
            </div>
            <hr class="my-3">
            <div class="text-center p-3 small text-muted">
                ¬© 2025 RipeSense Project. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register("{{ url_for('static', filename='sw.js') }}")
            .then(reg => console.log('Service Worker registered! Scope:', reg.scope))
            .catch(err => console.log('Service Worker failed:', err));
        });
      }
    </script>
</body>
</html>
</file>

<file path="templates/history.html">
{% extends "base.html" %}
{% block title %}History - RipeSense{% endblock %}

{% block content %}
<div class="container fade-in-up">
    
    <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
            <h6 class="text-uppercase text-muted fw-bold mb-1 tracking-wide">Database Records</h6>
            <h2 class="fw-bold">Scan History</h2>
        </div>
        <div>
            <span class="badge bg-white text-dark shadow-sm px-3 py-2 rounded-pill border">
                Total: {{ history|length }}
            </span>
        </div>
    </div>

    <div class="card border-0 glass-card shadow-lg rounded-4 overflow-hidden">
        <div class="card-body p-0">
            
            {% if history %}
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light">
                        <tr>
                            <th class="ps-4 py-3 text-muted small fw-bold">TIMESTAMP</th>
                            <th class="py-3 text-muted small fw-bold">FRUIT</th>
                            <th class="py-3 text-muted small fw-bold">RESULT</th>
                            <th class="py-3 text-muted small fw-bold">CONFIDENCE</th>
                            <th class="pe-4 py-3 text-end text-muted small fw-bold">STATUS</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for entry in history %}
                        <tr>
                            <td class="ps-4 py-3 fw-bold">{{ entry.timestamp }}</td>
                            <td class="py-3 text-uppercase fw-bold text-primary">{{ entry.fruit }}</td>
                            <td class="py-3">
                                {% if entry.result == 'Ripe' %}
                                    <span class="badge bg-warning text-dark rounded-pill">Ripe</span>
                                {% elif entry.result == 'Unripe' %}
                                    <span class="badge bg-success rounded-pill">Unripe</span>
                                {% else %}
                                    <span class="badge bg-danger rounded-pill">Overripe</span>
                                {% endif %}
                            </td>
                            <td class="py-3">
                                <div class="d-flex align-items-center" style="width: 150px;">
                                    <div class="progress flex-grow-1" style="height: 6px;">
                                        <div class="progress-bar bg-dark" style="width: {{ entry.confidence.strip('%') }}%"></div>
                                    </div>
                                    <span class="ms-2 small fw-bold">{{ entry.confidence }}</span>
                                </div>
                            </td>
                            <td class="pe-4 py-3 text-end">
                                <span class="d-inline-block bg-success rounded-circle" style="width: 10px; height: 10px;"></span>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-5">
                <div class="display-1 text-muted opacity-25 mb-3">üìÇ</div>
                <h4 class="fw-bold text-muted">No Records Found</h4>
                <a href="{{ url_for('ripeness_detection') }}" class="btn btn-primary rounded-pill mt-3">Start First Scan</a>
            </div>
            {% endif %}

        </div>
    </div>
</div>
{% endblock %}
</file>

<file path="templates/result_page.html">
{% extends "base.html" %}
{% block title %}Results - RipeSense{% endblock %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<div class="container">
    <div class="row g-5 align-items-center">
        
        <div class="col-lg-5 text-center fade-in-up">
            <div class="card border-0 glass-card rounded-4 overflow-hidden position-relative p-2">
                <img src="data:image/jpeg;base64,{{ img_str }}" class="img-fluid rounded-3 w-100 shadow-sm" style="object-fit: cover; min-height: 350px;">
                <div class="position-absolute bottom-0 start-0 w-100 bg-dark bg-opacity-75 text-white py-2">
                    <small class="fw-bold tracking-wide">ANALYZED SAMPLE</small>
                </div>
            </div>
        </div>

        <div class="col-lg-7 fade-in-up" style="animation-delay: 0.2s;">
            <div class="card border-0 glass-card rounded-4 h-100">
                <div class="card-body p-4 p-md-5">

                    {% if not_fruit %}
                    <div class="alert alert-danger border-0 rounded-3 text-center py-5">
                        <div class="display-1 mb-3">‚ö†Ô∏è</div>
                        <h4 class="fw-bold text-danger">Object Not Recognized</h4>
                        <p class="mb-0">Gatekeeper Model detected: <strong>{{ detected_object }}</strong></p>
                        <hr class="w-50 mx-auto text-danger">
                        <small class="text-muted">System is calibrated for: Banana, Mango, Tomato.</small>
                        <div class="mt-4">
                             <a href="{{ url_for('ripeness_detection') }}" class="btn btn-outline-danger rounded-pill">Try Again</a>
                        </div>
                    </div>

                    {% elif ripeness_result %}
                        
                        <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
                            <h5 class="text-muted text-uppercase fw-bold mb-0" style="letter-spacing: 1px;">AI Diagnostics</h5>
                            {% if class_names %}
                                <span class="badge bg-primary fs-6 rounded-pill px-4 py-2">{{ class_names[0] | title }}</span>
                            {% endif %}
                        </div>

                        <div class="text-center py-4 rounded-4 mb-4"
                             style="background: {% if ripeness_result.ripeness_level == 'Ripe' %}#FFF3E0{% elif ripeness_result.ripeness_level == 'Unripe' %}#E8F5E9{% else %}#FFEBEE{% endif %};">
                            
                            <h6 class="fw-bold text-uppercase text-muted mb-1">Ripeness Status</h6>
                            <h1 class="display-3 fw-bold mb-2" 
                                style="color: {% if ripeness_result.ripeness_level == 'Ripe' %}#F57C00{% elif ripeness_result.ripeness_level == 'Unripe' %}#2E7D32{% else %}#C62828{% endif %};">
                                {{ ripeness_result.ripeness_level }}
                            </h1>
                            <span class="badge bg-white text-dark shadow-sm px-3 py-2 rounded-pill">
                                Confidence: {{ (ripeness_result.confidence * 100)|round(1) }}%
                            </span>
                        </div>

                        <h6 class="fw-bold mb-3">Color Composition</h6>
                        
                        <div class="d-flex align-items-center mb-2">
                            <span class="small fw-bold text-success w-25">Unripe</span>
                            <div class="progress flex-grow-1" style="height: 10px; background-color: #E8F5E9;">
                                <div class="progress-bar bg-success" style="width: {{ ripeness_result.color_analysis.green_percentage }}%"></div>
                            </div>
                            <span class="small ms-2 text-muted fw-bold">{{ ripeness_result.color_analysis.green_percentage|round }}%</span>
                        </div>

                        <div class="d-flex align-items-center mb-2">
                            <span class="small fw-bold text-warning w-25">
                                {% if is_red_fruit %}Turning{% else %}Ripe{% endif %}
                            </span>
                            <div class="progress flex-grow-1" style="height: 10px; background-color: #FFF8E1;">
                                <div class="progress-bar bg-warning" style="width: {{ ripeness_result.color_analysis.yellow_percentage }}%"></div>
                            </div>
                            <span class="small ms-2 text-muted fw-bold">{{ ripeness_result.color_analysis.yellow_percentage|round }}%</span>
                        </div>

                        <div class="d-flex align-items-center mb-4">
                            <span class="small fw-bold text-danger w-25">
                                {% if is_red_fruit %}Ripe (Red){% else %}Overripe{% endif %}
                            </span>
                            <div class="progress flex-grow-1" style="height: 10px; background-color: #FFEBEE;">
                                <div class="progress-bar bg-danger" style="width: {{ ripeness_result.color_analysis.brown_percentage }}%"></div>
                            </div>
                            <span class="small ms-2 text-muted fw-bold">{{ ripeness_result.color_analysis.brown_percentage|round }}%</span>
                        </div>

                        {% if nutrition %}
                        <div class="bg-light p-4 rounded-4 mb-4">
                            <h6 class="fw-bold text-uppercase text-muted mb-3">Nutritional Profile <span class="small">(per 100g)</span></h6>
                            
                            <div class="row g-2">
                                <div class="col-3 text-center border-end">
                                    <small class="text-muted d-block" style="font-size: 0.7rem;">CALORIES</small>
                                    <span class="fw-bold">{{ nutrition.calories }}</span>
                                </div>
                                <div class="col-3 text-center border-end">
                                    <small class="text-muted d-block" style="font-size: 0.7rem;">SUGAR</small>
                                    <span class="fw-bold">{{ nutrition.sugar }}</span>
                                </div>
                                <div class="col-3 text-center border-end">
                                    <small class="text-muted d-block" style="font-size: 0.7rem;">FIBER</small>
                                    <span class="fw-bold">{{ nutrition.fiber }}</span>
                                </div>
                                <div class="col-3 text-center">
                                    <small class="text-muted d-block" style="font-size: 0.7rem;">VITAMIN</small>
                                    <span class="fw-bold">{{ nutrition.vitamin }}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-success d-flex align-items-center border-0 shadow-sm" role="alert">
                            <span class="fs-4 me-3">üí°</span>
                            <div>
                                <small class="fw-bold text-uppercase text-success">Health Benefit</small><br>
                                <small class="text-dark">{{ nutrition.benefit }}</small>
                            </div>
                        </div>
                        {% endif %}

                        <div class="text-center mt-4 mb-3">
                            <button onclick="window.print()" class="btn btn-link text-muted text-decoration-none small">
                                üñ®Ô∏è Download PDF Report
                            </button>
                        </div>

                    {% endif %}

                    <div class="row g-2 mt-4">
                        <div class="col-6">
                            <a href="/" class="btn btn-outline-secondary w-100 rounded-pill py-2">Home</a>
                        </div>
                        <div class="col-6">
                            <a href="{{ url_for('ripeness_detection') }}" class="btn btn-success w-100 rounded-pill py-2">Scan Again</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

{% if ripeness_result %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const status = "{{ ripeness_result.ripeness_level }}";
        
        // Only fire if "Ripe"
        if (status === "Ripe") {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 50 * (timeLeft / duration);
                // Launch from two sides
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.1, y: 0.6 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.9, y: 0.6 } }));
            }, 250);
        }
    });
</script>
{% endif %}
{% endblock %}
</file>

<file path="templates/ripeness_detection.html">
{% extends "base.html" %}
{% block title %}Analyze - RipeSense{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-6 col-md-8">
        <div class="text-center mb-4">
            <h2 class="fw-bold text-success">Analyze Fruit Ripeness</h2>
            <p class="text-muted">Upload a photo to detect freshness instantly.</p>
        </div>

        <div class="card shadow-lg p-4 border-0 rounded-4">
            <div class="card-body">
                
                <div id="scanOverlay" class="scan-overlay">
                    <div class="scanner-box">
                        <img id="scanImage" src="" style="width:100%; height:100%; object-fit:cover; opacity:0.6;">
                        <div class="scan-line"></div>
                    </div>
                    <div class="scan-text">Analyzing Neural Patterns...</div>
                    <div class="spinner-border text-success mt-3" role="status"></div>
                </div>
                
                <form id="uploadForm" action="{{ url_for('detect_ripeness') }}" method="post" enctype="multipart/form-data">
                    
                    <label for="fileInput" class="upload-zone w-100 p-5 text-center mb-4 d-block position-relative">
                        <div id="uploadText">
                            <div class="display-4 text-success mb-3">‚òÅÔ∏è</div>
                            <h5 class="fw-bold">Tap to Select Image</h5>
                        </div>
                        
                        <img id="preview" src="#" alt="Preview" 
                             style="display: none; max-height: 250px; width: auto; margin: 0 auto; border-radius: 15px;">
                        
                        <input type="file" id="fileInput" name="file" accept="image/*" 
                               style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;"
                               onchange="showPreview(event)" required>
                    </label>
                
                    <div class="d-grid gap-3">
                        <button type="button" onclick="startScan()" class="btn btn-success btn-lg rounded-pill shadow-sm">
                            ‚ú® Run AI Analysis
                        </button>
                        <a href="/" class="btn btn-outline-secondary rounded-pill border-0">Cancel</a>
                    </div>
                </form>
                
                <script>
                    function showPreview(event) {
                        if(event.target.files.length > 0){
                            var src = URL.createObjectURL(event.target.files[0]);
                            var preview = document.getElementById("preview");
                            var text = document.getElementById("uploadText");
                            var scanImage = document.getElementById("scanImage"); // For the scanner
                            
                            preview.src = src;
                            preview.style.display = "block";
                            scanImage.src = src; // Set the scanner image too
                            text.style.display = "none";
                        }
                    }
                
                    function startScan() {
                        const fileInput = document.getElementById('fileInput');
                        if (fileInput.files.length === 0) {
                            alert("Please select an image first!");
                            return;
                        }
                
                        // 1. Show the cool overlay
                        document.getElementById('scanOverlay').style.display = 'flex';
                
                        // 2. Wait 2.5 seconds (Fake "Thinking" Time)
                        setTimeout(() => {
                            // 3. Actually submit the form
                            document.getElementById('uploadForm').submit();
                        }, 2500); 
                    }
                </script>

            </div>
        </div>
    </div>
</div>

<script>
    function showPreview(event) {
        if(event.target.files.length > 0){
            var src = URL.createObjectURL(event.target.files[0]);
            var preview = document.getElementById("preview");
            var text = document.getElementById("uploadText");
            
            preview.src = src;
            preview.style.display = "block";
            text.style.display = "none"; // Hide the cloud icon text
        }
    }
</script>
{% endblock %}
</file>

<file path="requirements.txt">
Flask==3.0.0
opencv-python-headless==4.8.1.78
numpy==1.26.2
Pillow==10.1.0
ultralytics==8.0.227
gunicorn==21.2.0
werkzeug==3.0.1
</file>

<file path="templates/banana_detection.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banana Detection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            background-size: cover; /* Prevent background color repeat */
            background-attachment: fixed; /* Ensure background remains fixed */
        }

        .container {
            max-width: 90%;
            padding: 50px;
            background: inherit;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

   
        p {
            margin-top: 60px;

            text-align: center;
            font-size: 40px;
            color: #007bff;
            background: linear-gradient(45deg, #ff7300, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        form {
            margin-top: 20px;
        }

        input[type="file"] {
            display: none;
        }

        label {
            display: block;
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        label:hover {
            background-color: #0056b3;
        }

        .file-name {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }

        .btn {
            margin-top: 20px;
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .back-btn {
            margin-top: 20px;
        }

        .back-btn a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s;
        }

        .back-btn a:hover,.back-btn a:hover {
            color: #636463;
        }





        @media screen and (min-width: 1200px) {
  
            .menu-bar {
                right: 50px; 
            }
        }
        .menu-bar {
            position: fixed;
            top: 0;
            left: 0; 
            width: 100%; 
            background-color: #f5f7fa;
            padding: 10px 20px;
            display: flex;
            justify-content: flex-end;
      
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-top: 2px solid white; 
        }
        
          
      
          
          .menu {
            display: flex;
          }
          
          .menu-item {
            text-decoration: none;
            padding: 10px 20px;
            color: #007bff;
            background: linear-gradient(45deg, #ff7300, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
          }
          
          .menu-item:hover {
            background-color: #555;
          }


         
@media screen and (max-width: 1200px) {
    .container {
        padding: 15px; 
    }
}

@media screen and (max-width: 768px) {
    .container {
        max-width: 95%; 
    }
}

@media screen and (max-width: 480px) {
    .container {
        max-width: 100%;
        padding: 10px; 
    }
}

      
@media screen and (max-width: 1200px) {
    .container {
        padding: 15px;
    }
    h1 {
        font-size: 28px;
    }
    .menu-item {
        padding: 8px 16px; 
    }
}

@media screen and (max-width: 768px) {
    .container {
        max-width: 95%;
        padding: 40px; 
    }
    p {
        font-size: 30px; 
    }
    .menu-item {
        padding: 6px 12px; 
    }
}

@media screen and (max-width: 480px) {
    .container {
        max-width: 100%;
        padding: 40px;
    }
    p {
        font-size: 30px; 
    }
    .menu-item {
        padding: 4px 8px;
    }
}


    </style>
</head>
<body>

    <div class="menu-bar" >
        <div class="menu">
          <a href="/" class="menu-item">Home</a>
          <a href="/" class="menu-item">Info</a>
          <a href="/" class="menu-item">About  </a>
          <a href="#" class="menu-item">  </a>
          
        </div>
      </div>


    <div class="container">
        <p style="color:#8a8e8c">Banana Detection</p>
        <form action="" method="POST" enctype="multipart/form-data" id="uploadForm">
            <input type="file" name="file" id="fileInput" onchange="displayFileName()">
            <label for="fileInput">Choose Banana Image</label>
            <p class="file-name" id="fileName"></p>
            <br>
            <button type="submit" class="btn">Detect Disease</button>
        </form>
        <div class="back-btn">
        </div>
    </div>

    <script>
        function displayFileName() {
            const fileInput = document.getElementById('fileInput');
            const fileNameDisplay = document.getElementById('fileName');
            fileNameDisplay.textContent = fileInput.files[0].name;
        }
    </script>
</body>
</html>
</file>

<file path="templates/disease_detection.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disease Detection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            background-size: cover; 
            background-attachment: fixed; 
        }
        .container {
            max-width: 800px;
            padding: 50px;
            background: inherit;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        .btn {
            padding: 10px 20px;
            margin: 10px;
            font-size: 18px;
            text-decoration: none;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
        }
        .btn:hover {
            background-color: #0056b3;
        }

        @media screen and (max-width: 768px) {
            .btn {
                font-size: 16px;
                padding: 8px 16px;
            }
        }

        @media screen and (max-width: 480px) {
            .btn {
                font-size: 14px;
                padding: 6px 12px;
            }
        }

        p{
            margin-top: 60px;

            text-align: center;
            font-size: 36px;
            color: #007bff;
            background: linear-gradient(45deg, #ff7300, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }


        
        .menu-bar {
            position: fixed;
            top: 0;
            left: 0; /* Adjusted left position */
            width: 100%; /* Full horizontal coverage */
            background-color: #f5f7fa;
            padding: 10px 20px;
            display: flex;
            justify-content: flex-end;
      
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-top: 2px solid white; /* White line on top */
        }
        
          
      
          
          .menu {
            display: flex;
          }
          
          .menu-item {
            text-decoration: none;
            padding: 10px 20px;
            color: #007bff;
            background: linear-gradient(45deg, #ff7300, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
          }
          
          .menu-item:hover {
            background-color: #555;
          }
      

          @media screen and (min-width: 1200px) {
         
            .menu-bar {
                right: 50px;
            }
        }
        


        @media screen and (max-width: 1200px) {
            .container {
                padding: 15px;
            }
        }
        
        @media screen and (max-width: 768px) {
            .container {
                max-width: 95%; 
            }
        }
        
        @media screen and (max-width: 480px) {
            .container {
                max-width: 100%; 
                padding: 10px; 
            }
        }
        
              
        @media screen and (max-width: 1200px) {
            .container {
                padding: 15px; 
            }
            h1 {
                font-size: 28px; 
            }
            .menu-item {
                padding: 8px 16px; 
            }
        }
        
        @media screen and (max-width: 768px) {
            .container {
                max-width: 95%; 
                padding: 40px; 
            }
            p {
                font-size: 30px; 
            }
            .menu-item {
                padding: 6px 12px; 
            }
        }
        
        @media screen and (max-width: 480px) {
            .container {
                max-width: 100%; 
                padding: 40px; 
            }
            p {
                font-size: 30px; 
            }
            .menu-item {
                padding: 4px 8px;
            }
        }
    </style>
</head>
<body>

    
    <div class="menu-bar" >
        <div class="menu">
          <a href="/" class="menu-item">Home</a>
          <a href="/" class="menu-item">Info</a>
          <a href="/" class="menu-item">About  </a>
          <a href="#" class="menu-item">  </a>
          
        </div>
      </div>

    <div class="container">
        <p>Disease Detection</p>
        <a href="/banana_detection" class="btn">Banana Disease Detection</a>
        <a href="/mango_detection" class="btn">Mango Disease Detection</a>
    </div>
</body>
</html>
</file>

<file path="templates/fruit_detection.html">
{% extends "base.html" %}
{% block title %}Live - RipeSense{% endblock %}

{% block content %}
<div class="container fade-in-up">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="fw-bold">Live Object Detection</h2>
                <span class="badge bg-danger rounded-pill px-3 py-2">
                    <span class="recording-indicator me-2"></span> LIVE FEED
                </span>
            </div>

            <div class="camera-container aspect-ratio-16x9 mb-4">
                
                <div class="hud-overlay">
                    <span class="badge bg-black bg-opacity-50 border border-success text-success font-monospace">
                        YOLOv8 MODEL ACTIVE
                    </span>
                </div>
                <div class="scan-grid"></div>

                <video id="video" autoplay playsinline class="w-100" style="display: block;"></video>
                <canvas id="canvas" class="w-100 h-100" style="position: absolute; top: 0; left: 0;"></canvas>
            
            </div>

            <div class="card glass-card border-0 p-4">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h5 class="fw-bold">Session Controls</h5>
                        <p class="text-muted small mb-0">Stream runs locally in browser. No data is sent to server.</p>
                    </div>
                    <div class="col-md-4 text-end">
                        <a href="/" class="btn btn-outline-danger rounded-pill px-4">Stop Stream</a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    // Access Webcam
    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
        .then(stream => {
            video.srcObject = stream;
            video.onloadedmetadata = () => {
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                startDetection(); // Start the loop
            };
        })
        .catch(err => console.error("Camera Error:", err));

    function startDetection() {
        setInterval(() => {
            // Draw video to canvas (hidden processing step)
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            const imageData = canvas.toDataURL('image/jpeg');

            // Send to Backend
            fetch('/detect_objects', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ image_data: imageData })
            })
            .then(response => response.json())
            .then(data => {
                ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear old boxes
                
                data.forEach(obj => {
                    const [x1, y1, x2, y2] = obj.bbox;
                    const width = x2 - x1;
                    const height = y2 - y1;

                    // Draw Bounding Box
                    ctx.strokeStyle = '#00FF00';
                    ctx.lineWidth = 3;
                    ctx.strokeRect(x1, y1, width, height);

                    // Draw Label
                    ctx.fillStyle = '#00FF00';
                    ctx.fillRect(x1, y1 - 25, width, 25);
                    ctx.fillStyle = '#000';
                    ctx.font = 'bold 16px Arial';
                    ctx.fillText(`${obj.class} (${Math.round(obj.confidence * 100)}%)`, x1 + 5, y1 - 7);
                });
            })
            .catch(err => console.log("Detection Error (Is backend running?):", err));
        }, 500); // Run every 500ms (2 FPS)
    }
</script>
{% endblock %}
</file>

<file path="templates/index.html">
{% extends "base.html" %}
{% block title %}Home - RipeSense AI{% endblock %}

{% block content %}

<header class="hero-section text-center py-5 mb-5 fade-in-up" 
        style="background: radial-gradient(circle at top right, #43A047, #1B5E20); color: white;">
    
    <div class="hero-overlay"></div>
    
    <div class="container position-relative py-5 z-2">
        
        <h1 class="display-3 fw-bold mb-3 text-white">Precision Agriculture <br>in Your Pocket</h1>
        <p class="lead mb-4 text-white-75 mx-auto" style="max-width: 650px;">
            Utilizing Convolutional Neural Networks (CNN) and YOLOv8 to reduce food waste and optimize harvest timing with 96% accuracy.
        </p>
        
        <div class="d-flex justify-content-center gap-3">
            <a href="{{ url_for('ripeness_detection') }}" class="btn btn-success btn-lg rounded-pill px-5 shadow-lg">
                üöÄ Launch App
            </a>
            <a href="#how-it-works" class="btn btn-outline-light btn-lg rounded-pill px-4">
                Learn More
            </a>
        </div>
    </div>
</header>

<div class="container mb-5 fade-in-up" style="animation-delay: 0.2s;">
    <div class="row g-4 text-center">
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-number" data-target="96.5">0%</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Model Accuracy</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card" style="border-bottom-color: #FFC107;">
                <div class="stat-number" data-target="14">0</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Weeks in Development</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card" style="border-bottom-color: #2196F3;">
                <div class="stat-number" data-target="3">0</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Supported Fruits</p>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 justify-content-center mb-5 fade-in-up" style="animation-delay: 0.4s;">
    <div class="col-lg-10">
        <div class="row g-4">
            <div class="col-md-6">
                <div class="card h-100 glass-card hover-effect p-4 border-0">
                    <div class="card-body d-flex flex-column align-items-center text-center">
                        <div class="bg-success bg-opacity-10 text-success rounded-circle p-3 mb-3 display-6">
                            üìÅ
                        </div>
                        <h3 class="fw-bold">Static Analysis</h3>
                        <p class="text-muted">Upload high-res images for a detailed breakdown of ripeness, color composition, and nutritional data.</p>
                        <a href="{{ url_for('ripeness_detection') }}" class="btn btn-outline-success rounded-pill w-100 mt-auto">Upload Image</a>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card h-100 glass-card hover-effect p-4 border-0">
                    <div class="card-body d-flex flex-column align-items-center text-center">
                        <div class="bg-primary bg-opacity-10 text-primary rounded-circle p-3 mb-3 display-6">
                            üì∑
                        </div>
                        <h3 class="fw-bold">Real-Time Detection</h3>
                        <p class="text-muted">Activate the YOLOv8-Live stream to detect and classify fruits instantly in the field environment.</p>
                        <a href="{{ url_for('fruit_detection') }}" class="btn btn-outline-primary rounded-pill w-100 mt-auto">Start Camera</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="how-it-works" class="py-5 bg-white rounded-4 shadow-sm mb-5 px-3 fade-in-up" style="animation-delay: 0.6s;">
    <div class="text-center mb-5">
        <small class="text-uppercase text-success fw-bold">The Pipeline</small>
        <h2 class="fw-bold">How RipeSense Works</h2>
    </div>
    
    <div class="row text-center justify-content-center">
        <div class="col-md-3 mb-4">
            <div class="step-circle">üì∏</div>
            <h5 class="fw-bold">1. Input</h5>
            <p class="small text-muted">Image is captured and pre-processed using OpenCV for noise reduction.</p>
        </div>
        <div class="col-md-1 d-none d-md-block pt-4 text-muted">‚ûú</div>
        <div class="col-md-3 mb-4">
            <div class="step-circle">üß†</div>
            <h5 class="fw-bold">2. Inference</h5>
            <p class="small text-muted">YOLO Model classifies the object and extracts HSV color histograms.</p>
        </div>
        <div class="col-md-1 d-none d-md-block pt-4 text-muted">‚ûú</div>
        <div class="col-md-3 mb-4">
            <div class="step-circle">üìä</div>
            <h5 class="fw-bold">3. Output</h5>
            <p class="small text-muted">Ripeness grade and nutritional info are displayed to the user.</p>
        </div>
    </div>
</div>

<div class="text-center mb-5 fade-in-up" style="animation-delay: 0.8s;">
    <h5 class="fw-bold text-muted mb-4">Currently Calibrated For</h5>
    <div>
        <span class="fruit-badge">üçå Banana (Cavendish)</span>
        <span class="fruit-badge">üçÖ Tomato (Roma)</span>
        <span class="fruit-badge">ü•≠ Mango (Honey)</span>
        <span class="fruit-badge text-muted bg-light border-0">...more coming soon</span>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const counters = document.querySelectorAll('.stat-number');
        
        counters.forEach(counter => {
            const updateCount = () => {
                const target = +counter.getAttribute('data-target');
                const count = +counter.innerText.replace('%', ''); // Handle the % sign
                
                const inc = target / 50; 

                if (count < target) {
                    if(counter.getAttribute('data-target').includes('.')) {
                        counter.innerText = (count + inc).toFixed(1) + (target === 96.5 ? '%' : '');
                    } else {
                        counter.innerText = Math.ceil(count + inc);
                    }
                    setTimeout(updateCount, 30);
                } else {
                    counter.innerText = target + (target === 96.5 ? '%' : '');
                }
            };
            updateCount();
        });
    });
</script>

{% endblock %}
</file>

<file path="templates/mango_detection.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mango Detection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            background-size: cover; /* Prevent background color repeat */
            background-attachment: fixed; /* Ensure background remains fixed */
        }

       
        .container {
            max-width: 800px;
            padding: 50px;
            background: inherit;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        p {
            margin-top: 60px;

            text-align: center;
            font-size: 40px;
            color: #007bff;
            background: linear-gradient(45deg, #ff7300, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        form {
            margin-top: 20px;
        }

        input[type="file"] {
            display: none;
        }

        label {
            display: block;
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        label:hover {
            background-color: #0056b3;
        }

        .file-name {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        .btn {
            margin-top: 20px;
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .menu-bar {
            position: fixed;
            top: 0;
            left: 0; 
            width: 100%; 
            background-color: #f5f7fa;
            padding: 10px 20px;
            display: flex;
            justify-content: flex-end;
      
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-top: 2px solid white; /* White line on top */
        }
        
          
      
        @media screen and (min-width: 1200px) {
  
            .menu-bar {
                right: 50px; 
            }
        }

        .menu {
            display: flex;
          }
          
          .menu-item {
            text-decoration: none;
            padding: 10px 20px;
            color: #007bff;
            background: linear-gradient(45deg, #ff7300, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
          }
          
          .menu-item:hover {
            background-color: #555;
          }


          @media screen and (max-width: 1200px) {
            .container {
                padding: 15px;
            }
        }
        
        @media screen and (max-width: 768px) {
            .container {
                max-width: 95%; 
            }
        }
        
        @media screen and (max-width: 480px) {
            .container {
                max-width: 100%; 
                padding: 10px; 
            }
        }
        
              
        @media screen and (max-width: 1200px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 28px;
            }
            .menu-item {
                padding: 8px 16px; 
            }
        }
        
        @media screen and (max-width: 768px) {
            .container {
                max-width: 95%; 
                padding: 40px; 
            }
            p {
                font-size: 30px;
            }
            .menu-item {
                padding: 6px 12px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .container {
                max-width: 100%;
                padding: 40px; 
            }
            p {
                font-size: 30px; 
            }
            .menu-item {
                padding: 4px 8px; 
            }
        }
      
    </style>
</head>
<body>

    <div class="menu-bar" >
        <div class="menu">
          <a href="/" class="menu-item">Home</a>
          <a href="/" class="menu-item">Info</a>
          <a href="/" class="menu-item">About  </a>
          <a href="#" class="menu-item">  </a>
          
        </div>
      </div>


    <div class="container">
        <p >Mango Detection</p>
        <form action="" method="POST" enctype="multipart/form-data" id="uploadForm">
            <input type="file" name="file" id="fileInput" onchange="displayFileName()">
            <label for="fileInput">Choose Mango Image</label>
            <p class="file-name" id="fileName"></p>
            <br>
            <button type="submit" class="btn">Detect Disease</button>
        </form>
    </div>

    <script>
        function displayFileName() {
            const fileInput = document.getElementById('fileInput');
            const fileNameDisplay = document.getElementById('fileName');
            fileNameDisplay.textContent = fileInput.files[0].name;
        }
    </script>
</body>
</html>
</file>

<file path="templates/uploaded_image.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uploaded Image</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            max-width: 800px;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #333;
        }

        ul {
            list-style-type: none;
            padding: 0;
            text-align: center;
        }

        li {
            margin-bottom: 5px;
            display: inline-block;
            background-color: #007bff;
            color: #fff;
            padding: 5px 10px;
            border-radius: 20px;
            margin-right: 10px;
        }

        img {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .back-btn {
            margin-top: 20px;
        }

        .back-btn a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s;
        }

        .back-btn a:hover {
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Uploaded Image</h1>
        <img src="data:image/jpeg;base64,{{ img_str }}" alt="Uploaded Image">
        <h2>Detected Classes:</h2>
        <ul>
            {% for class_name in class_names %}
            <li>{{ class_name }}</li>
            {% endfor %}
        </ul>
        <div class="back-btn">
            <a href="/">Back to Home</a>
        </div>
    </div>
</body>
</html>
</file>

</files>
