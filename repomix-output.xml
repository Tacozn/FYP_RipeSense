This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitattributes
.gitignore
android/.gitignore
android/.idea/.gitignore
android/.idea/compiler.xml
android/.idea/deploymentTargetSelector.xml
android/.idea/migrations.xml
android/.idea/misc.xml
android/.idea/other.xml
android/app/.gitignore
android/app/build.gradle
android/app/capacitor.build.gradle
android/app/proguard-rules.pro
android/app/src/androidTest/java/com/getcapacitor/myapp/ExampleInstrumentedTest.java
android/app/src/main/AndroidManifest.xml
android/app/src/main/ic_launcher-playstore.png
android/app/src/main/java/com/ripesense/app/MainActivity.java
android/app/src/main/res/drawable-land-hdpi/splash.png
android/app/src/main/res/drawable-land-mdpi/splash.png
android/app/src/main/res/drawable-land-xhdpi/splash.png
android/app/src/main/res/drawable-land-xxhdpi/splash.png
android/app/src/main/res/drawable-land-xxxhdpi/splash.png
android/app/src/main/res/drawable-port-hdpi/splash.png
android/app/src/main/res/drawable-port-mdpi/splash.png
android/app/src/main/res/drawable-port-xhdpi/splash.png
android/app/src/main/res/drawable-port-xxhdpi/splash.png
android/app/src/main/res/drawable-port-xxxhdpi/splash.png
android/app/src/main/res/drawable-v24/ic_launcher_foreground.xml
android/app/src/main/res/drawable/ic_launcher_background.xml
android/app/src/main/res/drawable/splash.png
android/app/src/main/res/layout/activity_main.xml
android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
android/app/src/main/res/mipmap-hdpi/ic_launcher_foreground.webp
android/app/src/main/res/mipmap-hdpi/ic_launcher_round.webp
android/app/src/main/res/mipmap-hdpi/ic_launcher.webp
android/app/src/main/res/mipmap-mdpi/ic_launcher_foreground.webp
android/app/src/main/res/mipmap-mdpi/ic_launcher_round.webp
android/app/src/main/res/mipmap-mdpi/ic_launcher.webp
android/app/src/main/res/mipmap-xhdpi/ic_launcher_foreground.webp
android/app/src/main/res/mipmap-xhdpi/ic_launcher_round.webp
android/app/src/main/res/mipmap-xhdpi/ic_launcher.webp
android/app/src/main/res/mipmap-xxhdpi/ic_launcher_foreground.webp
android/app/src/main/res/mipmap-xxhdpi/ic_launcher_round.webp
android/app/src/main/res/mipmap-xxhdpi/ic_launcher.webp
android/app/src/main/res/mipmap-xxxhdpi/ic_launcher_foreground.webp
android/app/src/main/res/mipmap-xxxhdpi/ic_launcher_round.webp
android/app/src/main/res/mipmap-xxxhdpi/ic_launcher.webp
android/app/src/main/res/values/ic_launcher_background.xml
android/app/src/main/res/values/strings.xml
android/app/src/main/res/values/styles.xml
android/app/src/main/res/xml/file_paths.xml
android/app/src/test/java/com/getcapacitor/myapp/ExampleUnitTest.java
android/build.gradle
android/capacitor.settings.gradle
android/gradle.properties
android/gradle/wrapper/gradle-wrapper.jar
android/gradle/wrapper/gradle-wrapper.properties
android/gradlew
android/gradlew.bat
android/settings.gradle
android/variables.gradle
app.py
Aptfile
capacitor.config.ts
Dockerfile
history.json
LICENSE
models/best.onnx
models/best.pt
models/yolov5s.pt
models/yolov8n-cls.onnx
models/yolov8n-cls.pt
models/yolov8n.pt
package.json
Procfile
README.md
render.yaml
requirements.txt
runtime.txt
scripts/batch_test.py
scripts/convert_pt.py
scripts/evaluation/calibrate_hsv.py
scripts/evaluation/compare.py
scripts/evaluation/confusion_matrix_result.png
scripts/evaluation/evaluate_metrics.py
scripts/evaluation/evaluate_model_only.py
scripts/evaluation/evaluation_metrics.py
scripts/evaluation/evaluation_results.png
scripts/make_monster.py
scripts/test_hybrid.py
scripts/test_memory_limit.py
scripts/test_safety.py
scripts/webapp.py
static/css/style.css
static/icon.png
static/images/confusion_matrix_result.png
static/images/icon.png
static/images/icon1.png
static/images/icon2.png
static/images/icon3.png
static/images/icon4.png
static/js/sw.js
static/manifest.json
static/uploads/1000122838.jpg
static/uploads/1000123348.jpg
static/uploads/1766243864_orange.jpg
static/uploads/1766286424_orange.jpg
static/uploads/1766286431_orange.jpg
static/uploads/1766313742_rltomato.jpeg
static/uploads/1766313751_rltomato.jpeg
static/uploads/1766313763_rltomato.jpeg
static/uploads/1766313771_rltomato.jpeg
static/uploads/1766313791_ripe_banana.png
static/uploads/1766313853_webcam_capture.jpg
static/uploads/1766313864_rl_banana.jpeg
static/uploads/1766313994_Screenshot_2025-12-21_184558.png
static/uploads/1766314134_orange.jpg
static/uploads/1766314160_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766314172_rltomato.jpeg
static/uploads/1766314219_orange.jpg
static/uploads/1766314245_orange.jpg
static/uploads/1766314262_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766314313_orange.jpg
static/uploads/1766314403_orange.jpg
static/uploads/1766314630_orange.jpg
static/uploads/1766314703_orange.jpg
static/uploads/1766314732_orange.jpg
static/uploads/1766314745_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766314761_Screenshot_2025-12-21_184558.png
static/uploads/1766314792_webcam_capture.jpg
static/uploads/1766314885_orange.jpg
static/uploads/1766314918_Screenshot_2025-12-21_184558.png
static/uploads/1766315048_orange.jpg
static/uploads/1766315272_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766315474_Screenshot_2025-12-21_184558.png
static/uploads/1766315625_orange.jpg
static/uploads/1766315664_orange.jpg
static/uploads/1766315676_orange.jpg
static/uploads/1766315707_orange.jpg
static/uploads/1766315714_orange.jpg
static/uploads/1766315729_orange.jpg
static/uploads/1766315751_orange.jpg
static/uploads/1766315761_orange.jpg
static/uploads/1766315786_orange.jpg
static/uploads/1766315837_orange.jpg
static/uploads/1766315862_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766315884_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766315928_rltomato.jpeg
static/uploads/1766315944_unripe_tomato_error.jpg
static/uploads/1766315960_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766322654_webcam_capture.jpg
static/uploads/1766323194_rl_banana.jpeg
static/uploads/1766323202_unripe_tomato_error.jpg
static/uploads/1766323256_webcam_capture.jpg
static/uploads/1766323640_orange.jpg
static/uploads/1766323827_orange.jpg
static/uploads/1766323862_orange.jpg
static/uploads/1766323913_orange.jpg
static/uploads/1766324106_orange.jpg
static/uploads/1766324539_orange.jpg
static/uploads/1766324805_orange.jpg
static/uploads/1766324924_orange.jpg
static/uploads/1766334964_Screenshot_2025-12-21_184558.png
static/uploads/1766334971_Screenshot_2025-12-21_184558.png
static/uploads/1766335007_Screenshot_2025-12-21_184558.png
static/uploads/1766335015_Screenshot_2025-12-21_184558.png
static/uploads/1766335686_Screenshot_2025-12-21_184558.png
static/uploads/1766335701_orange.jpg
static/uploads/1766335761_rltomato.jpeg
static/uploads/1766335771_apple_strawberry.jpg
static/uploads/1766335777_glorp.jpg
static/uploads/1766335783_orange.jpg
static/uploads/1766335956_orange.jpg
static/uploads/1766335971_rl_banana.jpeg
static/uploads/1766336544_Screenshot_2025-12-21_184558.png
static/uploads/1766336662_Screenshot_2025-12-21_184558.png
static/uploads/1766337309_rl_banana.jpeg
static/uploads/1766337936_rl_banana.jpeg
static/uploads/1766337954_apple_strawberry.jpg
static/uploads/1766338528_apple_strawberry.jpg
static/uploads/1766338547_ripe_banana.png
static/uploads/1766338727_Screenshot_2025-12-21_184558.png
static/uploads/1766338742_rltomato.jpeg
static/uploads/1766338750_orange.jpg
static/uploads/1766338759_apple_strawberry.jpg
static/uploads/1766338769_ripe_mango.jpg
static/uploads/1766338775_rl_banana.jpeg
static/uploads/1766339567_apple_strawberry.jpg
static/uploads/1766339576_apple_strawberry.jpg
static/uploads/1766339626_orange.jpg
static/uploads/1766339739_orange.jpg
static/uploads/1766341528_unripe_tomato_error.jpg
static/uploads/1766341606_rl_banana.jpeg
static/uploads/1766341876_rl_banana.jpeg
static/uploads/1766341888_unripe_tomato_error.jpg
static/uploads/1766341904_ripe_mango.jpg
static/uploads/1766341924_rl_banana.jpeg
static/uploads/1766341932_unripe_mango_error.jpg
static/uploads/1766341942_unripe_banana.jpg
static/uploads/1766341951_apple_strawberry.jpg
static/uploads/1766341960_overripe_mango.jpg
static/uploads/1766341981_rltomato.jpeg
static/uploads/1766342103_rl_banana.jpeg
static/uploads/1766342131_ripe_banana.png
static/uploads/1766342367_ripe_banana.png
static/uploads/1766342374_ripe_banana.png
static/uploads/1766342392_ripe_banana.png
static/uploads/1766342399_ripe_banana.png
static/uploads/1766342760_ripe_mango.jpg
static/uploads/1766343769_unripe_mango_error.jpg
static/uploads/1766343781_ripe_mango.jpg
static/uploads/1766344023_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/1766344040_orange.jpg
static/uploads/1766344047_ripe_banana.png
static/uploads/1766344969_ripe_banana.png
static/uploads/1766344980_ripe_mango.jpg
static/uploads/1766345621_ripe_mango.jpg
static/uploads/1766351320_unripe_mango2.jpg
static/uploads/1766351327_unripe_mango2.jpg
static/uploads/1766351335_unripe_mango2.jpg
static/uploads/1766351343_unripe_mango2.jpg
static/uploads/1766351494_ripe_banana.png
static/uploads/1766351547_unripe_mango2.jpg
static/uploads/1766391588_ripe_mango.jpg
static/uploads/1766392298_ripe_mango.jpg
static/uploads/1766392304_ripe_mango.jpg
static/uploads/1766392312_ripe_mango.jpg
static/uploads/1766392319_ripe_mango.jpg
static/uploads/1766392343_ripe_mango.jpg
static/uploads/1766392367_apple_strawberry.jpg
static/uploads/1766392690_glorp.jpg
static/uploads/1766392700_unripe_mango2.jpg
static/uploads/1766392715_Screenshot_2025-12-21_184558.png
static/uploads/1766392727_orange.jpg
static/uploads/1766392745_rltomato.jpeg
static/uploads/1766392814_ripe_banana.png
static/uploads/1766392821_unripe_tomato_error.jpg
static/uploads/1766392861_unripe_tomato_error.jpg
static/uploads/1766392921_unripe_mango_error.jpg
static/uploads/1766392974_apple_strawberry.jpg
static/uploads/1766393139_istockphoto-184276818-612x612.jpg
static/uploads/1766393348_istockphoto-184276818-612x612.jpg
static/uploads/1766393373_apple_strawberry.jpg
static/uploads/1766393451_unripe_tomato_error.jpg
static/uploads/1766393595_unripe_tomato_error.jpg
static/uploads/1766393842_unripe_tomato_error.jpg
static/uploads/1766393862_istockphoto-184276818-612x612.jpg
static/uploads/1766393878_unripe_mango_error.jpg
static/uploads/1766393891_rl_banana.jpeg
static/uploads/1766393914_ripe_mango.jpg
static/uploads/1766394473_unripe_tomato_error.jpg
static/uploads/1766394794_m15.jpg
static/uploads/1766395079_ripe_mango.jpg
static/uploads/1766395128_apple_strawberry.jpg
static/uploads/1766395134_orange.jpg
static/uploads/1766395145_unripe_tomato_error.jpg
static/uploads/1766395159_glorp.jpg
static/uploads/1766395184_rl_banana.jpeg
static/uploads/1766395501_rl_banana.jpeg
static/uploads/1766395520_unripe_tomato_error.jpg
static/uploads/1766395540_glorp.jpg
static/uploads/1766395555_apple_strawberry.jpg
static/uploads/1766395572_ripe_mango.jpg
static/uploads/1766395918_overripe_tomato.jpg
static/uploads/1766395931_ripe_tomato.jpg
static/uploads/1766395946_unripe_mango_error.jpg
static/uploads/1766396156_unripe_mango_error.jpg
static/uploads/1766396163_unripe_mango_error.jpg
static/uploads/1766396176_unripe_mango_error.jpg
static/uploads/1766396185_unripe_mango_error.jpg
static/uploads/1766396556_ripe_mango.jpg
static/uploads/1766465838_unripe_mango2.jpg
static/uploads/1766465846_unripe_mango2.jpg
static/uploads/1766465855_unripe_mango2.jpg
static/uploads/1766465863_unripe_mango2.jpg
static/uploads/9921387.png
static/uploads/a99ca1355d867dee19fb4f379c6af02d.jpg
static/uploads/apple_strawberry.jpg
static/uploads/apple.png
static/uploads/apple1.jpg
static/uploads/apple11.jpg
static/uploads/b16.jpg
static/uploads/b2.jpg
static/uploads/bananna.jpeg
static/uploads/detected_image.jpg
static/uploads/download_2.jpg
static/uploads/download_3.jpg
static/uploads/download_4.jpg
static/uploads/download_5.jpg
static/uploads/fruit.png
static/uploads/glorp.jpg
static/uploads/green_banana.jpg
static/uploads/house.jpg
static/uploads/icon4.png
static/uploads/images_1.jpg
static/uploads/images_2.jpg
static/uploads/m10.jpg
static/uploads/ob12.jpg
static/uploads/ob13.jpg
static/uploads/ob14.jpg
static/uploads/ob16.jpg
static/uploads/ob18.jpg
static/uploads/ob5.jpg
static/uploads/ob6.jpg
static/uploads/ob9.jpg
static/uploads/om10.jpg
static/uploads/om14.jpg
static/uploads/om15.jpg
static/uploads/om16.jpg
static/uploads/orange.jpg
static/uploads/ot10.jpg
static/uploads/ot16.jpg
static/uploads/ot17.jpg
static/uploads/ot18.jpg
static/uploads/overbanan1.jpg
static/uploads/overmango.jpg
static/uploads/overripe_banana.jpg
static/uploads/overripe_mango.jpg
static/uploads/overripe_tomato.jpg
static/uploads/overtomato.jpg
static/uploads/overtomato1.jpg
static/uploads/overtomato2.jpg
static/uploads/overtomato3.jpg
static/uploads/ripe_banana.png
static/uploads/ripe_banana2.png
static/uploads/ripe_mango.jpg
static/uploads/ripe_tomato.jpg
static/uploads/rl_banana.jpeg
static/uploads/rltomato.jpeg
static/uploads/t8.jpg
static/uploads/t9.jpg
static/uploads/test11113.jpg
static/uploads/tomato.jpg
static/uploads/tomato1.jpg
static/uploads/ub1.jpg
static/uploads/ub10.jpg
static/uploads/ub13.jpg
static/uploads/ub14.jpg
static/uploads/ub15.jpg
static/uploads/ub16.jpg
static/uploads/ub3.jpg
static/uploads/ub5.jpg
static/uploads/ub6.jpg
static/uploads/um10.jpg
static/uploads/um2.jpg
static/uploads/um5.jpg
static/uploads/unnamed__44_-removebg-preview.png
static/uploads/unnamed_42.jpg
static/uploads/unripe_banana.jpg
static/uploads/unripe_mango_error.jpg
static/uploads/unripe_mango.jpg
static/uploads/unripe_tomato_error.jpg
static/uploads/unripe_tomato.jpg
static/uploads/Untitled_design_2.png
static/uploads/ut10.jpg
static/uploads/ut16.jpg
static/uploads/ut7.jpg
static/uploads/ut9.jpg
static/uploads/webcam_capture.jpg
static/uploads/WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg
static/uploads/WhatsApp_Image_2025-12-20_at_7.52.00_PM.jpeg
templates/404.html
templates/base.html
templates/fruit_detection.html
templates/history.html
templates/index.html
templates/model_stats.html
templates/result_page.html
templates/ripeness_detection.html
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="Dockerfile">
# 1. Use Python 3.10 as the base image
FROM python:3.10

# 2. Set the working directory inside the container
WORKDIR /code

# 3. Install system dependencies required for OpenCV (GL libraries)
# ⚠️ This step is CRITICAL for image processing apps!
RUN apt-get update && apt-get install -y libgl1 libglib2.0-0

# 4. Copy requirements file
COPY ./requirements.txt /code/requirements.txt

# 5. Install Python dependencies
# We use --no-cache-dir to keep the image small
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# 6. Copy the rest of your application code
COPY . /code

# 7. Create the uploads folder and set permissions
# Hugging Face permissions can be tricky; this ensures your app can save uploaded images.
RUN mkdir -p /code/static/uploads && chmod 777 /code/static/uploads

# 8. Start the application using Gunicorn on port 7860
CMD ["gunicorn", "-b", "0.0.0.0:7860", "app:app"]
</file>

<file path=".gitattributes">
*.7z filter=lfs diff=lfs merge=lfs -text
*.arrow filter=lfs diff=lfs merge=lfs -text
*.bin filter=lfs diff=lfs merge=lfs -text
*.bz2 filter=lfs diff=lfs merge=lfs -text
*.ckpt filter=lfs diff=lfs merge=lfs -text
*.ftz filter=lfs diff=lfs merge=lfs -text
*.gz filter=lfs diff=lfs merge=lfs -text
*.h5 filter=lfs diff=lfs merge=lfs -text
*.joblib filter=lfs diff=lfs merge=lfs -text
*.lfs.* filter=lfs diff=lfs merge=lfs -text
*.mlmodel filter=lfs diff=lfs merge=lfs -text
*.model filter=lfs diff=lfs merge=lfs -text
*.msgpack filter=lfs diff=lfs merge=lfs -text
*.npy filter=lfs diff=lfs merge=lfs -text
*.npz filter=lfs diff=lfs merge=lfs -text
*.onnx filter=lfs diff=lfs merge=lfs -text
*.ot filter=lfs diff=lfs merge=lfs -text
*.parquet filter=lfs diff=lfs merge=lfs -text
*.pb filter=lfs diff=lfs merge=lfs -text
*.pickle filter=lfs diff=lfs merge=lfs -text
*.pkl filter=lfs diff=lfs merge=lfs -text
*.pt filter=lfs diff=lfs merge=lfs -text
*.pth filter=lfs diff=lfs merge=lfs -text
*.rar filter=lfs diff=lfs merge=lfs -text
*.safetensors filter=lfs diff=lfs merge=lfs -text
saved_model/**/* filter=lfs diff=lfs merge=lfs -text
*.tar.* filter=lfs diff=lfs merge=lfs -text
*.tar filter=lfs diff=lfs merge=lfs -text
*.tflite filter=lfs diff=lfs merge=lfs -text
*.tgz filter=lfs diff=lfs merge=lfs -text
*.wasm filter=lfs diff=lfs merge=lfs -text
*.xz filter=lfs diff=lfs merge=lfs -text
*.zip filter=lfs diff=lfs merge=lfs -text
*.zst filter=lfs diff=lfs merge=lfs -text
*tfevents* filter=lfs diff=lfs merge=lfs -text
</file>

<file path="android/.gitignore">
# Using Android gitignore template: https://github.com/github/gitignore/blob/HEAD/Android.gitignore

# Built application files
*.apk
*.aar
*.ap_
*.aab

# Files for the ART/Dalvik VM
*.dex

# Java class files
*.class

# Generated files
bin/
gen/
out/
#  Uncomment the following line in case you need and you don't have the release build type files in your app
# release/

# Gradle files
.gradle/
build/

# Local configuration file (sdk path, etc)
local.properties

# Proguard folder generated by Eclipse
proguard/

# Log Files
*.log

# Android Studio Navigation editor temp files
.navigation/

# Android Studio captures folder
captures/

# IntelliJ
*.iml
.idea/workspace.xml
.idea/tasks.xml
.idea/gradle.xml
.idea/assetWizardSettings.xml
.idea/dictionaries
.idea/libraries
# Android Studio 3 in .gitignore file.
.idea/caches
.idea/modules.xml
# Comment next line if keeping position of elements in Navigation Editor is relevant for you
.idea/navEditor.xml

# Keystore files
# Uncomment the following lines if you do not want to check your keystore files in.
#*.jks
#*.keystore

# External native build folder generated in Android Studio 2.2 and later
.externalNativeBuild
.cxx/

# Google Services (e.g. APIs or Firebase)
# google-services.json

# Freeline
freeline.py
freeline/
freeline_project_description.json

# fastlane
fastlane/report.xml
fastlane/Preview.html
fastlane/screenshots
fastlane/test_output
fastlane/readme.md

# Version control
vcs.xml

# lint
lint/intermediates/
lint/generated/
lint/outputs/
lint/tmp/
# lint/reports/

# Android Profiling
*.hprof

# Cordova plugins for Capacitor
capacitor-cordova-android-plugins

# Copied web assets
app/src/main/assets/public

# Generated Config files
app/src/main/assets/capacitor.config.json
app/src/main/assets/capacitor.plugins.json
app/src/main/res/xml/config.xml
</file>

<file path="android/.idea/.gitignore">
# Default ignored files
/shelf/
/workspace.xml
</file>

<file path="android/.idea/compiler.xml">
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CompilerConfiguration">
    <bytecodeTargetLevel target="17" />
  </component>
</project>
</file>

<file path="android/.idea/deploymentTargetSelector.xml">
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="deploymentTargetSelector">
    <selectionStates>
      <SelectionState runConfigName="app">
        <option name="selectionMode" value="DROPDOWN" />
        <DropdownSelection timestamp="2025-12-21T15:54:49.587308200Z">
          <Target type="DEFAULT_BOOT">
            <handle>
              <DeviceId pluginId="LocalEmulator" identifier="path=C:\Users\carro\.android\avd\Pixel_4_API_34.avd" />
            </handle>
          </Target>
        </DropdownSelection>
        <DialogSelection />
      </SelectionState>
    </selectionStates>
  </component>
</project>
</file>

<file path="android/.idea/migrations.xml">
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ProjectMigrations">
    <option name="MigrateToGradleLocalJavaHome">
      <set>
        <option value="$PROJECT_DIR$" />
      </set>
    </option>
  </component>
</project>
</file>

<file path="android/.idea/misc.xml">
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ExternalStorageConfigurationManager" enabled="true" />
  <component name="ProjectRootManager" version="2" languageLevel="JDK_17" default="true" project-jdk-name="jbr-17" project-jdk-type="JavaSDK">
    <output url="file://$PROJECT_DIR$/build/classes" />
  </component>
  <component name="ProjectType">
    <option name="id" value="Android" />
  </component>
</project>
</file>

<file path="android/.idea/other.xml">
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="direct_access_persist.xml">
    <option name="deviceSelectionList">
      <list>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="Sony" />
          <option name="codename" value="A402SO" />
          <option name="id" value="A402SO" />
          <option name="manufacturer" value="Sony" />
          <option name="name" value="Xperia 10" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2520" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="27" />
          <option name="brand" value="DOCOMO" />
          <option name="codename" value="F01L" />
          <option name="id" value="F01L" />
          <option name="manufacturer" value="FUJITSU" />
          <option name="name" value="F-01L" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1280" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="OnePlus" />
          <option name="codename" value="OP535DL1" />
          <option name="id" value="OP535DL1" />
          <option name="manufacturer" value="OnePlus" />
          <option name="name" value="CPH2409" />
          <option name="screenDensity" value="401" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2412" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="OnePlus" />
          <option name="codename" value="OP5552L1" />
          <option name="id" value="OP5552L1" />
          <option name="manufacturer" value="OnePlus" />
          <option name="name" value="CPH2415" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2412" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="OnePlus" />
          <option name="codename" value="OP5552L1" />
          <option name="id" value="OP5552L1" />
          <option name="manufacturer" value="OnePlus" />
          <option name="name" value="CPH2415" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2412" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="OPPO" />
          <option name="codename" value="OP573DL1" />
          <option name="id" value="OP573DL1" />
          <option name="manufacturer" value="OPPO" />
          <option name="name" value="CPH2557" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="28" />
          <option name="brand" value="DOCOMO" />
          <option name="codename" value="SH-01L" />
          <option name="id" value="SH-01L" />
          <option name="manufacturer" value="SHARP" />
          <option name="name" value="AQUOS sense2 SH-01L" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2160" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="Lenovo" />
          <option name="codename" value="TB330FU" />
          <option name="id" value="TB330FU" />
          <option name="manufacturer" value="Lenovo" />
          <option name="name" value="Tab M11" />
          <option name="screenDensity" value="240" />
          <option name="screenX" value="1200" />
          <option name="screenY" value="1920" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a03su" />
          <option name="id" value="a03su" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy A03s" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a05s" />
          <option name="id" value="a05s" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A05s" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a06" />
          <option name="id" value="a06" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy A06" />
          <option name="screenDensity" value="300" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a14m" />
          <option name="id" value="a14m" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A145R" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2408" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a15" />
          <option name="id" value="a15" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A15" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a15x" />
          <option name="id" value="a15x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A15 5G" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a16" />
          <option name="id" value="a16" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A165M" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a16x" />
          <option name="id" value="a16x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A16 5G" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a26x" />
          <option name="id" value="a26x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A266B" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a34x" />
          <option name="id" value="a34x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A346N" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a35x" />
          <option name="id" value="a35x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A35" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a35x" />
          <option name="id" value="a35x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="A35" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a36xq" />
          <option name="id" value="a36xq" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A366E" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a36xq" />
          <option name="id" value="a36xq" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A366E" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="a56x" />
          <option name="id" value="a56x" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-A566E" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="akita" />
          <option name="id" value="akita" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="akita" />
          <option name="id" value="akita" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="arcfox" />
          <option name="id" value="arcfox" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="razr plus 2024" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="1272" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="motorola" />
          <option name="codename" value="austin" />
          <option name="id" value="austin" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g 5G (2022)" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="b0q" />
          <option name="id" value="b0q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S22 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3088" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="b6q" />
          <option name="id" value="b6q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Flip 6" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2640" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="blazer" />
          <option name="id" value="blazer" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10 Pro" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2410" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="32" />
          <option name="brand" value="google" />
          <option name="codename" value="bluejay" />
          <option name="id" value="bluejay" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 6a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="caiman" />
          <option name="id" value="caiman" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="960" />
          <option name="screenY" value="2142" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="caiman" />
          <option name="id" value="caiman" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="960" />
          <option name="screenY" value="2142" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="comet" />
          <option name="id" value="comet" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro Fold" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="2076" />
          <option name="screenY" value="2152" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="comet" />
          <option name="id" value="comet" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro Fold" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="2076" />
          <option name="screenY" value="2152" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="29" />
          <option name="brand" value="samsung" />
          <option name="codename" value="crownqlteue" />
          <option name="id" value="crownqlteue" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Note9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2220" />
          <option name="screenY" value="1080" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="dm1q" />
          <option name="id" value="dm1q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S23" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="dm2q" />
          <option name="id" value="dm2q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S23 Plus" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="dm3q" />
          <option name="id" value="dm3q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S23 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3088" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="dubai" />
          <option name="id" value="dubai" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="edge 30" />
          <option name="screenDensity" value="405" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e1q" />
          <option name="id" value="e1q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e1q" />
          <option name="id" value="e1q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e3q" />
          <option name="id" value="e3q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24 Ultra" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="e3q" />
          <option name="id" value="e3q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S24 Ultra" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="eos" />
          <option name="id" value="eos" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Eos" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="384" />
          <option name="screenY" value="384" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="felix" />
          <option name="id" value="felix" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Fold" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2208" />
          <option name="screenY" value="1840" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="felix" />
          <option name="id" value="felix" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Fold" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2208" />
          <option name="screenY" value="1840" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="felix_camera" />
          <option name="id" value="felix_camera" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Fold (Camera-enabled)" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="2208" />
          <option name="screenY" value="1840" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="fogona" />
          <option name="id" value="fogona" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g play - 2024" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="fogos" />
          <option name="id" value="fogos" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g34 5G" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="frankel" />
          <option name="id" value="frankel" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="g0q" />
          <option name="id" value="g0q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-S906U1" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="g0q" />
          <option name="id" value="g0q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-S906U1" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gta9pwifi" />
          <option name="id" value="gta9pwifi" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-X210" />
          <option name="screenDensity" value="240" />
          <option name="screenX" value="1200" />
          <option name="screenY" value="1920" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts7lwifi" />
          <option name="id" value="gts7lwifi" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-T870" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts7xllite" />
          <option name="id" value="gts7xllite" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-T738U" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts8uwifi" />
          <option name="id" value="gts8uwifi" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Tab S8 Ultra" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="1848" />
          <option name="screenY" value="2960" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts8wifi" />
          <option name="id" value="gts8wifi" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Tab S8" />
          <option name="screenDensity" value="274" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts9fe" />
          <option name="id" value="gts9fe" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Tab S9 FE 5G" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="2304" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="gts9wifi" />
          <option name="id" value="gts9wifi" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-X710" />
          <option name="screenDensity" value="340" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="husky" />
          <option name="id" value="husky" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8 Pro" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="1008" />
          <option name="screenY" value="2244" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="30" />
          <option name="brand" value="motorola" />
          <option name="codename" value="java" />
          <option name="id" value="java" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="G20" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="motorola" />
          <option name="codename" value="kansas" />
          <option name="id" value="kansas" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g - 2025" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1604" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="komodo" />
          <option name="id" value="komodo" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro XL" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="1008" />
          <option name="screenY" value="2244" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="komodo" />
          <option name="id" value="komodo" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9 Pro XL" />
          <option name="screenDensity" value="360" />
          <option name="screenX" value="1008" />
          <option name="screenY" value="2244" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="motorola" />
          <option name="codename" value="lamul" />
          <option name="id" value="lamul" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g05" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1604" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="lion" />
          <option name="id" value="lion" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g04" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1612" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="lynx" />
          <option name="id" value="lynx" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 7a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="lyriq" />
          <option name="id" value="lyriq" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="edge 40" />
          <option name="screenDensity" value="400" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="motorola" />
          <option name="codename" value="manaus" />
          <option name="id" value="manaus" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="edge 40 neo" />
          <option name="screenDensity" value="400" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="motorola" />
          <option name="codename" value="maui" />
          <option name="id" value="maui" />
          <option name="manufacturer" value="Motorola" />
          <option name="name" value="moto g play - 2023" />
          <option name="screenDensity" value="280" />
          <option name="screenX" value="720" />
          <option name="screenY" value="1600" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="mustang" />
          <option name="id" value="mustang" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10 Pro XL" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2404" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="o1q" />
          <option name="id" value="o1q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21" />
          <option name="screenDensity" value="421" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="o1q" />
          <option name="id" value="o1q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21" />
          <option name="screenDensity" value="421" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="31" />
          <option name="brand" value="google" />
          <option name="codename" value="oriole" />
          <option name="id" value="oriole" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 6" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="p3q" />
          <option name="id" value="p3q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3200" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="pa2q" />
          <option name="id" value="pa2q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S25+" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="pa3q" />
          <option name="id" value="pa3q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S25 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="pa3q" />
          <option name="id" value="pa3q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S25 Ultra" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="panther" />
          <option name="id" value="panther" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 7" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="samsung" />
          <option name="codename" value="psq" />
          <option name="id" value="psq" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S25 Edge" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3120" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="q5q" />
          <option name="id" value="q5q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Z Fold5" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1812" />
          <option name="screenY" value="2176" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="q6q" />
          <option name="id" value="q6q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy Z Fold6" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1856" />
          <option name="screenY" value="2160" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="30" />
          <option name="brand" value="google" />
          <option name="codename" value="r11" />
          <option name="id" value="r11" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Watch" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="384" />
          <option name="screenY" value="384" />
          <option name="type" value="WEAR_OS" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="r11q" />
          <option name="id" value="r11q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-S711U" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="samsung" />
          <option name="codename" value="r9q" />
          <option name="id" value="r9q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21 FE 5G" />
          <option name="screenDensity" value="480" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="rango" />
          <option name="id" value="rango" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 10 Pro Fold" />
          <option name="screenDensity" value="390" />
          <option name="screenX" value="2076" />
          <option name="screenY" value="2152" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="30" />
          <option name="brand" value="google" />
          <option name="codename" value="redfin" />
          <option name="id" value="redfin" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 5" />
          <option name="screenDensity" value="440" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2340" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="shiba" />
          <option name="id" value="shiba" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 8" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="t2q" />
          <option name="id" value="t2q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="Galaxy S21 Plus" />
          <option name="screenDensity" value="394" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2400" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="google" />
          <option name="codename" value="tangorpro" />
          <option name="id" value="tangorpro" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel Tablet" />
          <option name="screenDensity" value="320" />
          <option name="screenX" value="1600" />
          <option name="screenY" value="2560" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="tegu" />
          <option name="id" value="tegu" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9a" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="google" />
          <option name="codename" value="tokay" />
          <option name="id" value="tokay" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="35" />
          <option name="brand" value="google" />
          <option name="codename" value="tokay" />
          <option name="id" value="tokay" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="36" />
          <option name="brand" value="google" />
          <option name="codename" value="tokay" />
          <option name="id" value="tokay" />
          <option name="manufacturer" value="Google" />
          <option name="name" value="Pixel 9" />
          <option name="screenDensity" value="420" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2424" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="34" />
          <option name="brand" value="samsung" />
          <option name="codename" value="xcover7" />
          <option name="id" value="xcover7" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="SM-G556B" />
          <option name="screenDensity" value="450" />
          <option name="screenX" value="1080" />
          <option name="screenY" value="2408" />
        </PersistentDeviceSelectionData>
        <PersistentDeviceSelectionData>
          <option name="api" value="33" />
          <option name="brand" value="samsung" />
          <option name="codename" value="y2q" />
          <option name="id" value="y2q" />
          <option name="manufacturer" value="Samsung" />
          <option name="name" value="S20 Plus 5G" />
          <option name="screenDensity" value="600" />
          <option name="screenX" value="1440" />
          <option name="screenY" value="3200" />
        </PersistentDeviceSelectionData>
      </list>
    </option>
  </component>
</project>
</file>

<file path="android/app/.gitignore">
/build/*
!/build/.npmkeep
</file>

<file path="android/app/capacitor.build.gradle">
// DO NOT EDIT THIS FILE! IT IS GENERATED EACH TIME "capacitor update" IS RUN

android {
  compileOptions {
      sourceCompatibility JavaVersion.VERSION_21
      targetCompatibility JavaVersion.VERSION_21
  }
}

apply from: "../capacitor-cordova-android-plugins/cordova.variables.gradle"
dependencies {


}


if (hasProperty('postBuildExtras')) {
  postBuildExtras()
}
</file>

<file path="android/app/proguard-rules.pro">
# Add project specific ProGuard rules here.
# You can control the set of applied configuration files using the
# proguardFiles setting in build.gradle.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# Uncomment this to preserve the line number information for
# debugging stack traces.
#-keepattributes SourceFile,LineNumberTable

# If you keep the line number information, uncomment this to
# hide the original source file name.
#-renamesourcefileattribute SourceFile
</file>

<file path="android/app/src/androidTest/java/com/getcapacitor/myapp/ExampleInstrumentedTest.java">
package com.getcapacitor.myapp;

import static org.junit.Assert.*;

import android.content.Context;
import androidx.test.ext.junit.runners.AndroidJUnit4;
import androidx.test.platform.app.InstrumentationRegistry;
import org.junit.Test;
import org.junit.runner.RunWith;

/**
 * Instrumented test, which will execute on an Android device.
 *
 * @see <a href="http://d.android.com/tools/testing">Testing documentation</a>
 */
@RunWith(AndroidJUnit4.class)
public class ExampleInstrumentedTest {

    @Test
    public void useAppContext() throws Exception {
        // Context of the app under test.
        Context appContext = InstrumentationRegistry.getInstrumentation().getTargetContext();

        assertEquals("com.getcapacitor.app", appContext.getPackageName());
    }
}
</file>

<file path="android/app/src/main/res/drawable-v24/ic_launcher_foreground.xml">
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportHeight="108"
    android:viewportWidth="108">
    <path
        android:fillType="evenOdd"
        android:pathData="M32,64C32,64 38.39,52.99 44.13,50.95C51.37,48.37 70.14,49.57 70.14,49.57L108.26,87.69L108,109.01L75.97,107.97L32,64Z"
        android:strokeColor="#00000000"
        android:strokeWidth="1">
        <aapt:attr name="android:fillColor">
            <gradient
                android:endX="78.5885"
                android:endY="90.9159"
                android:startX="48.7653"
                android:startY="61.0927"
                android:type="linear">
                <item
                    android:color="#44000000"
                    android:offset="0.0" />
                <item
                    android:color="#00000000"
                    android:offset="1.0" />
            </gradient>
        </aapt:attr>
    </path>
    <path
        android:fillColor="#FFFFFF"
        android:fillType="nonZero"
        android:pathData="M66.94,46.02L66.94,46.02C72.44,50.07 76,56.61 76,64L32,64C32,56.61 35.56,50.11 40.98,46.06L36.18,41.19C35.45,40.45 35.45,39.3 36.18,38.56C36.91,37.81 38.05,37.81 38.78,38.56L44.25,44.05C47.18,42.57 50.48,41.71 54,41.71C57.48,41.71 60.78,42.57 63.68,44.05L69.11,38.56C69.84,37.81 70.98,37.81 71.71,38.56C72.44,39.3 72.44,40.45 71.71,41.19L66.94,46.02ZM62.94,56.92C64.08,56.92 65,56.01 65,54.88C65,53.76 64.08,52.85 62.94,52.85C61.8,52.85 60.88,53.76 60.88,54.88C60.88,56.01 61.8,56.92 62.94,56.92ZM45.06,56.92C46.2,56.92 47.13,56.01 47.13,54.88C47.13,53.76 46.2,52.85 45.06,52.85C43.92,52.85 43,53.76 43,54.88C43,56.01 43.92,56.92 45.06,56.92Z"
        android:strokeColor="#00000000"
        android:strokeWidth="1" />
</vector>
</file>

<file path="android/app/src/main/res/layout/activity_main.xml">
<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <WebView
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</androidx.coordinatorlayout.widget.CoordinatorLayout>
</file>

<file path="android/app/src/main/res/values/ic_launcher_background.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="ic_launcher_background">#FFFFFF</color>
</resources>
</file>

<file path="android/app/src/main/res/values/strings.xml">
<?xml version='1.0' encoding='utf-8'?>
<resources>
    <string name="app_name">RipeSense</string>
    <string name="title_activity_main">RipeSense</string>
    <string name="package_name">com.ripesense.app</string>
    <string name="custom_url_scheme">com.ripesense.app</string>
</resources>
</file>

<file path="android/app/src/main/res/values/styles.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
    </style>

    <style name="AppTheme.NoActionBar" parent="Theme.AppCompat.DayNight.NoActionBar">
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
        <item name="android:background">@null</item>
    </style>


    <style name="AppTheme.NoActionBarLaunch" parent="Theme.SplashScreen">
        <item name="android:background">@drawable/splash</item>
    </style>
</resources>
</file>

<file path="android/app/src/main/res/xml/file_paths.xml">
<?xml version="1.0" encoding="utf-8"?>
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <external-path name="my_images" path="." />
    <cache-path name="my_cache_images" path="." />
</paths>
</file>

<file path="android/app/src/test/java/com/getcapacitor/myapp/ExampleUnitTest.java">
package com.getcapacitor.myapp;

import static org.junit.Assert.*;

import org.junit.Test;

/**
 * Example local unit test, which will execute on the development machine (host).
 *
 * @see <a href="http://d.android.com/tools/testing">Testing documentation</a>
 */
public class ExampleUnitTest {

    @Test
    public void addition_isCorrect() throws Exception {
        assertEquals(4, 2 + 2);
    }
}
</file>

<file path="android/capacitor.settings.gradle">
// DO NOT EDIT THIS FILE! IT IS GENERATED EACH TIME "capacitor update" IS RUN
include ':capacitor-android'
project(':capacitor-android').projectDir = new File('../node_modules/@capacitor/android/capacitor')
</file>

<file path="android/gradle.properties">
# Project-wide Gradle settings.

# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.

# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html

# Specifies the JVM arguments used for the daemon process.
# The setting is particularly useful for tweaking memory settings.
org.gradle.jvmargs=-Xmx1536m

# When configured, Gradle will run in incubating parallel mode.
# This option should only be used with decoupled projects. More details, visit
# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects
# org.gradle.parallel=true

# AndroidX package structure to make it clearer which packages are bundled with the
# Android operating system, and which are packaged with your app's APK
# https://developer.android.com/topic/libraries/support-library/androidx-rn
android.useAndroidX=true
</file>

<file path="android/gradlew">
#!/bin/sh

#
# Copyright © 2015-2021 the original authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# SPDX-License-Identifier: Apache-2.0
#

##############################################################################
#
#   Gradle start up script for POSIX generated by Gradle.
#
#   Important for running:
#
#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is
#       noncompliant, but you have some other compliant shell such as ksh or
#       bash, then to run this script, type that shell name before the whole
#       command line, like:
#
#           ksh Gradle
#
#       Busybox and similar reduced shells will NOT work, because this script
#       requires all of these POSIX shell features:
#         * functions;
#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,
#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;
#         * compound commands having a testable exit status, especially «case»;
#         * various built-in commands including «command», «set», and «ulimit».
#
#   Important for patching:
#
#   (2) This script targets any POSIX shell, so it avoids extensions provided
#       by Bash, Ksh, etc; in particular arrays are avoided.
#
#       The "traditional" practice of packing multiple parameters into a
#       space-separated string is a well documented source of bugs and security
#       problems, so this is (mostly) avoided, by progressively accumulating
#       options in "$@", and eventually passing that to Java.
#
#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,
#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;
#       see the in-line comments for details.
#
#       There are tweaks for specific operating systems such as AIX, CygWin,
#       Darwin, MinGW, and NonStop.
#
#   (3) This script is generated from the Groovy template
#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt
#       within the Gradle project.
#
#       You can find Gradle at https://github.com/gradle/gradle/.
#
##############################################################################

# Attempt to set APP_HOME

# Resolve links: $0 may be a link
app_path=$0

# Need this for daisy-chained symlinks.
while
    APP_HOME=${app_path%"${app_path##*/}"}  # leaves a trailing /; empty if no leading path
    [ -h "$app_path" ]
do
    ls=$( ls -ld "$app_path" )
    link=${ls#*' -> '}
    case $link in             #(
      /*)   app_path=$link ;; #(
      *)    app_path=$APP_HOME$link ;;
    esac
done

# This is normally unused
# shellcheck disable=SC2034
APP_BASE_NAME=${0##*/}
# Discard cd standard output in case $CDPATH is set (https://github.com/gradle/gradle/issues/25036)
APP_HOME=$( cd -P "${APP_HOME:-./}" > /dev/null && printf '%s\n' "$PWD" ) || exit

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD=maximum

warn () {
    echo "$*"
} >&2

die () {
    echo
    echo "$*"
    echo
    exit 1
} >&2

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "$( uname )" in                #(
  CYGWIN* )         cygwin=true  ;; #(
  Darwin* )         darwin=true  ;; #(
  MSYS* | MINGW* )  msys=true    ;; #(
  NONSTOP* )        nonstop=true ;;
esac

CLASSPATH="\\\"\\\""


# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD=$JAVA_HOME/jre/sh/java
    else
        JAVACMD=$JAVA_HOME/bin/java
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD=java
    if ! command -v java >/dev/null 2>&1
    then
        die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
fi

# Increase the maximum file descriptors if we can.
if ! "$cygwin" && ! "$darwin" && ! "$nonstop" ; then
    case $MAX_FD in #(
      max*)
        # In POSIX sh, ulimit -H is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        MAX_FD=$( ulimit -H -n ) ||
            warn "Could not query maximum file descriptor limit"
    esac
    case $MAX_FD in  #(
      '' | soft) :;; #(
      *)
        # In POSIX sh, ulimit -n is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        ulimit -n "$MAX_FD" ||
            warn "Could not set maximum file descriptor limit to $MAX_FD"
    esac
fi

# Collect all arguments for the java command, stacking in reverse order:
#   * args from the command line
#   * the main class name
#   * -classpath
#   * -D...appname settings
#   * --module-path (only if needed)
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.

# For Cygwin or MSYS, switch paths to Windows format before running java
if "$cygwin" || "$msys" ; then
    APP_HOME=$( cygpath --path --mixed "$APP_HOME" )
    CLASSPATH=$( cygpath --path --mixed "$CLASSPATH" )

    JAVACMD=$( cygpath --unix "$JAVACMD" )

    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    for arg do
        if
            case $arg in                                #(
              -*)   false ;;                            # don't mess with options #(
              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath
                    [ -e "$t" ] ;;                      #(
              *)    false ;;
            esac
        then
            arg=$( cygpath --path --ignore --mixed "$arg" )
        fi
        # Roll the args list around exactly as many times as the number of
        # args, so each arg winds up back in the position where it started, but
        # possibly modified.
        #
        # NB: a `for` loop captures its iteration list before it begins, so
        # changing the positional parameters here affects neither the number of
        # iterations, nor the values presented in `arg`.
        shift                   # remove old arg
        set -- "$@" "$arg"      # push replacement arg
    done
fi


# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Collect all arguments for the java command:
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and optsEnvironmentVar are not allowed to contain shell fragments,
#     and any embedded shellness will be escaped.
#   * For example: A user cannot expect ${Hostname} to be expanded, as it is an environment variable and will be
#     treated as '${Hostname}' itself on the command line.

set -- \
        "-Dorg.gradle.appname=$APP_BASE_NAME" \
        -classpath "$CLASSPATH" \
        -jar "$APP_HOME/gradle/wrapper/gradle-wrapper.jar" \
        "$@"

# Stop when "xargs" is not available.
if ! command -v xargs >/dev/null 2>&1
then
    die "xargs is not available"
fi

# Use "xargs" to parse quoted args.
#
# With -n1 it outputs one arg per line, with the quotes and backslashes removed.
#
# In Bash we could simply go:
#
#   readarray ARGS < <( xargs -n1 <<<"$var" ) &&
#   set -- "${ARGS[@]}" "$@"
#
# but POSIX shell has neither arrays nor command substitution, so instead we
# post-process each arg (as a line of input to sed) to backslash-escape any
# character that might be a shell metacharacter, then use eval to reverse
# that process (while maintaining the separation between arguments), and wrap
# the whole thing up as a single "set" statement.
#
# This will of course break if any of these variables contains a newline or
# an unmatched quote.
#

eval "set -- $(
        printf '%s\n' "$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS" |
        xargs -n1 |
        sed ' s~[^-[:alnum:]+,./:=@_]~\\&~g; ' |
        tr '\n' ' '
    )" '"$@"'

exec "$JAVACMD" "$@"
</file>

<file path="android/gradlew.bat">
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem
@rem SPDX-License-Identifier: Apache-2.0
@rem

@if "%DEBUG%"=="" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%"=="" set DIRNAME=.
@rem This is normally unused
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if %ERRORLEVEL% equ 0 goto execute

echo. 1>&2
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2
echo. 1>&2
echo Please set the JAVA_HOME variable in your environment to match the 1>&2
echo location of your Java installation. 1>&2

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo. 1>&2
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2
echo. 1>&2
echo Please set the JAVA_HOME variable in your environment to match the 1>&2
echo location of your Java installation. 1>&2

goto fail

:execute
@rem Setup the command line

set CLASSPATH=


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" -jar "%APP_HOME%\gradle\wrapper\gradle-wrapper.jar" %*

:end
@rem End local scope for the variables with windows NT shell
if %ERRORLEVEL% equ 0 goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
set EXIT_CODE=%ERRORLEVEL%
if %EXIT_CODE% equ 0 set EXIT_CODE=1
if not ""=="%GRADLE_EXIT_CONSOLE%" exit %EXIT_CODE%
exit /b %EXIT_CODE%

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega
</file>

<file path="android/settings.gradle">
include ':app'
include ':capacitor-cordova-android-plugins'
project(':capacitor-cordova-android-plugins').projectDir = new File('./capacitor-cordova-android-plugins/')

apply from: 'capacitor.settings.gradle'
</file>

<file path="Aptfile">
libgl1
libglib2.0-0
</file>

<file path="capacitor.config.ts">
import type { CapacitorConfig } from '@capacitor/cli';

const config: CapacitorConfig = {
  "appId": "com.ripesense.app",
  "appName": "RipeSense",
  "webDir": "static",
  "server": {
    "url": "https://ripesense-production.up.railway.app",
    "cleartext": true
  },
  "android": {
    "allowMixedContent": true
  }
};

export default config;
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2024 Ashish Tukaral

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="Procfile">
web: gunicorn app:app --workers 1 --threads 8 --timeout 0
</file>

<file path="render.yaml">
services:
  - type: web
    name: ripesense
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn app:app
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.0
</file>

<file path="runtime.txt">
python-3.10.13
</file>

<file path="scripts/batch_test.py">
import os
import requests

# 🛠️ CONFIGURATION
BASE_URL = 'http://127.0.0.1:5000/detect_ripeness'
TEST_IMAGES_DIR = 'C:\\Users\\carro\\Downloads\\for testing purposes' # <--- CHANGE THIS PATH!

def run_batch_test():
    if not os.path.exists(TEST_IMAGES_DIR):
        print(f"❌ Error: Folder not found: {TEST_IMAGES_DIR}")
        return

    files = [f for f in os.listdir(TEST_IMAGES_DIR) if f.lower().endswith(('.png', '.jpg', '.jpeg'))]
    print(f"🚀 Found {len(files)} images. Starting batch test...\n")

    for i, filename in enumerate(files):
        filepath = os.path.join(TEST_IMAGES_DIR, filename)
        
        try:
            with open(filepath, 'rb') as img:
                # Send the POST request just like the browser does
                print(f"[{i+1}/{len(files)}] Uploading {filename}...", end=" ")
                response = requests.post(BASE_URL, files={'file': img})
                
                # Check if the server accepted it (200 OK)
                if response.status_code == 200:
                    print("✅ Success!")
                else:
                    print(f"❌ Failed (Status: {response.status_code})")
                    
        except Exception as e:
            print(f"⚠️ Error sending file: {e}")

    print("\n🏁 Batch test complete! Check your terminal logs for the detailed AI breakdown.")

if __name__ == "__main__":
    run_batch_test()
</file>

<file path="scripts/convert_pt.py">
from ultralytics import YOLO

# Load your custom model
model = YOLO('models/best.pt')

# Export to ONNX format (much lighter for CPU)
model.export(format='onnx', imgsz=320, half=True)

# Do the same for your gatekeeper
gatekeeper = YOLO('models/yolov8n-cls.pt')
gatekeeper.export(format='onnx', imgsz=320, half=True)
</file>

<file path="scripts/evaluation/calibrate_hsv.py">
import os
import cv2
import numpy as np

TEST_ROOT = 'test_dataset'

print(f"{'FOLDER':<25} | {'COUNT':<5} | {'AVG HUE':<10} | {'SUGGESTED RANGE'}")
print("-" * 75)

for folder_name in sorted(os.listdir(TEST_ROOT)):
    folder_path = os.path.join(TEST_ROOT, folder_name)
    if not os.path.isdir(folder_path): continue
    
    hues = []
    for filename in os.listdir(folder_path):
        filepath = os.path.join(folder_path, filename)
        img = cv2.imread(filepath)
        if img is None: continue
        
        # Convert to HSV and get Median Hue
        hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
        # Crop center 100px
        h, w, _ = img.shape
        cy, cx = h//2, w//2
        crop = hsv[max(0, cy-50):min(h, cy+50), max(0, cx-50):min(w, cx+50)]
        
        if crop.size > 0:
            hues.append(np.median(crop[:,:,0]))

    if hues:
        avg_hue = np.mean(hues)
        min_hue = np.min(hues)
        max_hue = np.max(hues)
        print(f"{folder_name:<25} | {len(hues):<5} | {avg_hue:.1f}       | {min_hue:.0f} - {max_hue:.0f}")
</file>

<file path="scripts/evaluation/compare.py">
import hashlib

def get_file_hash(file_path):
    try:
        with open(file_path, "rb") as f:
            return hashlib.md5(f.read()).hexdigest()
    except FileNotFoundError:
        return "File not found!"

# --- UPDATE THESE PATHS ---
# Make sure these match your actual folder names!
old_file = "weights_1/best.pt"   # The old file
new_file = "weights_new/best.pt" # The new file you just downloaded

hash1 = get_file_hash(old_file)
hash2 = get_file_hash(new_file)

print(f"Old File Hash: {hash1}")
print(f"New File Hash: {hash2}")

if hash1 == hash2:
    print(">>> MATCH: These are the EXACT same file. You are using the old model.")
else:
    print(">>> DIFFERENT: These are different files. Your new model is active.")
</file>

<file path="scripts/evaluation/evaluate_metrics.py">
import os
import cv2
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.metrics import accuracy_score, precision_recall_fscore_support, confusion_matrix
from ultralytics import YOLO

# ==========================================
# 1. CONFIGURATION
# ==========================================
TEST_ROOT = 'test_dataset'  # The folder containing your subfolders
MODEL_PATH = 'weights_new/best.pt' # Path to your custom model (if it exists)

# ==========================================
# 2. LOAD AI MODEL (DEBUG VERSION)
# ==========================================
print(f"🔄 Loading AI Model...")

# ⚠️ FORCE the path to your best weights
# Make sure this path is exactly where your .pt file is!
MODEL_PATH = 'weights_new/best.pt' 

if os.path.exists(MODEL_PATH):
    print(f"   ✅ SUCCESS: Found custom weights at {MODEL_PATH}")
    model = YOLO(MODEL_PATH)
else:
    print(f"   ❌ ERROR: Could not find {MODEL_PATH}!")
    print(f"   ⚠️ Falling back to generic YOLO (This causes LOW ACCURACY!)")
    model = YOLO('yolov8n.pt') 

# Print the classes the model actually knows
print("   🧠 Model Knowledge Check:")
print(f"      The model knows {len(model.names)} classes.")
print(f"      First 5 classes: {list(model.names.values())[:5]}")

# ==========================================
# 3. RIPENESS ALGORITHM (Replicating app.py)
# ==========================================
def analyze_ripeness_algorithm(image_cv2, fruit_type):
    hsv = cv2.cvtColor(image_cv2, cv2.COLOR_BGR2HSV)
    height, width, _ = image_cv2.shape
    
    # Crop center 100px (Matches your calibration script)
    center_y, center_x = height // 2, width // 2
    y1, y2 = max(0, center_y - 100), min(height, center_y + 100)
    x1, x2 = max(0, center_x - 100), min(width, center_x + 100)
    crop = hsv[y1:y2, x1:x2]
    
    if crop.size == 0: return "unknown"
    avg_hue = np.mean(crop[:,:,0])
    
    # ---------------------------------------------------------
    # 🔴 RED FRUITS (Tomato) - Based on your data
    # ---------------------------------------------------------
    # Ripe Avg: 8.1
    # Overripe Avg: 20.2
    # Unripe Avg: 36.6
    
    RED_FRUITS = ['tomato', 'apple', 'strawberry', 'pomegranate', 'raspberry']
    is_red = any(f in fruit_type.lower() for f in RED_FRUITS)

    if is_red:
        if avg_hue < 15:
            return "ripe"       # Range roughly 0-15 (Targeting 8.1)
        elif 15 <= avg_hue < 28:
            return "overripe"   # Range roughly 15-28 (Targeting 20.2)
        else:
            return "unripe"     # Range > 28 (Targeting 36.6)

    # ---------------------------------------------------------
    # 🟡 YELLOW FRUITS (Banana, Mango) - Based on your data
    # ---------------------------------------------------------
    # Overripe Avg: ~18 (Mango 16.7, Banana 20.9)
    # Ripe Avg:     ~24 (Mango 23.4, Banana 25.2)
    # Unripe Avg:   ~42 (Mango 48.0, Banana 36.5)

    else:
        if avg_hue < 22:
            return "overripe"   # Range < 22 (Targeting ~18)
        elif 22 <= avg_hue < 30:
            return "ripe"       # Range 22-30 (Targeting ~24)
        else:
            return "unripe"     # Range > 30 (Targeting ~42)

# ==========================================
# 4. MAIN EVALUATION LOOP
# ==========================================
y_true = []
y_pred = []

print(f"\n🚀 Starting Evaluation on images in '{TEST_ROOT}'...\n")

if not os.path.exists(TEST_ROOT):
    print(f"❌ ERROR: Folder '{TEST_ROOT}' not found! Please create it and add subfolders.")
    exit()

# Iterate through every folder (e.g., 'ripe_banana', 'unripe_tomato')
for folder_name in os.listdir(TEST_ROOT):
    folder_path = os.path.join(TEST_ROOT, folder_name)
    
    # Only process directories
    if os.path.isdir(folder_path):
        # 1. Determine the "Correct Answer" from the folder name
        # We replace underscores with spaces: "ripe_banana" -> "ripe banana"
        actual_label = folder_name.replace('_', ' ').lower()
        
        print(f"📂 Processing folder: {folder_name}...")

        # Process each image in the folder
        for filename in os.listdir(folder_path):
            if filename.lower().endswith(('.png', '.jpg', '.jpeg', '.webp')):
                filepath = os.path.join(folder_path, filename)
                img = cv2.imread(filepath)
                
                if img is None:
                    print(f"   ⚠️ Could not read {filename}, skipping.")
                    continue

                # ---------------------------------------------------------
                # STEP A: DETECT FRUIT TYPE (YOLO)
                # ---------------------------------------------------------
                results = model(img, verbose=False)
                detected_fruit = "unknown"
                
                # Check if YOLO detected anything
                if results[0].boxes:
                    # Get the detection with the highest confidence
                    top_box = sorted(results[0].boxes, key=lambda x: x.conf[0], reverse=True)[0]
                    cls_id = int(top_box.cls[0])
                    detected_fruit = results[0].names[cls_id].lower()
                
                # ---------------------------------------------------------
                # STEP B: RIPENESS-ONLY EVALUATION (The Fix)
                # ---------------------------------------------------------
                # Since standard YOLO doesn't know Mango/Tomato, we assume 
                # the folder name tells us the correct fruit type.
                # We only test if your COLOR ALGORITHM gets the ripeness right.
                
                # 1. Get the "Correct" fruit type from the folder name
                # (e.g. folder "ripe_mango" -> fruit is "mango")
                true_fruit_type = actual_label.split()[-1] 
                
                # 2. Force the system to analyze it AS that fruit
                pred_ripeness = analyze_ripeness_algorithm(img, true_fruit_type)
                
                # 3. Build the label using the TRUE fruit type but PREDICTED ripeness
                pred_label = f"{pred_ripeness} {true_fruit_type}"
                
                # ---------------------------------------------------------
                # STEP C: SAVE RESULTS
                # ---------------------------------------------------------
                y_true.append(actual_label)
                y_pred.append(pred_label)

# ==========================================
# 5. CALCULATE METRICS & GENERATE REPORT
# ==========================================
print("\n" + "="*40)
print(f"📊 FINAL RESULTS ({len(y_true)} images tested)")
print("="*40)

if len(y_true) == 0:
    print("❌ No images found! Check your folder structure.")
else:
    # Calculate Standard Metrics
    accuracy = accuracy_score(y_true, y_pred)
    precision, recall, f1, _ = precision_recall_fscore_support(y_true, y_pred, average='weighted', zero_division=0)

    # Print to Console (Copy this for your report text)
    print(f"✅ Accuracy:  {accuracy*100:.2f}%")
    print(f"🎯 Precision: {precision*100:.2f}%")
    print(f"🔎 Recall:    {recall*100:.2f}%")
    print(f"⚖️ F1-Score:  {f1*100:.2f}%")

    # Generate Confusion Matrix (The Graph)
    # Get all unique labels involved (True + Predicted) and sort them
    labels = sorted(list(set(y_true + y_pred)))
    
    cm = confusion_matrix(y_true, y_pred, labels=labels)

    plt.figure(figsize=(12, 10))
    sns.heatmap(cm, annot=True, fmt='d', cmap='Blues', xticklabels=labels, yticklabels=labels)
    plt.xlabel('Predicted Label')
    plt.ylabel('True Label')
    plt.title('Confusion Matrix - RipeSense Evaluation')
    plt.xticks(rotation=45)
    plt.tight_layout()
    
    # Save the graph
    save_path = 'confusion_matrix_result.png'
    plt.savefig(save_path)
    print(f"\n📈 Confusion Matrix saved as '{save_path}'")
    print("   (Copy this image into your Results chapter!)")
</file>

<file path="scripts/evaluation/evaluate_model_only.py">
import os
import cv2
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.metrics import accuracy_score, precision_recall_fscore_support, confusion_matrix
from ultralytics import YOLO

# ==========================================
# 1. CONFIGURATION
# ==========================================
TEST_ROOT = 'test_dataset'
MODEL_PATH = 'weights_new/best.pt' 

# ==========================================
# 2. LOAD MODEL
# ==========================================
print(f"🚀 Loading Custom Model from {MODEL_PATH}...")
try:
    model = YOLO(MODEL_PATH)
except Exception as e:
    print(f"❌ Error: {e}")
    exit()

y_true = []
y_pred = []

print(f"\n📊 Starting PURE AI Evaluation (Trusting the Neural Network)...")

# ==========================================
# 3. EVALUATION LOOP
# ==========================================
if not os.path.exists(TEST_ROOT):
    print(f"❌ Error: Folder '{TEST_ROOT}' not found.")
    exit()

for folder_name in os.listdir(TEST_ROOT):
    folder_path = os.path.join(TEST_ROOT, folder_name)
    
    if os.path.isdir(folder_path):
        # The folder name is the TRUTH (e.g., "ripe_banana")
        # We normalize it: "ripe_banana" -> "ripe banana"
        actual_label = folder_name.replace('_', ' ').lower().strip()
        
        print(f"   📂 Testing folder: {folder_name}...")

        for filename in os.listdir(folder_path):
            if filename.lower().endswith(('.png', '.jpg', '.jpeg', '.webp')):
                filepath = os.path.join(folder_path, filename)
                
                # Run YOLO Inference
                # verbose=False keeps the console clean
                results = model(filepath, verbose=False)
                
                # Get the prediction
                if results[0].probs:
                    # If it's a Classification model (yolov8-cls)
                    top1 = results[0].probs.top1
                    predicted_label = results[0].names[top1]
                elif results[0].boxes:
                    # If it's a Detection model (yolov8n)
                    # We take the box with highest confidence
                    best_box = max(results[0].boxes, key=lambda x: x.conf[0])
                    cls_id = int(best_box.cls[0])
                    predicted_label = results[0].names[cls_id]
                else:
                    # AI didn't see anything
                    predicted_label = "unknown"

                # Normalize prediction to match folder style
                predicted_label = predicted_label.replace('_', ' ').lower().strip()

                # Store results
                y_true.append(actual_label)
                y_pred.append(predicted_label)

# ==========================================
# 4. CALCULATE & PRINT RESULTS
# ==========================================
if len(y_true) > 0:
    accuracy = accuracy_score(y_true, y_pred)
    precision, recall, f1, _ = precision_recall_fscore_support(y_true, y_pred, average='weighted', zero_division=0)

    print("\n" + "="*40)
    print(f"🏆 FINAL AI METRICS")
    print("="*40)
    print(f"✅ Accuracy:  {accuracy*100:.2f}%")
    print(f"🎯 Precision: {precision*100:.2f}%")
    print(f"🔎 Recall:    {recall*100:.2f}%")
    print(f"⚖️ F1-Score:  {f1*100:.2f}%")
    print("="*40)
    
    # Generate Confusion Matrix Graph
    labels = sorted(list(set(y_true + y_pred)))
    cm = confusion_matrix(y_true, y_pred, labels=labels)

    plt.figure(figsize=(10, 8))
    sns.heatmap(cm, annot=True, fmt='d', cmap='Blues', xticklabels=labels, yticklabels=labels)
    plt.xlabel('Predicted by AI')
    plt.ylabel('Actual Folder')
    plt.title('YOLOv8 Confusion Matrix')
    plt.tight_layout()
    plt.savefig('static/images/confusion_matrix_result.png') # Saving directly to static!
    print(f"📈 Graph saved to static/images/confusion_matrix_result.png")

else:
    print("❌ No images found to test!")
</file>

<file path="scripts/evaluation/evaluation_metrics.py">
import os
import cv2
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.metrics import accuracy_score, precision_recall_fscore_support, confusion_matrix

# --- CONFIGURATION ---
TEST_ROOT = 'test_dataset'  # Folder containing your 9 sub-folders

# --- RIPENESS ALGORITHM (The "Color Logic" from your App) ---
def analyze_ripeness_algorithm(image_cv2, fruit_type):
    hsv = cv2.cvtColor(image_cv2, cv2.COLOR_BGR2HSV)
    height, width, _ = image_cv2.shape
    
    # Crop center to focus on fruit
    center_y, center_x = height // 2, width // 2
    y1, y2 = max(0, center_y - 50), min(height, center_y + 50)
    x1, x2 = max(0, center_x - 50), min(width, center_x + 50)
    crop = hsv[y1:y2, x1:x2]
    
    if crop.size == 0: return "unknown"
    avg_hue = np.median(crop[:,:,0])
    
    # Logic for RED fruits (Tomato)
    RED_FRUITS = ['tomato', 'apple', 'strawberry']
    is_red = any(f in fruit_type.lower() for f in RED_FRUITS)

    if is_red:
        if avg_hue < 25 or avg_hue > 140: return "ripe"
        elif 35 < avg_hue < 90: return "unripe"
        else: return "overripe"
    # Logic for YELLOW/GREEN fruits (Banana, Mango)
    else:
        if 35 < avg_hue < 90: return "unripe"
        elif 15 <= avg_hue <= 35: return "ripe"
        else: return "overripe"

# --- MAIN EVALUATION LOOP ---
y_true = []
y_pred = []

print(f"🚀 Starting Ripeness-Only Evaluation on '{TEST_ROOT}'...\n")

if not os.path.exists(TEST_ROOT):
    print("❌ Error: test_dataset folder not found.")
    exit()

for folder_name in os.listdir(TEST_ROOT):
    folder_path = os.path.join(TEST_ROOT, folder_name)
    
    if os.path.isdir(folder_path):
        # 1. Get the TRUTH from the folder name
        # Folder: "ripe_mango" -> Label: "ripe mango"
        actual_label = folder_name.replace('_', ' ').lower()
        
        # Extract the fruit type (e.g., "mango")
        true_fruit_type = actual_label.split()[-1] 

        print(f"📂 Testing {actual_label}...")

        for filename in os.listdir(folder_path):
            if filename.lower().endswith(('.png', '.jpg', '.jpeg')):
                filepath = os.path.join(folder_path, filename)
                img = cv2.imread(filepath)
                if img is None: continue

                # 2. THE BYPASS (Unit Test)
                # We skip YOLO. We force the algorithm to run as if it detected the fruit correctly.
                # This measures the performance of your COLOR LOGIC only.
                pred_ripeness = analyze_ripeness_algorithm(img, true_fruit_type)
                pred_label = f"{pred_ripeness} {true_fruit_type}"

                y_true.append(actual_label)
                y_pred.append(pred_label)

# --- RESULTS ---
if len(y_true) > 0:
    accuracy = accuracy_score(y_true, y_pred)
    precision, recall, f1, _ = precision_recall_fscore_support(y_true, y_pred, average='weighted', zero_division=0)

    print("\n" + "="*40)
    print(f"📊 RESULTS (Ripeness Logic Only)")
    print("="*40)
    print(f"✅ Accuracy:  {accuracy*100:.2f}%")
    print(f"⚖️ F1-Score:  {f1*100:.2f}%")
    
    # Save Graph
    labels = sorted(list(set(y_true + y_pred)))
    cm = confusion_matrix(y_true, y_pred, labels=labels)
    plt.figure(figsize=(10, 8))
    sns.heatmap(cm, annot=True, fmt='d', cmap='Greens', xticklabels=labels, yticklabels=labels)
    plt.xlabel('Predicted')
    plt.ylabel('Actual')
    plt.title('Confusion Matrix (Color Algorithm Performance)')
    plt.tight_layout()
    plt.savefig('evaluation_results.png')
    print(f"📈 Graph saved as 'evaluation_results.png'")
else:
    print("❌ No images found.")
</file>

<file path="scripts/make_monster.py">
from PIL import Image
import numpy as np
import os

# 1. Create a massive 5000x5000 image (approx 75MB in RAM when raw)
print(" Concocting a heavy image...")
array = np.random.rand(5000, 5000, 3) * 255
img = Image.fromarray(array.astype('uint8')).convert('RGB')

# 2. Save it
img.save("static/monster_image.jpg")
print(f" 'monster_image.jpg' created! Size: {img.size}")
print(f" File size on disk: {os.path.getsize('static/monster_image.jpg')/1024/1024:.2f} MB")
</file>

<file path="scripts/test_hybrid.py">
import cv2
import numpy as np
from ultralytics import YOLO

# ==========================================
# 1. SETUP
# ==========================================
MODEL_PATH = 'weights_new/best.pt'   # Path to your custom model
TEST_IMAGE_PATH = 'test_dataset/unripe_tomato/ut1.jpg' # <--- CHANGE THIS to your image file

# Load the model
try:
    print(f"🧠 Loading model from {MODEL_PATH}...")
    model = YOLO(MODEL_PATH)
except Exception as e:
    print(f"❌ Error loading model: {e}")
    exit()

# ==========================================
# 2. HELPER: CALCULATE HUE
# ==========================================
def get_average_hue(cropped_img):
    """
    Takes a cropped image of a fruit, converts to HSV, 
    and returns the average Hue value (0-179).
    """
    # Convert to HSV color space (Hue, Saturation, Value)
    hsv_img = cv2.cvtColor(cropped_img, cv2.COLOR_BGR2HSV)
    
    # Extract just the Hue channel (Channel 0)
    hue_channel = hsv_img[:, :, 0]
    
    # Calculate the average (ignoring black pixels if using a mask, but simple mean is fine here)
    avg_hue = np.mean(hue_channel)
    return int(avg_hue)

# ==========================================
# 3. RUN DETECTION
# ==========================================
# Load image
image = cv2.imread(TEST_IMAGE_PATH)
if image is None:
    print(f"❌ Error: Could not find image at {TEST_IMAGE_PATH}")
    exit()

# Run YOLO inference
results = model(image)

# ==========================================
# 4. PROCESS RESULTS
# ==========================================
print(f"\n🔍 Analyzing {TEST_IMAGE_PATH}...")

for result in results:
    boxes = result.boxes
    for box in boxes:
        # --- A. THE FINDER (YOLO) ---
        # Get coordinates
        x1, y1, x2, y2 = map(int, box.xyxy[0])
        
        # Get what YOLO thinks it is
        conf = float(box.conf[0])
        cls_id = int(box.cls[0])
        yolo_label = model.names[cls_id]

        # --- B. THE JUDGE (Hue Calculation) ---
        # 1. Crop the fruit from the image
        fruit_crop = image[y1:y2, x1:x2]
        
        # 2. Calculate average color
        if fruit_crop.size > 0:
            avg_hue = get_average_hue(fruit_crop)
        else:
            avg_hue = 0

        # --- C. DRAW RESULTS ---
        # Draw the box
        cv2.rectangle(image, (x1, y1), (x2, y2), (0, 255, 0), 2)
        
        # Text to display
        text = f"{yolo_label} ({conf:.2f}) | Hue: {avg_hue}"
        
        # Draw text background (for readability)
        cv2.rectangle(image, (x1, y1 - 30), (x1 + 400, y1), (0, 255, 0), -1)
        cv2.putText(image, text, (x1, y1 - 10), cv2.FONT_HERSHEY_SIMPLEX, 0.6, (0, 0, 0), 2)

        print(f" > Found: {yolo_label} | Confidence: {conf:.2f} | Average Hue: {avg_hue}")

# ==========================================
# 5. SHOW OUTPUT
# ==========================================
cv2.imshow("Hybrid Detection Test", image)
print("\nPress any key to close the window...")
cv2.waitKey(0)
cv2.destroyAllWindows()
</file>

<file path="scripts/test_memory_limit.py">
import os
import gc
import psutil
import time
from ultralytics import YOLO
from PIL import Image

# 🛠️ SETUP
MODEL_PATH = "models/best.pt"  # Make sure this path is right
TEST_IMAGE = "C:\\Users\\carro\\Fruit-Ripeness-and-Disease-Detection - Copy (2)\\static\\uploads\\b2.jpg" # ⚠️ Put any real image path here
PROCESS = psutil.Process(os.getpid())

def print_memory(step_name):
    # RSS (Resident Set Size) is the RAM actually used
    mem_mb = PROCESS.memory_info().rss / 1024 / 1024
    print(f"📊 [{step_name}] RAM Usage: {mem_mb:.2f} MB")

def test_lazy_loading():
    print("🚀 Starting Stress Test...")
    print_memory("Baseline (Imports only)")

    # 1. Simulate Loading the Model
    print("\n--- 🧠 LOADING MODEL ---")
    start_time = time.time()
    
    # Load Model
    model = YOLO(MODEL_PATH)
    print_memory("Model Loaded in RAM")
    
    # 2. Simulate Prediction (The heaviest part)
    print("\n--- ⚡ RUNNING PREDICTION (imgsz=320) ---")
    if os.path.exists(TEST_IMAGE):
        # We perform a real prediction to spike the memory
        results = model(TEST_IMAGE, imgsz=320, verbose=False)
        print_memory("During Prediction (Peak)")
    else:
        print(f"⚠️ Warning: {TEST_IMAGE} not found. Using dummy input.")
    
    # 3. The Cleanup (The most important part!)
    print("\n--- 🧹 CLEANUP PHASE ---")
    del model
    gc.collect() # Force Garbage Collection
    
    print_memory("After gc.collect()")
    
    print(f"\n✅ Test Complete in {time.time() - start_time:.2f} seconds.")

if __name__ == "__main__":
    test_lazy_loading()
</file>

<file path="scripts/test_safety.py">
from PIL import Image
import numpy as np
import cv2
import psutil
import os

PROCESS = psutil.Process(os.getpid())
IMAGE_PATH = "static/monster_image.jpg"

def get_ram():
    return PROCESS.memory_info().rss / 1024 / 1024

print(f"[BASELINE] RAM: {get_ram():.2f} MB")

# --- 1. SIMULATE UPLOAD ---
print(f"\n[OPENING] {IMAGE_PATH}...")
try:
    # Load the monster
    img_pil = Image.open(IMAGE_PATH).convert("RGB")
    print(f"   Original Size: {img_pil.width}x{img_pil.height}")
    print(f"   RAM after load: {get_ram():.2f} MB")

    # --- 2. RUN YOUR NEW SAFETY CODE ---
    print("\n[SAFETY] Running Safety Check...")
    
    if img_pil.width > 1024 or img_pil.height > 1024:
        print("   [WARNING] Image is too big! Resizing...")
        img_pil.thumbnail((1024, 1024)) # <--- THE FIX
        print(f"   [OK] New Size: {img_pil.width}x{img_pil.height}")
    else:
        print("   [OK] Image size is okay.")

    # --- 3. CONVERT TO OPENCV (The Dangerous Part) ---
    # If the resize worked, this RAM spike should be small.
    # If the resize failed, this will spike RAM by ~100MB+.
    
    print("\n[DANGER] Converting to OpenCV (The Danger Zone)...")
    img_cv2 = cv2.cvtColor(np.array(img_pil), cv2.COLOR_RGB2BGR)
    
    current_ram = get_ram()
    print(f"[FINAL] RAM Usage: {current_ram:.2f} MB")

    if current_ram < 500:
        print("\n[SUCCESS] RAM stayed low. Safe to deploy!")
    else:
        print("\n[ERROR] RAM spiked too high. Do not deploy.")

except Exception as e:
    print(f"[EXCEPTION] Error: {e}")
</file>

<file path="scripts/webapp.py">
import streamlit as st
import cv2
import numpy as np
from PIL import Image
from ultralytics import YOLO
import tempfile
import os

# ==========================================
# 1. CONFIG & SETUP
# ==========================================
st.set_page_config(page_title="RipeSense Tester", page_icon="🍌")

# --- CUSTOM CSS FOR "FYP" LOOK ---
st.markdown("""
    <style>
        .main {
            background-color: #f5f5f5;
        }
        .stMetric {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }
    </style>
""", unsafe_allow_html=True)

# ==========================================
# 2. FUNCTIONS
# ==========================================

@st.cache_resource
def load_model():
    """Loads the model once and keeps it in memory (speeds up the app)"""
    # ⚠️ MAKE SURE THIS PATH IS CORRECT
    model_path = 'weights_new/best.pt' 
    return YOLO(model_path)

def get_average_hue(cropped_img):
    """Calculates the average hue of the fruit crop"""
    if cropped_img.size == 0:
        return 0
    # Convert to HSV
    hsv_img = cv2.cvtColor(cropped_img, cv2.COLOR_BGR2HSV)
    # Extract Hue channel (0)
    hue_channel = hsv_img[:, :, 0]
    return int(np.mean(hue_channel))

def process_image(uploaded_file, model, conf_threshold):
    # Convert the file to an OpenCV image
    file_bytes = np.asarray(bytearray(uploaded_file.read()), dtype=np.uint8)
    image = cv2.imdecode(file_bytes, 1)
    
    # Run YOLO
    results = model(image, conf=conf_threshold)
    
    # Prepare data storage
    detections = []
    
    # Draw boxes
    for result in results:
        for box in result.boxes:
            # Get coordinates
            x1, y1, x2, y2 = map(int, box.xyxy[0])
            conf = float(box.conf[0])
            cls_id = int(box.cls[0])
            label = model.names[cls_id]
            
            # Get Hue
            crop = image[y1:y2, x1:x2]
            avg_hue = get_average_hue(crop)
            
            # Store data
            detections.append({
                "Label": label,
                "Confidence": f"{conf:.2%}",
                "Hue Value": avg_hue,
                "Status": "Ripe" if avg_hue < 40 else "Unripe/Green" # Simple logic example
            })

            # Draw on image (Green Box)
            cv2.rectangle(image, (x1, y1), (x2, y2), (0, 255, 0), 3)
            
            # Draw Label Background
            cv2.rectangle(image, (x1, y1-35), (x1+250, y1), (0, 255, 0), -1)
            cv2.putText(image, f"{label} {conf:.2f} | Hue: {avg_hue}", 
                        (x1, y1-10), cv2.FONT_HERSHEY_SIMPLEX, 0.6, (0, 0, 0), 2)

    # Convert BGR (OpenCV) to RGB (Streamlit)
    image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
    return image, detections

# ==========================================
# 3. APP LAYOUT
# ==========================================
st.title("🍌 RipeSense: Model & Logic Tester")
st.write("Upload an image to test the Hybrid Logic (AI + Color Algorithm).")

# Sidebar settings
st.sidebar.header("⚙️ Settings")
conf_threshold = st.sidebar.slider("Confidence Threshold", 0.0, 1.0, 0.25, 0.05)

# Load Model
try:
    model = load_model()
    st.sidebar.success("✅ Model Loaded Successfully!")
except Exception as e:
    st.error(f"❌ Could not load model: {e}")
    st.stop()

# File Uploader
uploaded_file = st.file_uploader("Choose a fruit image...", type=["jpg", "png", "jpeg"])

if uploaded_file is not None:
    # Process
    with st.spinner('Analyzing...'):
        processed_image, data = process_image(uploaded_file, model, conf_threshold)
    
    # Show Results
    st.image(processed_image, caption='Processed Image', use_container_width=True)
    
    if data:
        st.subheader("📊 Detection Stats")
        
        # Display as a nice table
        st.table(data)
        
        # Display Metrics for the first fruit found
        col1, col2, col3 = st.columns(3)
        col1.metric("First Detection", data[0]['Label'])
        col2.metric("Confidence", data[0]['Confidence'])
        col3.metric("Hue Value", f"{data[0]['Hue Value']}°")
        
    else:
        st.warning("⚠️ No fruit detected! Try lowering the Confidence Threshold in the sidebar.")
</file>

<file path="static/js/sw.js">
const CACHE_NAME = 'ripesense-v2';
const ASSETS_TO_CACHE = [
    '/',
    '/ripeness_detection',
    '/fruit_detection',
    '/history',
    '/static/css/style.css',
    '/static/manifest.json',
    '/static/icon.png',
    'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css',
    'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'
];

// Install Event: Cache files
self.addEventListener('install', (event) => {
    event.waitUntil(
        caches.open(CACHE_NAME)
            .then((cache) => {
                return cache.addAll(ASSETS_TO_CACHE);
            })
    );
});

// Fetch Event: Serve from cache if offline
self.addEventListener('fetch', (event) => {
    event.respondWith(
        caches.match(event.request)
            .then((response) => {
                // Return cached version or fetch from network
                return response || fetch(event.request);
            })
    );
});
</file>

<file path="templates/404.html">
{% extends "base.html" %}
{% block title %}Page Not Found - RipeSense{% endblock %}

{% block content %}
<div class="container fade-in-up" style="margin-top: 80px;">
    <div class="row justify-content-center">
        <div class="col-md-6 text-center">
            
            <div class="card border-0 shadow-lg rounded-4 p-5">
                <div class="mb-4">
                    <span class="display-1">🧭</span>
                </div>
                <h1 class="fw-bold text-success mb-3">Oops! Lost in the Orchard?</h1>
                <p class="text-muted lead mb-4">
                    We couldn't find the page you were looking for. It might have been moved, deleted, or never existed.
                </p>
                
                <div class="d-grid gap-3 col-8 mx-auto">
                    <a href="/" class="btn btn-success rounded-pill shadow fw-bold py-2">
                        <i class="fas fa-home me-2"></i>Return Home
                    </a>
                    <a href="/ripeness_detection" class="btn btn-outline-secondary rounded-pill fw-bold py-2">
                        <i class="fas fa-camera me-2"></i>Scan Fruit
                    </a>
                </div>

                <div class="mt-4 text-muted small">
                    Error Code: 404
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}
</file>

<file path="templates/model_stats.html">
{% extends "base.html" %}
{% block title %}Model Performance - RipeSense{% endblock %}

{% block content %}
<div class="container fade-in-up">
    <div class="text-center mb-5">
        <h6 class="text-uppercase text-success fw-bold">System Evaluation</h6>
        <h2 class="fw-bold">Model Performance Metrics</h2>
        <p class="text-muted">Evaluation based on YOLOv8 Classification on the test dataset.</p>
    </div>

    <div class="row g-4 mb-5 justify-content-center">
        <div class="col-6 col-md-3">
            <div class="p-4 bg-white rounded-4 shadow-sm text-center border h-100 d-flex flex-column justify-content-center">
                <h2 class="fw-bold text-success mb-0">{{ metrics.accuracy }}</h2>
                <small class="text-muted text-uppercase fw-bold mt-2">Accuracy</small>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="p-4 bg-white rounded-4 shadow-sm text-center border h-100 d-flex flex-column justify-content-center">
                <h2 class="fw-bold text-primary mb-0">{{ metrics.precision }}</h2>
                <small class="text-muted text-uppercase fw-bold mt-2">Precision</small>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="p-4 bg-white rounded-4 shadow-sm text-center border h-100 d-flex flex-column justify-content-center">
                <h2 class="fw-bold text-warning mb-0">{{ metrics.recall }}</h2>
                <small class="text-muted text-uppercase fw-bold mt-2">Recall</small>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="p-4 bg-white rounded-4 shadow-sm text-center border h-100 d-flex flex-column justify-content-center">
                <h2 class="fw-bold text-info mb-0">{{ metrics.f1_score }}</h2>
                <small class="text-muted text-uppercase fw-bold mt-2">F1-Score</small>
            </div>
        </div>
    </div>

    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
                <div class="card-header bg-success text-white py-3 text-center">
                    <h5 class="mb-0 fw-bold">Confusion Matrix</h5>
                </div>
                <div class="card-body bg-white text-center p-4">
                    <img src="{{ url_for('static', filename='images/confusion_matrix_result.png') }}" 
                         class="img-fluid rounded shadow-sm" 
                         alt="Confusion Matrix Graph">
                    
                    <div class="alert alert-light border mt-4 text-start">
                        <h6 class="fw-bold text-muted small text-uppercase"><i class="fas fa-info-circle me-1"></i> Analysis</h6>
                        <p class="small text-muted mb-0">
                            The matrix above visualizes the model's prediction accuracy across all 9 classes. 
                            High numbers along the diagonal indicate correct predictions. The low error rate 
                            confirms the model effectively distinguishes between similar classes like "Unripe Mango" 
                            and "Unripe Banana" despite color similarities.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="text-center mb-5">
        <a href="/" class="btn btn-outline-secondary rounded-pill px-4">
            <i class="fas fa-arrow-left me-2"></i> Back to Home
        </a>
    </div>
</div>
{% endblock %}
</file>

<file path=".gitignore">
# 🐍 Python
__pycache__/
*.py[cod]
venv/
.env

# # 🖼️ Media & Uploads
# static/uploads/*
# !static/uploads/.gitkeep
# # BUT keep the clean demo images!
# !static/demo_samples/

# 📦 Node & System Files (THE IMPORTANT PART!)
node_modules/
dist/
.DS_Store

# 🧪 Datasets
data/
test_dataset/
</file>

<file path="android/app/build.gradle">
apply plugin: 'com.android.application'

android {
    namespace = "com.ripesense.app"
    compileSdk = rootProject.ext.compileSdkVersion
    defaultConfig {
        applicationId "com.ripesense.app"
        minSdkVersion = rootProject.ext.minSdkVersion
        targetSdkVersion = rootProject.ext.targetSdkVersion
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        aaptOptions {
             // Files and dirs to omit from the packaged assets dir, modified to accommodate modern web apps.
             // Default: https://android.googlesource.com/platform/frameworks/base/+/282e181b58cf72b6ca770dc7ca5f91f135444502/tools/aapt/AaptAssets.cpp#61
            ignoreAssetsPattern = '!.svn:!.git:!.ds_store:!*.scc:.*:!CVS:!thumbs.db:!picasa.ini:!*~'
        }
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    
    // 👇 THIS WAS MISSING! This connects to the "javaVersion = 17" we set earlier!
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    subprojects {
    afterEvaluate { project ->
        if (project.plugins.hasPlugin("com.android.library") || project.plugins.hasPlugin("com.android.application")) {
            android {
                compileOptions {
                    sourceCompatibility JavaVersion.VERSION_17
                    targetCompatibility JavaVersion.VERSION_17
                }
            }
        }
    }
}
}

repositories {
    flatDir{
        dirs '../capacitor-cordova-android-plugins/src/main/libs', 'libs'
    }
}

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation "androidx.appcompat:appcompat:$androidxAppCompatVersion"
    implementation "androidx.coordinatorlayout:coordinatorlayout:$androidxCoordinatorLayoutVersion"
    implementation "androidx.core:core-splashscreen:$coreSplashScreenVersion"
    implementation project(':capacitor-android')
    testImplementation "junit:junit:$junitVersion"
    androidTestImplementation "androidx.test.ext:junit:$androidxJunitVersion"
    androidTestImplementation "androidx.test.espresso:espresso-core:$androidxEspressoCoreVersion"
    implementation project(':capacitor-cordova-android-plugins')
}

apply from: 'capacitor.build.gradle'

try {
    def servicesJSON = file('google-services.json')
    if (servicesJSON.text) {
        apply plugin: 'com.google.gms.google-services'
    }
} catch(Exception e) {
    logger.info("google-services.json not found, google-services plugin not applied. Push Notifications won't work")
}
</file>

<file path="android/app/src/main/AndroidManifest.xml">
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
    <uses-feature android:name="android.hardware.camera" android:required="false" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">

        <activity
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale|smallestScreenSize|screenLayout|uiMode|navigation|density"
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:theme="@style/AppTheme.NoActionBarLaunch"
            android:launchMode="singleTask"
            android:exported="true">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.fileprovider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_paths"></meta-data>
        </provider>
    </application>

    <!-- Permissions -->

    <uses-permission android:name="android.permission.INTERNET" />
</manifest>
</file>

<file path="android/app/src/main/java/com/ripesense/app/MainActivity.java">
package com.ripesense.app;

import com.getcapacitor.BridgeActivity;
import android.os.Bundle;

public class MainActivity extends BridgeActivity {

    @Override
    public void onBackPressed() {
        // [DETECTIVE] Lee Wonhee's "Back Button" Logic

        // 1. Get the current URL the user is looking at
        String currentUrl = bridge.getWebView().getUrl();

        // 2. Define your Home URL (UPDATE THIS!)
        String homeUrl = "https://ripesense-production.up.railway.app/";

        // 3. The Logic:
        if (currentUrl != null && !currentUrl.equals(homeUrl)) {
            // If we are NOT on the home page, force the browser to go Home
            bridge.getWebView().loadUrl(homeUrl);
        } else {
            // If we ARE on the home page, behave normally (close the app)
            super.onBackPressed();
        }
    }
}
</file>

<file path="android/app/src/main/res/drawable/ic_launcher_background.xml">
<?xml version="1.0" encoding="utf-8"?>
<vector
    android:height="108dp"
    android:width="108dp"
    android:viewportHeight="108"
    android:viewportWidth="108"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#3DDC84"
          android:pathData="M0,0h108v108h-108z"/>
    <path android:fillColor="#00000000" android:pathData="M9,0L9,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,0L19,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M29,0L29,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M39,0L39,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M49,0L49,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M59,0L59,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M69,0L69,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M79,0L79,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M89,0L89,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M99,0L99,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,9L108,9"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,19L108,19"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,29L108,29"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,39L108,39"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,49L108,49"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,59L108,59"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,69L108,69"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,79L108,79"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,89L108,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,99L108,99"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,29L89,29"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,39L89,39"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,49L89,49"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,59L89,59"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,69L89,69"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,79L89,79"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M29,19L29,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M39,19L39,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M49,19L49,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M59,19L59,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M69,19L69,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M79,19L79,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
</vector>
</file>

<file path="android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml">
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background"/>
    <foreground android:drawable="@mipmap/ic_launcher_foreground"/>
</adaptive-icon>
</file>

<file path="android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml">
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background"/>
    <foreground android:drawable="@mipmap/ic_launcher_foreground"/>
</adaptive-icon>
</file>

<file path="android/build.gradle">
// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:8.5.1'
        classpath 'com.google.gms:google-services:4.4.4'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

apply from: "variables.gradle"

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

subprojects {
    // 1. Force Java 17
    afterEvaluate { project ->
        if (project.plugins.hasPlugin("com.android.library") || project.plugins.hasPlugin("com.android.application")) {
            android {
                compileOptions {
                    sourceCompatibility JavaVersion.VERSION_17
                    targetCompatibility JavaVersion.VERSION_17
                }
            }
        }
    }

    // 2. Force Kotlin Alignment ONLY (Removed androidx.core)
    configurations.all {
        resolutionStrategy.eachDependency { details ->
            if (details.requested.group == 'org.jetbrains.kotlin') {
                details.useVersion '1.9.10'
            }
            // ❌ I REMOVED THE ANDROIDX.CORE BLOCK HERE. IT WAS THE PROBLEM.
        }
    }
}
</file>

<file path="android/gradle/wrapper/gradle-wrapper.properties">
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.7-all.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
</file>

<file path="android/variables.gradle">
ext {
    minSdkVersion = 24
    compileSdkVersion = 35
    targetSdkVersion = 35
    javaVersion = 17

    androidxActivityVersion = '1.9.3'       // 👈 Bump to latest
    androidxAppCompatVersion = '1.7.0'
    androidxCoordinatorLayoutVersion = '1.2.0'
    androidxCoreVersion = '1.15.0'          // 👈 Bump to latest (Supports SDK 35)
    androidxFragmentVersion = '1.8.5'       // 👈 Bump to latest
    coreSplashScreenVersion = '1.0.1'       // Keep this one, it works.
    androidxWebkitVersion = '1.12.1'        // 👈 Bump
    
    // ... leave the rest as they were ...
    junitVersion = '4.13.2'
    androidxJunitVersion = '1.2.1'
    androidxEspressoCoreVersion = '3.6.1'
    cordovaAndroidVersion = '10.1.1'
}
</file>

<file path="package.json">
{
  "name": "ripesense-web-app",
  "version": "1.0.0",
  "description": "**Student Name:** Gerald Tan Hock Soon  \r **Matric Number:** 294879  \r **Supervisor:** Suwannit Chareen Chit  \r **Project:** STTZK3993 Final Year Project (Academic Project 1)",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/Tacozn/FYP_RipeSense.git"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/Tacozn/FYP_RipeSense/issues"
  },
  "homepage": "https://github.com/Tacozn/FYP_RipeSense#readme",
  "dependencies": {
    "@capacitor/android": "^8.0.0",
    "@capacitor/cli": "^8.0.0",
    "@capacitor/core": "^8.0.0"
  }
}
</file>

<file path="static/manifest.json">
{
    "name": "RipeSense AI",
    "short_name": "RipeSense",
    "start_url": "/",
    "display": "standalone",
    "background_color": "#ffffff",
    "theme_color": "#2E7D32",
    "description": "Precision Fruit Ripeness Detection",
    "orientation": "portrait",
    "icons": [
      {
        "src": "/static/icon.png",
        "sizes": "192x192",
        "type": "image/png"
      },
      {
        "src": "/static/icon.png",
        "sizes": "512x512",
        "type": "image/png"
      }
    ]
}
</file>

<file path="templates/result_page.html">
{% extends 'base.html' %}
{% block title %}
  Analysis Result - RipeSense
{% endblock %}

{% block content %}
  <div class="container fade-in-up">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div class="d-flex gap-3">
        <a href="/ripeness_detection" class="btn btn-success rounded-pill px-4 shadow fw-bold text-white"><i class="fas fa-camera me-2"></i>Scan Another</a>
        <button type="button" class="btn btn-danger rounded-pill px-3 shadow fw-bold text-white" data-bs-toggle="modal" data-bs-target="#reportModal"><i class="fas fa-flag me-2"></i>Report Error</button>
      </div>

      {% if not not_fruit %}
        <span class="badge bg-white text-dark border px-3 py-2 rounded-pill fw-normal shadow-sm d-none d-md-inline-block"><i class="fas fa-seedling me-2 text-success"></i>AI Analysis Report</span>
      {% endif %}
    </div>

    {% if not_fruit %}
      <div class="row justify-content-center" style="margin-top: 50px;">
        <div class="col-md-8 col-lg-6">
          <div class="card border-0 shadow-lg rounded-4 text-center overflow-hidden">
            <div class="card-body p-5">
              <div class="mb-4">
                <span class="display-1">⛔</span>
              </div>
              <h2 class="fw-bold text-danger mb-3">Detection Failed</h2>
              <p class="text-muted lead mb-4">
                Our AI detected <strong>"{{ detected_object }}"</strong>, but RipeSense is currently calibrated only for:
              </p>
              <div class="d-flex justify-content-center gap-2 mb-5">
                <span class="badge bg-warning text-dark rounded-pill px-3 py-2">🍌 Banana</span>
                <span class="badge bg-danger rounded-pill px-3 py-2">🍅 Tomato</span>
                <span class="badge bg-success rounded-pill px-3 py-2">🥭 Mango</span>
              </div>
              <a href="/ripeness_detection" class="btn btn-danger rounded-pill px-5 py-2 mt-3 shadow-sm">Try Another Image</a>
            </div>
          </div>
        </div>
      </div>
    {% else %}
      <div class="row g-4">
        <div class="col-lg-5">
          <div class="card border-0 shadow-lg rounded-4 overflow-hidden h-100">
            <div class="position-relative text-center p-3" style="min-height: 320px; background: radial-gradient(circle at center, #ffffff 0%, #f8f9fa 100%);">
              <img src="data:image/jpeg;base64,{{ img_str }}" class="img-fluid shadow-sm rounded-3" style="object-fit: contain; max-height: 350px; width: auto;" />
              <div class="position-absolute bottom-0 start-0 w-100 p-2">
                <span class="badge bg-white text-dark border shadow-sm px-3 py-2 rounded-pill text-uppercase fw-bold">Detected: <span class="text-success">{{ class_names[0] }}</span></span>
              </div>
            </div>

            <div class="card-body p-4 bg-white text-center">
              <div class="bg-light rounded-4 p-4 border border-success border-opacity-25">
                <h6 class="text-uppercase text-muted fw-bold small mb-3"><i class="fas fa-shield-alt me-1 text-success"></i> AI Verification Score</h6>
                <div class="d-flex align-items-center justify-content-center gap-3 mb-3">
                  <i class="fas fa-check-circle display-3 text-success"></i>
                  <div>
                    <h1 class="display-4 fw-bold text-dark mb-0" style="letter-spacing: -2px; line-height: 1;">{{ (ripeness_result.confidence * 100)|round(1) }}<span class="fs-3 text-muted">%</span></h1>
                    <small class="text-success fw-bold text-uppercase letter-spacing-1">Confidence</small>
                  </div>
                </div>
                <div class="d-flex justify-content-between align-items-center border-top pt-3 mt-2">
                  <div class="text-muted small fw-medium d-flex align-items-center">
                    <i class="far fa-clock me-2"></i> {{ timestamp_now }}
                  </div>
                  <span class="badge bg-success text-white rounded-pill px-3">Model: YOLOv8n</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-7">
          <div class="card border-0 shadow-sm rounded-4 mb-4 bg-white position-relative overflow-hidden">
            <div class="d-flex flex-column align-items-center justify-content-center py-2">
              <div class="mb-3">
                {% if ripeness_result.ripeness_level == 'Ripe' %}
                  <i class="fas fa-check-circle display-1 text-warning" style="{% if is_red_fruit %}color: #D32F2F !important;{% endif %}"></i>
                {% elif ripeness_result.ripeness_level == 'Unripe' %}
                  <i class="fas fa-leaf display-1 text-success"></i>
                {% else %}
                  <i class="fas fa-exclamation-triangle display-1 text-danger"></i>
                {% endif %}
              </div>

              <h6 class="text-uppercase text-muted fw-bold mb-2" style="letter-spacing: 1px;">Status</h6>

              {% if ripeness_result.ripeness_level == 'Ripe' %}
                <h1 class="display-3 fw-bold text-warning mb-0" style="{% if is_red_fruit %}color: #D32F2F !important;{% endif %}">RIPE</h1>
                <p class="text-muted fw-bold mt-2">
                  <i class="fas fa-star me-1"></i> Perfect Condition
                </p>
              {% elif ripeness_result.ripeness_level == 'Unripe' %}
                <h1 class="display-3 fw-bold text-success mb-0">UNRIPE</h1>
                <p class="text-muted fw-bold mt-2">
                  <i class="fas fa-clock me-1"></i> Needs more time
                </p>
              {% else %}
                <h1 class="display-3 fw-bold text-danger mb-0">OVERRIPE</h1>
                <p class="text-danger fw-bold mt-2">
                  <i class="fas fa-hand-paper me-1"></i> Handle with care
                </p>
              {% endif %}
            </div>
          </div>

          {% if advice %}
            <div class="row g-3 mb-4">
              <div class="col-md-4">
                <div class="p-3 border rounded-4 bg-light h-100 text-center hover-effect">
                  <div class="fs-4 mb-2">🍴</div>
                  <h6 class="fw-bold small text-uppercase text-success">Best Use</h6>
                  <small class="text-dark d-block lh-sm fw-bold">{{ advice.usage }}</small>
                </div>
              </div>
              <div class="col-md-4">
                <div class="p-3 border rounded-4 bg-light h-100 text-center hover-effect">
                  <div class="fs-4 mb-2">🧊</div>
                  <h6 class="fw-bold small text-uppercase text-primary">Storage</h6>
                  <small class="text-dark d-block lh-sm fw-bold">{{ advice.storage }}</small>
                </div>
              </div>
              <div class="col-md-4">
                <div class="p-3 border rounded-4 bg-light h-100 text-center hover-effect">
                  <div class="fs-4 mb-2">⏳</div>
                  <h6 class="fw-bold small text-uppercase text-warning">Shelf Life</h6>
                  <small class="text-dark d-block lh-sm fw-bold">{{ advice.shelf_life }}</small>
                </div>
              </div>
            </div>
          {% endif %}

          <div class="row g-4">
            <div class="col-md-7">
              <div class="card border-0 shadow-sm rounded-4 h-100">
                <div class="card-header bg-white py-3 border-0">
                  <h6 class="fw-bold mb-0 text-uppercase small text-muted"><i class="fas fa-chart-pie me-2"></i>Color Analysis</h6>
                </div>
                <div class="card-body d-flex align-items-center justify-content-center">
                  <div class="row w-100 align-items-center">
                    <div class="col-5">
                      <canvas id="colorChart"></canvas>
                    </div>
                    <div class="col-7">
                      <ul class="list-unstyled mb-0 small">
                        <li class="mb-2 d-flex justify-content-between">
                          <span><span class="badge bg-success me-1">●</span> Green</span> <strong>{{ ripeness_result.color_analysis.green_percentage }}%</strong>
                        </li>
                        <li class="mb-2 d-flex justify-content-between">
                          <span><span class="badge me-1" style="background-color: {% if is_red_fruit %}#D32F2F{% else %}#FFC107{% endif %}; color: white;">●</span> {% if is_red_fruit %}Red{% else %}Yellow{% endif %}</span> 
                          <strong>{{ ripeness_result.color_analysis.yellow_percentage }}%</strong>
                        </li>
                        <li class="d-flex justify-content-between">
                          <span><span class="badge me-1" style="background-color: #795548;">●</span> Brown</span> <strong>{{ ripeness_result.color_analysis.brown_percentage }}%</strong>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-5">
              <div class="card border-0 shadow-sm rounded-4 h-100 text-white" style="background-color: #1B5E20;">
                <div class="card-body p-4 d-flex flex-column justify-content-center">
                  <h6 class="text-uppercase fw-bold text-white-50 mb-3" style="letter-spacing: 1px;"><i class="fas fa-leaf me-2"></i>Nutrition</h6>
                  <h1 class="fw-bold mb-0 display-5">{{ nutrition.calories }}</h1>
                  <p class="text-white opacity-75 mb-3 small">per 100g serving</p>
                  <div class="mt-auto">
                    <span class="badge bg-white text-success border border-white mb-2 fs-6">{{ nutrition.vitamin }}</span>
                    <div class="fw-bold mt-1 text-white fs-6">
                      <i class="fas fa-heartbeat me-1"></i> {{ nutrition.benefit }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        const ctx = document.getElementById('colorChart').getContext('2d');
        const isRedFruit = {{ 'true' if is_red_fruit else 'false' }};
        const ripeColor = isRedFruit ? '#D32F2F' : '#FFEB3B';
        const ripeLabel = isRedFruit ? 'Red' : 'Yellow';

        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Green', ripeLabel, 'Brown'],
                datasets: [{
                    data: [
                        {{ ripeness_result.color_analysis.green_percentage }}, 
                        {{ ripeness_result.color_analysis.yellow_percentage }}, 
                        {{ ripeness_result.color_analysis.brown_percentage }}
                    ],
                    backgroundColor: ['#4CAF50', ripeColor, '#795548'],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: { cutout: '70%', responsive: true, plugins: { legend: { display: false } } }
        });

        {% if ripeness_result.ripeness_level == 'Ripe' %}
            window.addEventListener('load', () => {
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#4CAF50', ripeColor] });
            });
        {% endif %}
    </script>
    {% endif %}
  </div>

  <div class="modal fade" id="reportModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0 shadow-lg rounded-4 overflow-hidden">
        <div class="modal-header bg-danger text-white border-0">
          <h5 class="modal-title fw-bold"><i class="fas fa-exclamation-triangle me-2"></i>Report Inaccuracy</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body p-4 text-center">
          <div class="mb-3">
            <span class="fa-stack fa-2x text-danger opacity-75">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fas fa-flag fa-stack-1x fa-inverse"></i>
            </span>
          </div>
          <h5 class="fw-bold text-dark">Flag this result?</h5>
          <p class="text-muted small mb-0">
            This helps our team retrain the AI model for better accuracy in the future.
            <br /><strong>Is this result definitely incorrect?</strong>
          </p>
        </div>

        <div class="modal-footer border-0 bg-light p-3 justify-content-center gap-2">
          <button type="button" class="btn btn-outline-secondary rounded-pill px-4" data-bs-dismiss="modal">Cancel</button>

          <form action="{{ url_for('report_error', filename=filename) }}" method="POST">
            <button type="submit" class="btn btn-danger rounded-pill px-4 shadow-sm fw-bold">Yes, Report It</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center mt-5">
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
            
            <div class="card-header bg-white border-0 py-3 d-flex justify-content-between align-items-center" 
                 style="cursor: pointer;" 
                 data-bs-toggle="collapse" 
                 data-bs-target="#timelineCollapse"
                 aria-expanded="false">
                <h6 class="mb-0 fw-bold text-uppercase small text-muted" style="letter-spacing: 1px;">
                    <i class="fas fa-network-wired me-2"></i> Neural Analysis Log
                </h6>
                <i class="fas fa-chevron-down text-muted"></i>
            </div>
            
            <div id="timelineCollapse" class="collapse">
                <div class="card-body bg-light p-4">
                    <div class="timeline">
                        {% for log in ai_logs %}
                            <div class="timeline-item">
                                <div class="timeline-marker 
                                    {% if '⛔' in log %}bg-danger
                                    {% elif '✅' in log %}bg-success
                                    {% elif '🦸' in log %}bg-primary
                                    {% else %}bg-secondary{% endif %}">
                                </div>
                                <div class="timeline-content">
                                    <p class="mb-0 small text-dark fw-medium">{{ log }}</p>
                                </div>
                            </div>
                        {% endfor %}
                        
                        <div class="timeline-item">
                            <div class="timeline-marker bg-success"></div>
                            <div class="timeline-content">
                                <p class="mb-0 small text-success fw-bold">Analysis Complete</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .timeline {
        position: relative;
        padding-left: 10px;
    }
    .timeline::before {
        content: '';
        position: absolute;
        left: 15px; /* Aligns line with dots */
        top: 0;
        bottom: 0;
        width: 2px;
        background: #e9ecef;
    }
    .timeline-item {
        position: relative;
        padding-bottom: 1.5rem;
        padding-left: 2rem;
    }
    .timeline-item:last-child {
        padding-bottom: 0;
    }
    .timeline-marker {
        position: absolute;
        left: 11px; /* Center the dot on the line */
        top: 0;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        border: 2px solid white; /* White ring effect */
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        z-index: 1;
    }
    .timeline-content {
        background: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.03);
    }
</style>
{% endblock %}
</file>

<file path="templates/ripeness_detection.html">
{% extends "base.html" %}
{% block title %}Analyze - RipeSense{% endblock %}

{% block content %}
<style>
    /* 🎨 CUSTOM THEME STYLES */
    
    /* 1. The Toggle Switch (Segmented Control) */
    .mode-toggle {
        background-color: #f1f3f5;
        border-radius: 50px;
        padding: 5px;
        display: inline-flex;
        position: relative;
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
    }
    .mode-btn {
        border: none;
        background: transparent;
        color: #6c757d;
        padding: 10px 30px;
        border-radius: 50px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    .mode-btn.active {
        background-color: #198754; /* RipeSense Green */
        color: white;
        box-shadow: 0 4px 6px rgba(25, 135, 84, 0.3);
    }
    .mode-btn:hover:not(.active) {
        color: #198754;
    }

    /* 2. The Camera Shutter Button */
    .shutter-btn {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background-color: white;
        border: 4px solid #e9ecef;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.1s, border-color 0.2s;
        margin: 0 auto;
    }
    .shutter-btn:active {
        transform: scale(0.95);
        border-color: #198754;
    }
    .shutter-btn i {
        color: #333;
        font-size: 24px;
    }
    .shutter-label {
        margin-top: 8px;
        font-size: 0.9rem;
        color: #6c757d;
        font-weight: 500;
    }

    /* 3. Upload Zone Polish */
    .upload-zone {
        border: 2px dashed #a3cfbb; /* Softer Green Border */
        background-color: #f8fdfa; /* Very light green tint */
        transition: all 0.3s;
    }
    .upload-zone:hover {
        border-color: #198754;
        background-color: #edf7f2;
    }
</style>

<div class="row justify-content-center">
    <div class="col-lg-6 col-md-8">
        <div class="text-center mb-4">
            <h2 class="fw-bold text-success">Analyze Fruit Ripeness</h2>
            <p class="text-muted">Upload a photo or use your camera to detect ripeness.</p>
        </div>

        <div class="d-flex justify-content-center mb-4">
            <div class="mode-toggle">
                <button type="button" class="mode-btn active" id="btn-upload-mode" onclick="switchMode('upload')">
                    <i class="fas fa-cloud-upload-alt me-2"></i>Upload
                </button>
                <button type="button" class="mode-btn" id="btn-camera-mode" onclick="switchMode('camera')">
                    <i class="fas fa-camera me-2"></i>Camera
                </button>
            </div>
        </div>

        <div class="card shadow-lg p-4 border-0 rounded-4">
            <div class="card-body">
                
                <div id="scanOverlay" class="scan-overlay">
                    <div class="scanner-box">
                        <img id="scanImage" src="" style="width:100%; height:100%; object-fit:cover; opacity:0.8;">
                        <div class="scan-line"></div>
                    </div>
                    <div class="scan-text">Analyzing Neural Patterns...</div>
                    <div class="spinner-border text-success mt-3" role="status"></div>
                </div>
                
                <form id="uploadForm" action="{{ url_for('detect_ripeness') }}" method="post" enctype="multipart/form-data">
                    
                    <div id="upload-section">
                        <label for="fileInput" class="upload-zone w-100 p-5 text-center mb-4 d-block position-relative rounded-4">
                            <div id="uploadText">
                                <div class="mb-3">
                                    <i class="fas fa-image fa-3x text-success opacity-50"></i>
                                </div>
                                <h5 class="fw-bold text-dark">Tap to Select Image</h5>
                                <small class="text-muted">Supports JPG, PNG, JPEG</small>
                            </div>
                            
                            <img id="preview" src="#" alt="Preview" 
                                 style="display: none; max-height: 250px; width: auto; margin: 0 auto; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            
                            <input type="file" id="fileInput" name="file" accept="image/*" 
                                   style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;"
                                   onchange="showPreview(event)" required>
                        </label>
                    </div>

                    <div id="camera-section" class="text-center mb-4" style="display: none;">
                        <div class="position-relative d-inline-block rounded-4 overflow-hidden shadow-sm border bg-black" style="min-height: 300px; width: 100%;">
                            
                            <video id="video" autoplay playsinline style="width: 100%; height: 100%; object-fit: cover; display: none;"></video>
                            
                            <img id="camera-preview" src="" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                            
                            <canvas id="canvas" style="display:none;"></canvas>

                            <div id="camera-placeholder" class="d-flex align-items-center justify-content-center h-100 text-white flex-column" style="padding-top: 80px;">
                                <i class="fas fa-camera fa-3x mb-3 opacity-50"></i>
                                <p class="opacity-75">Camera is currently off</p>
                            </div>
                        </div>

                        <div class="mt-4">
                            <button type="button" class="btn btn-success rounded-pill px-4 py-2 shadow-sm" id="start-camera-btn" onclick="startCamera()">
                                <i class="fas fa-power-off me-2"></i>Activate Camera
                            </button>

                            <div id="capture-group" style="display: none;">
                                <button type="button" class="shutter-btn" onclick="capturePhoto()" title="Take Photo">
                                    <i class="fas fa-camera"></i>
                                </button>
                                <div class="shutter-label">Capture Photo</div>
                            </div>

                            <button type="button" class="btn btn-outline-warning rounded-pill px-4 mt-2" id="retake-btn" onclick="retakePhoto()" style="display: none;">
                                <i class="fas fa-redo me-2"></i>Retake Photo
                            </button>
                        </div>
                    </div>
                
                    <div class="text-center mt-4 d-flex flex-column align-items-center gap-3">
    
    <button type="button" onclick="startScan()" class="btn btn-success btn-lg rounded-pill px-5 py-3 shadow-lg position-relative overflow-hidden hover-lift" style="min-width: 250px;">
        <span class="position-relative z-1 fw-bold text-uppercase" style="letter-spacing: 1px;">
            <i class="fas fa-search-plus me-2"></i>Analyze Ripeness
        </span>
        <div class="shine"></div>
    </button>
    
    <a href="/" class="btn btn-white text-muted border shadow-sm rounded-pill px-4 py-2 fw-bold hover-cancel transition-all" style="min-width: 200px;">
        <i class="fas fa-times me-2"></i>Cancel & Return
    </a>

</div>

<style>
    /* 🖱️ Interaction Effects */
    .hover-lift {
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .hover-lift:hover {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 15px 30px rgba(25, 135, 84, 0.4) !important;
    }
    
    /* 🔴 Cancel Button Hover */
    .hover-cancel {
        transition: all 0.2s ease-in-out;
        background-color: #fff;
    }
    .hover-cancel:hover {
        background-color: #fff5f5; 
        color: #dc3545 !important; 
        border-color: #dc3545 !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(220, 53, 69, 0.15) !important;
    }

    /* 🌟 Continuous Shine Animation */
    .shine {
        position: absolute;
        top: 0;
        left: -100%;
        width: 50%;
        height: 100%;
        background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
        transform: skewX(-25deg);
        animation: shine-move 4s infinite;
    }
    
    @keyframes shine-move {
        0% { left: -100%; }
        20% { left: 200%; }
        100% { left: 200%; }
    }
    
    .btn-white { background-color: white; }
</style>
                </form>
                
                <script>
                // ... (Logic is exactly the same as before, no changes needed here!) ...
                const uploadSection = document.getElementById('upload-section');
                const cameraSection = document.getElementById('camera-section');
                const btnUpload = document.getElementById('btn-upload-mode');
                const btnCamera = document.getElementById('btn-camera-mode');
                const fileInput = document.getElementById('fileInput');

                const video = document.getElementById('video');
                const canvas = document.getElementById('canvas');
                const cameraPreview = document.getElementById('camera-preview');
                const cameraPlaceholder = document.getElementById('camera-placeholder');

                const startBtn = document.getElementById('start-camera-btn');
                const captureGroup = document.getElementById('capture-group'); // Changed to group
                const retakeBtn = document.getElementById('retake-btn');

                let stream = null;

                function switchMode(mode) {
                    if (mode === 'upload') {
                        uploadSection.style.display = 'block';
                        cameraSection.style.display = 'none';
                        btnUpload.classList.add('active');
                        btnCamera.classList.remove('active');
                        stopCamera(); 
                    } else {
                        uploadSection.style.display = 'none';
                        cameraSection.style.display = 'block';
                        btnUpload.classList.remove('active');
                        btnCamera.classList.add('active');
                    }
                }

                function showPreview(event) {
                    if(event.target.files.length > 0){
                        var src = URL.createObjectURL(event.target.files[0]);
                        var preview = document.getElementById("preview");
                        var text = document.getElementById("uploadText");
                        var scanImage = document.getElementById("scanImage"); 
                        
                        preview.src = src;
                        preview.style.display = "block";
                        scanImage.src = src; 
                        if(text) text.style.display = "none";
                    }
                }

                async function startCamera() {
                    try {
                        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                        video.srcObject = stream;
                        
                        // Show Video
                        video.style.display = 'block';
                        
                        // 🛠️ FIX: Remove 'd-flex' class so the placeholder can actually hide!
                        cameraPlaceholder.classList.remove('d-flex');
                        cameraPlaceholder.style.display = 'none';
                        
                        cameraPreview.style.display = 'none';
                        
                        startBtn.style.display = 'none';
                        captureGroup.style.display = 'block';
                        retakeBtn.style.display = 'none';
                    } catch (err) {
                        alert("⛔ Error accessing camera: " + err);
                    }
                }

                function stopCamera() {
                    if (stream) {
                        stream.getTracks().forEach(track => track.stop());
                        video.style.display = 'none';
                        
                        // 🛠️ FIX: Add 'd-flex' back so it centers nicely again
                        cameraPlaceholder.classList.add('d-flex');
                        cameraPlaceholder.style.display = 'flex'; // Ensure it's visible
                        
                        startBtn.style.display = 'inline-block';
                        captureGroup.style.display = 'none';
                    }
                }

                function capturePhoto() {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);

                    const dataUrl = canvas.toDataURL('image/jpeg');
                    cameraPreview.src = dataUrl;
                    
                    video.style.display = 'none';
                    cameraPreview.style.display = 'block';
                    captureGroup.style.display = 'none';
                    retakeBtn.style.display = 'inline-block';
                    
                    document.getElementById("scanImage").src = dataUrl;

                    canvas.toBlob(function(blob) {
                        // Use a fixed name prefix + random ID in JS, 
                        // BUT the backend timestamp fix we added earlier handles the real uniqueness!
                        const file = new File([blob], "webcam_capture.jpg", { type: "image/jpeg" });
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        fileInput.files = dataTransfer.files;
                    }, 'image/jpeg');
                }

                function retakePhoto() {
                    cameraPreview.style.display = 'none';
                    video.style.display = 'block';
                    captureGroup.style.display = 'block';
                    retakeBtn.style.display = 'none';
                    fileInput.value = ""; 
                }

                function startScan() {
                    const fileInput = document.getElementById('fileInput');
                    if (fileInput.files.length === 0) {
                        alert("Please select or capture an image first!");
                        return;
                    }
                    document.getElementById('scanOverlay').style.display = 'flex';
                    setTimeout(() => {
                        document.getElementById('uploadForm').submit();
                    }, 1500); 
                }
                </script>

            </div>
        </div>
    </div>
</div>
{% endblock %}
</file>

<file path="requirements.txt">
--extra-index-url https://download.pytorch.org/whl/cpu

Flask==3.0.0
opencv-python-headless==4.8.1.78
numpy==1.26.2
Pillow==10.1.0
torch
torchvision
ultralytics
gunicorn
onnx
onnxruntime
</file>

<file path="static/css/style.css">
/* --- 1. MODERN VARIABLES --- */
:root {
    --primary-color: #2E7D32; /* Deep Fresh Green */
    --accent-color: #81C784;  /* Soft Green */
    --warning-color: #FFC107; /* Ripe Yellow */
    --danger-color: #D32F2F;  /* Overripe Red */
    --dark-bg: #1B5E20;       /* Dark Green Navbar */
    --light-bg: #F1F8E9;      /* Very Light Green Tint */
    --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    --hover-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--light-bg);
    color: #333;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* --- 2. GLASS NAVBAR --- */
.navbar {
    background: rgba(27, 94, 32, 0.85) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.8rem 0;
    transition: all 0.3s ease;
}

.navbar-brand {
    font-weight: 800;
    letter-spacing: -0.5px;
    font-size: 1.4rem;
    color: white !important;
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.nav-link {
    color: rgba(255, 255, 255, 0.75) !important;
    font-weight: 600;
    font-size: 0.9rem;
    padding: 0.6rem 1.2rem !important;
    border-radius: 30px;
    margin: 0 3px;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.nav-link:hover, .nav-link.active {
    background: rgba(255, 255, 255, 0.2);
    color: white !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.navbar-toggler {
    color: white !important;
    border-color: rgba(255,255,255,0.5) !important;
}

/* --- 3. GLASSMORPHISM CARDS --- */
.glass-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hover-effect:hover {
    transform: translateY(-5px);
    box-shadow: var(--hover-shadow);
}

/* --- 4. HERO & STATS --- */
.hero-section {
    position: relative;
    overflow: hidden;
    color: white;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
}
.hero-overlay {
    background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7));
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border-radius: 20px;
}

.stat-card {
    background: white;
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    border-bottom: 5px solid var(--primary-color);
    transition: transform 0.3s ease;
    text-align: center;
}
.stat-card:hover { transform: translateY(-10px); }
.stat-number {
    font-size: 3rem;
    font-weight: 800;
    color: var(--primary-color);
    line-height: 1;
    margin-bottom: 10px;
}

/* --- 5. ANIMATIONS --- */
.fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
}
@keyframes fadeInUp {
    to { opacity: 1; transform: translateY(0); }
}

/* --- 5. THE NEW HIGH-TECH SCANNER (REPLACEMENT ONLY) --- */
.scan-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.98); /* Clean white backdrop */
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.scanner-box {
    position: relative;
    width: 300px;
    height: 300px;
    border: 5px solid #2E7D32; /* Using your Deep Fresh Green */
    border-radius: 30px;
    overflow: hidden;
    background: #fff; /* Prevents the black box glitch */
    box-shadow: 0 0 25px rgba(46, 125, 50, 0.3);
    margin-bottom: 20px;
}

#scanImage {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.8;
}

.scan-line {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: #4CAF50;
    box-shadow: 0 0 15px #4CAF50, 0 0 30px #4CAF50;
    z-index: 10;
    animation: scanMove 2s ease-in-out infinite;
}

@keyframes scanMove {
    0% { top: 0%; }
    50% { top: 100%; }
    100% { top: 0%; }
}

.scan-text {
    font-family: 'Poppins', sans-serif; /* Matching your theme */
    color: #2E7D32;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 2px;
}
/* --- 6. UTILITIES --- */
.upload-zone {
    border: 3px dashed #A5D6A7;
    background-color: #F9FBE7;
    border-radius: 20px;
    transition: all 0.3s ease;
    cursor: pointer;
}
.upload-zone:hover {
    border-color: var(--primary-color);
    background-color: #E8F5E9;
}

.nutrition-card {
    background: #fff;
    border-left: 4px solid var(--primary-color);
    transition: transform 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.nutrition-card:hover { transform: scale(1.05); }

.fruit-badge {
    background: white;
    border: 1px solid #eee;
    padding: 8px 16px;
    border-radius: 50px;
    font-weight: 600;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    display: inline-block;
    margin: 5px;
}

/* --- 7. CAMERA HUD --- */
.camera-container {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    background: #000;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
}
.hud-overlay { position: absolute; top: 20px; left: 20px; z-index: 10; }
.recording-indicator {
    width: 12px; height: 12px;
    background-color: red;
    border-radius: 50%;
    display: inline-block;
    animation: blink 1s infinite;
}
.scan-grid {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image: 
        linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    pointer-events: none;
    opacity: 0.3;
}

/* --- 8. PRINT STYLES --- */
@media print {
    body { background: white; }
    .navbar, .btn, .alert-success, footer, .hero-overlay {
        display: none !important;
    }
    .card, .glass-card {
        box-shadow: none !important;
        border: 1px solid #ddd !important;
        background: white !important;
    }
    .container { width: 100%; max-width: 100%; margin: 0; padding: 0; }
    * { color: black !important; print-color-adjust: exact; -webkit-print-color-adjust: exact; }
}

/* MOBILE OPTIMIZATIONS */
@media (max-width: 768px) {
    .hero-section h1.display-3 { font-size: 2.2rem !important; line-height: 1.2; }
    .hero-section p.lead { font-size: 1rem !important; padding: 0 15px; }
    .hero-section .d-flex { flex-direction: column; width: 100%; align-items: center; }
    .hero-section .btn { width: 80% !important; margin-bottom: 10px; padding-left: 0 !important; padding-right: 0 !important; }
    .hero-section { padding-top: 2rem !important; padding-bottom: 2rem !important; margin-bottom: 2rem !important; }
    .stat-card { margin-bottom: 15px; padding: 1.5rem !important; }
}

#how-it-works .hover-effect {
    transition: all 0.3s ease;
    border-top: 4px solid transparent;
}
#how-it-works .hover-effect:hover {
    border-top: 4px solid var(--primary-color);
    background-color: #f8fff9 !important;
}

@keyframes pulse-red {
    0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.7); }
    70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(13, 110, 253, 0); }
    100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(13, 110, 253, 0); }
}

.pulse-live {
    animation: pulse-red 2s infinite;
}

/* 🧪 RipeSense Deep-Scan Animation */
.scan-container {
    position: relative;
    width: 300px;
    height: 300px;
    margin: 0 auto;
    border: 2px solid rgba(46, 125, 50, 0.3);
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(5px);
    overflow: hidden;
}

/* The actual image being "scanned" */
.scan-image-preview {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.6;
}

/* The moving laser line */
.laser {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: #4CAF50;
    box-shadow: 0 0 20px #4CAF50, 0 0 40px #4CAF50;
    z-index: 10;
    animation: scanning 2s ease-in-out infinite;
}

/* The "Pulse" text */
.scan-text {
    font-family: 'Monaco', 'Consolas', monospace;
    color: #2E7D32;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    animation: blink 1s infinite;
}

@keyframes scanning {
    0% { top: 0%; }
    50% { top: 100%; }
    100% { top: 0%; }
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

@keyframes pulse-blue {
    0% { box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(13, 110, 253, 0); }
    100% { box-shadow: 0 0 0 0 rgba(13, 110, 253, 0); }
}

.pulse-blue {
    animation: pulse-blue 2s infinite;
}
/* =========================================
   RIPESENSE NAVBAR STYLING (FINAL v2)
   ========================================= */

/* --- 1. MOBILE FIRST (Default View) --- */
/* These rules make it big and chunky for phones */
.navbar-nav .nav-item {
    width: 100%;        /* Full width */
    margin: 2px 0;      
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

.navbar-nav .nav-link {
    display: flex;
    align-items: center;
    width: 100%;        /* Stretch to fill screen */
    padding: 15px 20px; /* Big padding for fingers */
    border-radius: 12px;
    font-weight: 500;
    color: #555;
    transition: all 0.2s ease-in-out;
}

/* --- 2. ACTIVE STATE (Green Pill) --- */
.navbar-nav .nav-link.active {
    background-color: #198754; 
    color: white !important;   
    font-weight: 600;          
    box-shadow: 0 4px 10px rgba(25, 135, 84, 0.3); 
}

/* --- 3. PC / LAPTOP VIEW (The "Slim" Fix) --- */
/* This only runs on screens wider than 992px (Laptops/Desktops) */
@media (min-width: 992px) {
    
    /* 1. Stop the buttons from stretching */
    .navbar-nav .nav-item {
        width: auto !important;     /* Force it to shrink to text size */
        margin: 0 5px !important;   /* Small gap between buttons */
        border-bottom: none !important; /* No lines on PC */
    }

    /* 2. Slim down the padding and link size */
    .navbar-nav .nav-link {
        width: auto !important;     /* CRITICAL: Stops the 100% width */
        padding: 8px 16px !important; /* Much smaller padding */
        font-size: 0.95rem;         /* Elegant text size */
        display: inline-flex;       /* Sit side-by-side */
        justify-content: center;
    }

    /* 3. Adjust the "Active" pill for PC */
    .navbar-nav .nav-link.active {
        border-radius: 50px;        /* Perfect rounded pill */
        padding-left: 20px !important; 
        padding-right: 20px !important;
        transform: translateY(-1px); /* Subtle lift */
    }

    /* 4. Hover effect for PC */
    .navbar-nav .nav-link:not(.active):hover {
        background-color: #e8f5e9;
        color: #198754;
        transform: translateY(-1px);
    }
}
</file>

<file path="templates/index.html">
{% extends "base.html" %}
{% block title %}Home - RipeSense AI{% endblock %}

{% block content %}

<header class="hero-section text-center py-5 mb-5 fade-in-up" 
        style="background: radial-gradient(circle at top right, #43A047, #1B5E20); color: white;">
    
    <div class="hero-overlay"></div>
    
    <div class="container position-relative py-5 z-2">
        
        <h1 class="display-3 fw-bold mb-3 text-white">Precision Agriculture <br>in Your Pocket</h1>
        <p class="lead mb-4 text-white-75 mx-auto" style="max-width: 650px;">
            Utilizing Convolutional Neural Networks (CNN) and YOLOv8 to reduce food waste and optimize harvest timing with 97% accuracy.
        </p>
        
        <div class="d-flex justify-content-center gap-3">
            <a href="{{ url_for('ripeness_detection') }}" class="btn btn-success btn-lg rounded-pill px-5 shadow-lg">
                🚀 Launch App
            </a>
            <a href="#how-it-works" class="btn btn-outline-light btn-lg rounded-pill px-4">
                How it Works
            </a>
        </div>
    </div>
</header>

<div class="container mb-5 fade-in-up" style="animation-delay: 0.2s;">
    <div class="row g-4 text-center">
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-number" data-target="97.3">0%</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Model Accuracy</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card" style="border-bottom-color: #FFC107;">
                <div class="stat-number" data-target="{{ total_scans }}">0</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Total Scans Performed</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card" style="border-bottom-color: #2196F3;">
                <div class="stat-number" data-target="3">0</div>
                <p class="text-muted fw-bold text-uppercase small mb-0">Supported Fruits</p>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 justify-content-center mb-5 fade-in-up" style="animation-delay: 0.4s;">
    <div class="col-lg-10">
        <div class="row g-4">
            <div class="col-md-6">
                <div class="card h-100 glass-card hover-effect p-4 border-0">
                    <div class="card-body d-flex flex-column align-items-center text-center">
                        <div class="bg-success bg-opacity-10 text-success rounded-circle p-3 mb-3 display-6">
                            📁
                        </div>
                        <h3 class="fw-bold">Static Analysis</h3>
                        <p class="text-muted">Upload high-res images for a detailed breakdown of ripeness, color composition, and nutritional data.</p>
                        <a href="{{ url_for('ripeness_detection') }}" class="btn btn-outline-success rounded-pill w-100 mt-auto">Upload Image</a>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card h-100 glass-card hover-effect p-4 border-0">
                    <div class="card-body d-flex flex-column align-items-center text-center">
                        <div class="bg-primary bg-opacity-10 text-primary rounded-circle p-3 mb-3 display-6">
                            📷
                        </div>
                        <h3 class="fw-bold">Real-Time Detection</h3>
                        <p class="text-muted">Activate the YOLOv8-Live stream to detect and classify fruits instantly in the field environment.</p>
                        <a href="{{ url_for('fruit_detection') }}" class="btn btn-outline-primary rounded-pill w-100 mt-auto">Start Camera</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="how-it-works" class="py-5 mb-5 fade-in-up" style="animation-delay: 0.6s;">
    <div class="text-center mb-5">
        <h6 class="text-uppercase text-success fw-bold" style="letter-spacing: 2px;">The Technology</h6>
        <h2 class="fw-bold">How RipeSense Analyzes Your Fruit</h2>
        <p class="text-muted">A 3-step hybrid approach combining Deep Learning and Color Science.</p>
    </div>
    
    <div class="row g-4 justify-content-center text-center">
        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 hover-effect bg-white">
                <div class="display-5 mb-3 text-success">
                    <i class="fas fa-camera-retro"></i>
                </div>
                <h5 class="fw-bold">1. Digital Capture</h5>
                <p class="small text-muted mb-0">The system captures an RGB image and uses <strong>OpenCV</strong> to normalize lighting and reduce background noise for a clean scan.</p>
                <div class="mt-3 badge bg-light text-success border">Pre-processing</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 hover-effect bg-white" style="border-top: 4px solid #2E7D32 !important;">
                <div class="display-5 mb-3 text-primary">
                    <i class="fas fa-brain"></i>
                </div>
                <h5 class="fw-bold">2. Neural Inference</h5>
                <p class="small text-muted mb-0">Our <strong>YOLOv8</strong> engine identifies the fruit and runs a specialized classification to determine its physical ripeness stage.</p>
                <div class="mt-3 badge bg-light text-primary border">Deep Learning</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 hover-effect bg-white">
                <div class="display-5 mb-3 text-warning">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h5 class="fw-bold">3. Color Validation</h5>
                <p class="small text-muted mb-0">The <strong>HSV Color Histogram</strong> verifies the AI's guess by measuring exact pixel values to ensure a 97% accuracy rate.</p>
                <div class="mt-3 badge bg-light text-warning border">Data Analytics</div>
            </div>
        </div>
    </div>
</div>

<div class="text-center mb-5 fade-in-up" style="animation-delay: 0.8s;">
    <h5 class="fw-bold text-muted mb-4">Currently Calibrated For</h5>
    <div>
        <span class="fruit-badge">🍌 Banana</span>
        <span class="fruit-badge">🍅 Tomato</span>
        <span class="fruit-badge">🥭 Mango</span>
        <span class="fruit-badge text-muted bg-light border-0">...more coming soon</span>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const counters = document.querySelectorAll('.stat-number');
        
        counters.forEach(counter => {
            const updateCount = () => {
                const target = +counter.getAttribute('data-target');
                const count = +counter.innerText.replace('%', ''); // Handle the % sign
                
                const inc = target / 50; 

                if (count < target) {
                    if(counter.getAttribute('data-target').includes('.')) {
                        counter.innerText = (count + inc).toFixed(1) + (target === 96.5 ? '%' : '');
                    } else {
                        counter.innerText = Math.ceil(count + inc);
                    }
                    setTimeout(updateCount, 30);
                } else {
                    counter.innerText = target + (target === 96.5 ? '%' : '');
                }
            };
            updateCount();
        });
    });
</script>

{% endblock %}
</file>

<file path="templates/fruit_detection.html">
{% extends "base.html" %}
{% block title %}Live Analysis - RipeSense{% endblock %}

{% block content %}
<div class="container fade-in-up">
    <div class="text-center mb-4">
        <h2 class="fw-bold text-success">Real-Time Detection</h2>
        <p class="text-muted">Point your camera at a fruit to identify it instantly.</p>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10">
            
            <div class="position-relative rounded-4 overflow-hidden shadow-lg mb-4 bg-black" style="min-height: 480px;">
                
                <div class="position-absolute top-0 start-0 w-100 p-3 d-flex justify-content-between z-2" 
                     style="background: linear-gradient(to bottom, rgba(0,0,0,0.6), transparent);">
                    
                    <div class="d-flex gap-2">
                        <span class="badge bg-black bg-opacity-50 border border-success text-success fw-normal backdrop-blur">
                            <i class="fas fa-eye me-1"></i> YOLOv8-Nano
                        </span>
                        <span id="latencyTag" class="badge bg-black bg-opacity-50 border border-white text-white fw-normal font-monospace backdrop-blur">
                            -- ms
                        </span>
                    </div>

                    <div>
                        <span id="liveBadge" class="badge bg-danger rounded-pill px-3 shadow-sm d-none pulse-live">
                            <i class="fas fa-circle me-1 small"></i> LIVE
                        </span>
                    </div>
                </div>

                <div class="scan-grid w-100 h-100 position-absolute top-0 start-0 opacity-25" style="pointer-events: none;"></div>

                <div class="position-absolute top-50 start-50 translate-middle d-none d-md-block opacity-50" style="pointer-events: none;">
                    <div style="width: 250px; height: 250px; border: 2px dashed rgba(255,255,255,0.4); border-radius: 20px;"></div>
                    <div style="width: 270px; height: 2px; background: rgba(255,255,255,0.2); position: absolute; top: 50%; left: -10px;"></div>
                    <div style="height: 270px; width: 2px; background: rgba(255,255,255,0.2); position: absolute; top: -10px; left: 50%;"></div>
                </div>

                <video id="video" autoplay playsinline class="w-100 h-100" style="object-fit: cover; display: none;"></video>
                <canvas id="canvas" class="w-100 h-100 position-absolute top-0 start-0" style="pointer-events: none;"></canvas>

                <div id="cameraPlaceholder" class="position-absolute top-50 start-50 translate-middle text-center text-white">
                    <div class="mb-3">
                        <i class="fas fa-video-slash fa-4x opacity-25"></i>
                    </div>
                    <h5 class="fw-bold opacity-75">Camera is Offline</h5>
                    <p class="small opacity-50">Click "Start Stream" to begin analysis.</p>
                </div>
            </div>

            <div class="card border-0 shadow-sm rounded-pill mb-4 px-4 py-3 bg-white">
                <div class="row align-items-center">
                    
                    <div class="col-4 d-none d-md-block">
                        <div class="d-flex align-items-center">
                            <div id="statusDot" class="rounded-circle bg-secondary me-2" style="width: 10px; height: 10px;"></div>
                            <span id="statusText" class="fw-bold text-muted small text-uppercase">Standby</span>
                        </div>
                    </div>

                    <div class="col-12 col-md-4 text-center">
                        <button id="toggleBtn" onclick="toggleStream()" class="btn btn-success rounded-pill px-5 py-2 shadow fw-bold w-100 w-md-auto">
                            <i class="fas fa-power-off me-2"></i> Start Stream
                        </button>
                    </div>

                    <div class="col-4 d-none d-md-block text-end">
                         <button class="btn btn-light rounded-circle border text-muted hover-effect" 
                                 type="button" 
                                 data-bs-toggle="collapse" 
                                 data-bs-target="#testTools" 
                                 title="Developer Tools"
                                 style="width: 40px; height: 40px;">
                            <i class="fas fa-flask"></i>
                         </button>
                    </div>
                </div>
            </div>

            <div class="collapse" id="testTools">
                <div class="card border-0 shadow-sm rounded-4 bg-light mb-5 border border-success border-opacity-10">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between mb-3">
                            <h6 class="fw-bold text-success mb-0"><i class="fas fa-vial me-2"></i>Developer Simulation Mode</h6>
                            <button type="button" class="btn-close" data-bs-toggle="collapse" data-bs-target="#testTools"></button>
                        </div>
                        <p class="small text-muted mb-3">Upload an image to test the detection logic without using the webcam.</p>
                        
                        <div class="row g-2 align-items-center">
                            
                            <div class="col-12 col-md"> 
                                <input type="file" id="testImageInput" accept="image/*" class="form-control rounded-pill border-0 shadow-sm">
                            </div>
                            
                            <div class="col-12 col-md-auto">
                                <button id="testBtn" onclick="startTestMode()" class="btn btn-primary rounded-pill px-4 fw-bold shadow-sm w-100">
                                    Run Test
                                </button>
                                <button id="stopTestBtn" onclick="stopTestMode()" class="btn btn-outline-danger rounded-pill px-4 shadow-sm w-100" style="display: none;">
                                    Stop
                                </button>
                            </div>
                            
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<style>
    /* Small CSS tweak for the blurred background effect on badges */
    .backdrop-blur {
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
    }
</style>

<script>
    // --- VARIABLES ---
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    
    // UI Elements
    const latencyTag = document.getElementById('latencyTag');
    const toggleBtn = document.getElementById('toggleBtn');
    const cameraPlaceholder = document.getElementById('cameraPlaceholder');
    const liveBadge = document.getElementById('liveBadge');
    const statusText = document.getElementById('statusText');
    const statusDot = document.getElementById('statusDot');

    // Ghost Canvas (Invisible) - Captures image for AI
    const ghostCanvas = document.createElement('canvas');
    const ghostCtx = ghostCanvas.getContext('2d');

    let isRunning = false;
    let isProcessing = false;
    let isTestMode = false;
    let testImage = null; 

    // Ensure canvas stays on top
    canvas.style.zIndex = "10"; 

    async function toggleStream() {
        if (isRunning) stopStream();
        else startStream();
    }

    function startStream() {
        detectionInterval = setInterval(() => {
            sendFrameToBackend();
        }, 100);

        navigator.mediaDevices.getUserMedia({ 
            video: { facingMode: 'environment', width: { ideal: 640 }, height: { ideal: 480 } } 
        })
        .then(stream => {
            video.srcObject = stream;
            video.onloadedmetadata = () => {
                // Setup dimensions
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                ghostCanvas.width = video.videoWidth;
                ghostCanvas.height = video.videoHeight;
                
                isRunning = true;
                
                // 🟢 UI UPDATE: CAMERA ON
                video.style.display = 'block';
                cameraPlaceholder.style.display = 'none';
                
                toggleBtn.innerHTML = '<i class="fas fa-stop me-2"></i> Stop Stream';
                toggleBtn.classList.replace('btn-success', 'btn-outline-danger');
                
                liveBadge.classList.remove('d-none');
                
                statusText.innerText = "Active Scan";
                statusText.classList.replace('text-muted', 'text-success');
                statusDot.classList.replace('bg-secondary', 'bg-success');
                statusDot.classList.add('pulse-live'); // Add blink effect to dot
                
                requestAnimationFrame(processFrame);
            };
        })
        .catch(err => {
            console.error("Camera Error:", err);
            alert("⛔ Camera access denied. Please allow permissions.");
        });
    }

    let detectionInterval = null; 

function stopStream() {
    isRunning = false;

    // 🛑 STOP THE BACKEND CALLS (Crucial Addition!)
    if (detectionInterval) {
        clearInterval(detectionInterval);
        detectionInterval = null;
    }

    if (video.srcObject) {
        video.srcObject.getTracks().forEach(track => track.stop());
    }
    video.srcObject = null;

    // 🔴 UI UPDATE: CAMERA OFF
    video.style.display = 'none';
    cameraPlaceholder.style.display = 'block'; // <--- This prevents the "Frozen Face"! Smart!
    
    toggleBtn.innerHTML = '<i class="fas fa-power-off me-2"></i> Start Stream';
    toggleBtn.classList.replace('btn-outline-danger', 'btn-success');
    
    liveBadge.classList.add('d-none');
    
    statusText.innerText = "Standby";
    statusText.classList.replace('text-success', 'text-muted');
    statusDot.classList.replace('bg-success', 'bg-secondary');
    statusDot.classList.remove('pulse-live');

    // Clear the canvas so no old boxes remain
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    latencyTag.innerText = "-- ms";
}

    async function processFrame() {
        if (!isRunning && !isTestMode) return;
        
        if (isProcessing) {
            requestAnimationFrame(processFrame);
            return;
        }

        isProcessing = true;
        const startTime = Date.now();

        try {
            // 1. Capture Frame
            if (isTestMode && testImage) {
                ghostCtx.drawImage(testImage, 0, 0, ghostCanvas.width, ghostCanvas.height);
            } else {
                ghostCtx.drawImage(video, 0, 0, ghostCanvas.width, ghostCanvas.height);
            }
            
            // 2. Send to AI
            const imageData = ghostCanvas.toDataURL('image/jpeg', 0.5); // Speed optimization
            const response = await fetch('/detect_objects', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ image_data: imageData })
            });

            const data = await response.json();

            // 3. Draw Results
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Helper function for Test Mode scaling
            function getScaledCoords(bbox) {
                let [x1, y1, x2, y2] = bbox;
                if (isTestMode && testImage && testImage.scaleX) {
                    x1 = x1 * testImage.scaleX + testImage.offsetX;
                    y1 = y1 * testImage.scaleY + testImage.offsetY;
                    x2 = x2 * testImage.scaleX + testImage.offsetX;
                    y2 = y2 * testImage.scaleY + testImage.offsetY;
                }
                return [x1, y1, x2, y2];
            }

            data.forEach(obj => {
                let [x1, y1, x2, y2] = getScaledCoords(obj.bbox);
                const width = x2 - x1;
                const height = y2 - y1;
                
                // 🎨 DRAW THE BOX (Sci-Fi Green)
                ctx.shadowColor = '#00E676';
                ctx.shadowBlur = 10;
                ctx.strokeStyle = '#00E676';
                ctx.lineWidth = 3;
                
                // Draw corners only (Optional fancy look) or full rect
                ctx.strokeRect(x1, y1, width, height);
                ctx.shadowBlur = 0; // Reset shadow for text

                // 🏷️ DRAW THE LABEL
                const label = `${obj.class} ${Math.round(obj.confidence * 100)}%`;
                ctx.font = 'bold 16px "Courier New", monospace';
                const textWidth = ctx.measureText(label).width;
                
                // Label Background
                ctx.fillStyle = 'rgba(0, 230, 118, 0.8)';
                ctx.fillRect(x1, y1 - 25, textWidth + 10, 25);
                
                // Label Text
                ctx.fillStyle = '#000';
                ctx.fillText(label, x1 + 5, y1 - 7);
            });

            // Update Latency
            const duration = Date.now() - startTime;
            latencyTag.innerText = `${duration} ms`;

        } catch (err) {
            console.error(err);
        } finally {
            isProcessing = false;
            if (isRunning) requestAnimationFrame(processFrame);
        }
    }

    // --- TEST MODE FUNCTIONS ---
    function startTestMode() {
        const fileInput = document.getElementById('testImageInput');
        if (!fileInput.files || !fileInput.files[0]) {
            alert('Please select an image first!');
            return;
        }

        const file = fileInput.files[0];
        const reader = new FileReader();
        
        reader.onload = function(e) {
            testImage = new Image();
            testImage.onload = function() {
                if (isRunning) stopStream();
                
                // Setup Canvas to match Container
                const container = document.querySelector('.bg-black'); // Find the main view box
                const containerW = container.clientWidth;
                const containerH = container.clientHeight;
                
                canvas.width = containerW;
                canvas.height = containerH;
                ghostCanvas.width = testImage.width;
                ghostCanvas.height = testImage.height;
                
                // Scale Logic (Contain)
                const scale = Math.min(containerW / testImage.width, containerH / testImage.height);
                const displayW = testImage.width * scale;
                const displayH = testImage.height * scale;
                const offX = (containerW - displayW) / 2;
                const offY = (containerH - displayH) / 2;

                // Create a background img element to show the user what they uploaded
                let displayImg = document.getElementById('testDisplayImg');
                if(!displayImg) {
                    displayImg = document.createElement('img');
                    displayImg.id = 'testDisplayImg';
                    displayImg.style.position = 'absolute';
                    displayImg.style.zIndex = '1'; // Behind canvas
                    container.appendChild(displayImg);
                }
                displayImg.src = e.target.result;
                displayImg.style.width = displayW + 'px';
                displayImg.style.height = displayH + 'px';
                displayImg.style.left = offX + 'px';
                displayImg.style.top = offY + 'px';
                displayImg.style.display = 'block';
                
                cameraPlaceholder.style.display = 'none';
                
                isTestMode = true;
                
                // We store scale info for drawing the boxes later
                testImage.scaleX = scale;
                testImage.scaleY = scale;
                testImage.offsetX = offX;
                testImage.offsetY = offY;

                document.getElementById('testBtn').style.display = 'none';
                document.getElementById('stopTestBtn').style.display = 'inline-block';
                toggleBtn.disabled = true;
                
                statusText.innerText = "Simulation Mode";
                statusText.classList.replace('text-muted', 'text-warning');
                statusDot.classList.replace('bg-secondary', 'bg-warning');

                // Run detection once
                setTimeout(() => requestAnimationFrame(processFrame), 100);
            };
            testImage.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function stopTestMode() {
        isTestMode = false;
        const displayImg = document.getElementById('testDisplayImg');
        if(displayImg) displayImg.style.display = 'none';
        
        cameraPlaceholder.style.display = 'block';
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        document.getElementById('testBtn').style.display = 'inline-block';
        document.getElementById('stopTestBtn').style.display = 'none';
        toggleBtn.disabled = false;
        
        statusText.innerText = "Standby";
        statusText.classList.replace('text-warning', 'text-muted');
        statusDot.classList.replace('bg-warning', 'bg-secondary');
        latencyTag.innerText = "-- ms";
    }
</script>
{% endblock %}
</file>

<file path="README.md">
# 🍌 RipeSense: Precision Fruit Ripeness Detection

**Student Name:** Gerald Tan Hock Soon  
**Matric Number:** 294879  
**Supervisor:** Suwannit Chareen Chit  
**Project:** STTZK3993 Final Year Project (Academic Project 1)

---

## 📖 Introduction
**RipeSense** is an AI-powered web application designed to reduce food waste and assist farmers, vendors, and consumers in making better harvesting and purchasing decisions. 

Using **YOLOv8** (You Only Look Once) and **OpenCV**, the system analyzes RGB images of fruits to classify their ripeness stages (Unripe, Ripe, Overripe) with high precision. It currently supports **Bananas, Mangoes, and Tomatoes**.

## 🚀 Key Features
* **Precision Ripeness Detection:** Instantly classifies fruit into three stages: Unripe, Ripe, or Overripe.
* **Expert Advice Engine:** Provides tailored tips on **Usage** (e.g., "Good for baking"), **Storage**, and **Shelf Life** based on the specific ripeness level.
* **Continuous Learning Loop:** Includes a "Report Error" feature allowing users to flag incorrect predictions, creating a feedback loop for future model retraining.
* **Safety First:** Automatically detects overripe fruits and warns users to check for mold/spoilage before consumption.
* **Digital Scan History:** Locally saves scan results for later reference and export.
* **Live Mode:** Real-time object detection using the device webcam.

## 🛠️ Tech Stack
* **Backend:** Python 3.10+, Flask
* **AI/ML:** Ultralytics YOLOv8 (Classification & Detection), OpenCV, NumPy
* **Frontend:** HTML5, Bootstrap 5, Jinja2 Templates
* **Data:** JSON-based local history tracking

## 📂 Project Structure
```text
RipeSense/
├── models/              # AI Models (YOLOv8 weights)
├── static/              # CSS, Images, Uploads
├── templates/           # HTML Frontend Pages
├── scripts/             # Testing & Evaluation scripts
├── archive/             # Old backups (Non-functional)
├── app.py               # Main Application Controller
├── history.json         # Scan Database
├── requirements.txt     # Python Dependencies
└── README.md            # Project Documentation
</file>

<file path="templates/history.html">
{% extends "base.html" %}
{% block title %}Scan History - RipeSense{% endblock %}

{% block content %}

<style>
    /* ✨ Custom Styles for this page */
    .fruit-link {
        color: #212529; /* Standard Dark Grey */
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        display: inline-flex;
        align-items: center;
        text-decoration: none;
    }
    .fruit-link:hover {
        color: #198754; /* Green on Hover */
        transform: translateX(5px);
    }
    
    .hover-scale { transition: transform 0.2s; }
    .hover-scale:hover { transform: scale(1.1); background-color: #f8d7da !important; }

    /* 🔎 Image Zoom Effect (Desktop) */
    .img-zoom {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: zoom-in;
    }
    .img-zoom:hover {
        transform: scale(1.5); /* Grows 1.5x bigger */
        z-index: 10;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2) !important;
    }

    /* 📏 PILL BADGE STYLING */
    .badge-fixed {
        min-width: 100px; /* Slightly wider for the pill shape */
        text-align: center;
        padding: 0.5em 1em !important; /* More padding for rounded edges */
        font-weight: 800 !important; /* Extra Bold */
        letter-spacing: 0.5px;
        border: 0 !important;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Pop effect */
    }

    /* Custom Purple Color */
    .bg-purple {
        background-color: #6f42c1 !important;
    }
    .border-purple {
        border-color: #6f42c1 !important;
    }

    /* Search Bar Styling */
    .search-box {
        border-color: #e9ecef;
        padding-left: 15px;
    }
    .search-box:focus {
        border-color: #198754;
        box-shadow: 0 0 0 0.25rem rgba(25, 135, 84, 0.25);
    }
</style>

<div class="container mt-4">
    <div class="row align-items-center mb-4 g-3">
        <div class="col-lg-5 text-center text-lg-start">
            <h2 class="fw-bold text-success mb-1">Scan History</h2>
            <p class="text-muted mb-0">Manage and analyze your past classification records.</p>
        </div>

        <div class="col-lg-7">
            <div class="d-flex flex-wrap justify-content-center justify-content-lg-end gap-2">
                <a href="{{ url_for('ripeness_detection') }}" class="btn btn-primary rounded-pill px-4 py-2 shadow-sm fw-bold">
                    <i class="fas fa-plus me-2"></i>Scan New
                </a>
                <a href="{{ url_for('export_history') }}" class="btn btn-success rounded-pill px-4 py-2 shadow-sm fw-bold">
                    <i class="fas fa-file-csv me-2"></i>Export CSV
                </a>
                <form action="{{ url_for('clear_history') }}" method="POST" class="d-inline" onsubmit="return confirm('Are you sure you want to delete all history?');">
                    <button type="submit" class="btn btn-danger rounded-pill px-4 py-2 shadow-sm fw-bold">
                        <i class="fas fa-trash-alt me-2"></i>Clear All
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div class="row mb-4 justify-content-center">
        <div class="col-md-12">
            <div class="card border-0 shadow-sm rounded-4 bg-white">
                <div class="card-body p-2">
                    <div class="row g-2 align-items-center">
                        <div class="col-md-8">
                            <div class="input-group">
                                <span class="input-group-text bg-transparent border-0 ps-3">
                                    <i class="fas fa-search text-muted"></i>
                                </span>
                                <input type="text" id="searchInput" class="form-control border-0 shadow-none search-box" 
                                       placeholder="Search by fruit name, date, or status..." 
                                       onkeyup="filterTable()">
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <select id="statusFilter" class="form-select border-0 bg-light rounded-pill px-3 fw-bold text-secondary cursor-pointer" 
                                    onchange="filterTable()" style="cursor: pointer;">
                                <option value="all">📊 All Statuses</option>
                                <option value="Ripe">✅ Ripe</option>
                                <option value="Unripe">🌿 Unripe</option>
                                <option value="Overripe">⚠️ Overripe</option>
                                <option value="Rejected">🚫 Rejected</option>
                                <option value="Flagged">🚩 Flagged Errors</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="d-none d-md-block">
        <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0 text-nowrap" id="historyTable">
                        <thead class="bg-light">
                            <tr>
                                <th class="py-3 ps-4 text-muted text-uppercase small fw-bold">Date</th>
                                <th class="py-3 ps-3 text-muted text-uppercase small fw-bold">Fruit Detected</th>
                                <th class="py-3 text-muted text-uppercase small fw-bold">Status</th>
                                <th class="py-3 text-muted text-uppercase small fw-bold">Confidence</th>
                                <th class="py-3 text-end pe-4">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if history %}
                                {% for entry in history %}
                                <tr class="desktop-row">
                                    <td class="py-3 ps-4 text-muted small">
                                        <i class="far fa-clock me-2"></i>{{ entry.timestamp }}
                                    </td>
                                    <td class="py-3 ps-3">
                                        <div class="d-flex align-items-center">
                                            <div style="width: 80px; height: 80px;" class="me-3">
                                                <img src="{{ url_for('static', filename='uploads/' + entry.file) }}" 
                                                     class="rounded-3 shadow-sm border img-zoom" 
                                                     style="width: 100%; height: 100%; object-fit: cover; background-color: #f8f9fa;"
                                                     alt="Scan"
                                                     data-bs-toggle="modal" data-bs-target="#fruitModal"
                                                     onclick="showDetails(this)"
                                                     data-fruit="{{ entry.fruit }}"
                                                     data-result="{{ entry.result }}"
                                                     data-confidence="{{ entry.confidence }}"
                                                     data-timestamp="{{ entry.timestamp }}"
                                                     data-image="{{ entry.file }}"
                                                     onerror="this.src='https://placehold.co/80x80?text=?'">
                                            </div>

                                            <div class="fruit-link fw-bold text-capitalize text-dark fs-5"
                                                 style="cursor: pointer;"
                                                 onclick="showDetails(this)"
                                                 data-fruit="{{ entry.fruit }}"
                                                 data-result="{{ entry.result }}"
                                                 data-confidence="{{ entry.confidence }}"
                                                 data-timestamp="{{ entry.timestamp }}"
                                                 data-image="{{ entry.file }}"
                                                 data-bs-toggle="modal" data-bs-target="#fruitModal">
                                                {{ entry.fruit }}
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td class="py-3">
                                        <div class="d-flex flex-column gap-2 align-items-start">
                                            {% if 'Rejected' in entry.result %}
                                                <span class="badge badge-fixed rounded-pill bg-secondary text-white">
                                                    REJECTED
                                                </span>
                                            {% elif 'Ripe' in entry.result and 'Unripe' not in entry.result %}
                                                <span class="badge badge-fixed rounded-pill bg-warning text-dark">
                                                    RIPE
                                                </span>
                                            {% elif 'Unripe' in entry.result %}
                                                <span class="badge badge-fixed rounded-pill bg-success text-white">
                                                    UNRIPE
                                                </span>
                                            {% else %}
                                                <span class="badge badge-fixed rounded-pill bg-danger text-white">
                                                    OVERRIPE
                                                </span>
                                            {% endif %}

                                            {% if entry.get('flagged') %}
                                                <span class="badge badge-fixed rounded-pill bg-purple text-white shadow-sm">
                                                    <i class="fas fa-flag me-1"></i> FLAGGED
                                                </span>
                                            {% endif %}
                                            </div>
                                    </td>
                                    
                                    <td class="py-3 fw-bold text-dark opacity-75">{{ entry.confidence }}</td>
                                    <td class="py-3 text-end pe-4">
                                        {% if not entry.get('flagged') %}
                                            <button type="button" class="btn btn-sm btn-white text-warning border shadow-sm rounded-circle hover-scale me-1" 
                                                    style="width: 35px; height: 35px;" onclick="confirmFlag('{{ entry.file }}')" data-bs-toggle="tooltip" title="Report Error">
                                                <i class="far fa-flag"></i>
                                            </button>
                                        {% else %}
                                            <button class="btn btn-sm btn-light text-muted border rounded-circle me-1" style="width: 35px; height: 35px;" disabled><i class="fas fa-check"></i></button>
                                        {% endif %}
                                        <button type="button" class="btn btn-sm btn-white text-danger border shadow-sm rounded-circle hover-scale" 
                                                style="width: 35px; height: 35px;" onclick="confirmDelete('{{ url_for('delete_item', filename=entry.file) }}')">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr id="emptyRow">
                                    <td colspan="5" class="text-center py-5">
                                        <div class="text-muted opacity-50 display-1 mb-3">
                                            <i class="fas fa-folder-open"></i>
                                        </div>
                                        <h5 class="fw-bold text-muted">No History Found</h5>
                                        <p class="text-muted small">Your scan results will appear here.</p>
                                        <a href="/ripeness_detection" class="btn btn-sm btn-outline-success rounded-pill mt-2">
                                            Start Scanning
                                        </a>
                                    </td>
                                </tr>
                            {% endif %}
                             <tr id="noResultsDesktop" style="display: none;">
                                <td colspan="5" class="text-center py-5">
                                    <h5 class="fw-bold text-muted">No matches found</h5>
                                    <p class="text-muted small">Try adjusting your filters.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="d-md-none" id="mobileHistoryContainer">
        {% if history %}
            {% for entry in history %}
            <div class="card border-0 shadow-sm rounded-4 mb-3 overflow-hidden mobile-card">
                <div class="card-body p-3">
                    <div class="d-flex align-items-center">
                        <img src="{{ url_for('static', filename='uploads/' + entry.file) }}" 
                             class="rounded-3 shadow-sm" 
                             style="width: 70px; height: 70px; object-fit: cover; background: #f0f0f0;">
                        
                        <div class="ms-3 flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="fw-bold text-dark text-capitalize mb-1">{{ entry.fruit }}</h6>
                                    
                                    <div class="d-flex flex-wrap gap-1">
                                        {% if 'Rejected' in entry.result %}
                                            <span class="badge rounded-pill bg-secondary text-white border border-secondary py-1 px-2" style="font-size: 0.7rem;">REJECTED</span>
                                        {% elif 'Ripe' in entry.result and 'Unripe' not in entry.result %}
                                            <span class="badge rounded-pill bg-warning text-dark border border-warning py-1 px-2" style="font-size: 0.7rem;">RIPE</span>
                                        {% elif 'Unripe' in entry.result %}
                                            <span class="badge rounded-pill bg-success text-white border border-success py-1 px-2" style="font-size: 0.7rem;">UNRIPE</span>
                                        {% else %}
                                            <span class="badge rounded-pill bg-danger text-white border border-danger py-1 px-2" style="font-size: 0.7rem;">OVERRIPE</span>
                                        {% endif %}

                                        {% if entry.get('flagged') %}
                                            <span class="badge rounded-pill bg-purple text-white border border-purple py-1 px-2 shadow-sm" style="font-size: 0.7rem;">
                                                <i class="fas fa-flag"></i> FLAGGED
                                            </span>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <div class="d-flex gap-1">
                                    {% if not entry.get('flagged') %}
                                        <button class="btn btn-sm btn-light text-warning border rounded-circle" style="width: 32px; height: 32px;" onclick="confirmFlag('{{ entry.file }}')">
                                            <i class="far fa-flag"></i>
                                        </button>
                                    {% else %}
                                        <button class="btn btn-sm btn-light text-success border rounded-circle" style="width: 32px; height: 32px;" disabled>
                                            <i class="fas fa-check-circle"></i>
                                        </button>
                                    {% endif %}
                                    <button class="btn btn-sm btn-light text-danger border rounded-circle" style="width: 32px; height: 32px;" onclick="confirmDelete('{{ url_for('delete_item', filename=entry.file) }}')">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <small class="text-muted" style="font-size: 0.75rem;"><i class="far fa-clock me-1"></i>{{ entry.timestamp.split('·')[0] }}</small>
                                <small class="fw-bold text-primary" style="font-size: 0.75rem;">{{ entry.confidence }}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            
            <div id="noResultsMobile" class="text-center py-5" style="display: none;">
                <h5 class="fw-bold text-muted">No matches found</h5>
                <p class="text-muted small">Try adjusting your filters.</p>
            </div>

        {% else %}
            <div class="text-center py-5">
                <div class="text-muted opacity-50 display-1 mb-3"><i class="fas fa-folder-open"></i></div>
                <h5 class="fw-bold text-muted">No History Found</h5>
            </div>
        {% endif %}
    </div>

</div> <div class="modal fade" id="fruitModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4 overflow-hidden">
      <div class="position-relative bg-dark text-center" style="min-height: 250px;">
        <img id="modalImage" src="" class="img-fluid w-100" style="max-height: 500px; object-fit: contain;">
        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3 shadow-none" data-bs-dismiss="modal"></button>
        <div class="position-absolute bottom-0 start-0 m-3">
            <span class="badge bg-black bg-opacity-50 border border-secondary fw-normal" id="modalTimestamp">--</span>
        </div>
      </div>
      <div class="modal-body p-4 text-center bg-white">
        <h3 class="fw-bold mb-3 text-uppercase" id="modalFruit">Fruit Name</h3>
        <div class="d-flex justify-content-center gap-3">
            <div class="px-4 py-2 bg-light rounded-pill border">
                <small class="text-muted text-uppercase fw-bold" style="font-size: 0.65rem;">Result</small>
                <div id="modalResult" class="fw-bold fs-5">--</div>
            </div>
            <div class="px-4 py-2 bg-light rounded-pill border">
                <small class="text-muted text-uppercase fw-bold" style="font-size: 0.65rem;">Confidence</small>
                <div id="modalConfidence" class="fw-bold fs-5 text-dark">--</div>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4 overflow-hidden">
      <div class="modal-header border-0 bg-danger text-white">
        <h5 class="modal-title fw-bold"><i class="fas fa-exclamation-triangle me-2"></i>Delete Record?</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4 text-center">
        <div class="mb-3">
            <span class="fa-stack fa-2x text-danger opacity-75">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fas fa-trash-alt fa-stack-1x fa-inverse"></i>
            </span>
        </div>
        <h5 class="fw-bold text-dark">Are you sure?</h5>
        <p class="text-muted small mb-0">This action cannot be undone.</p>
      </div>
      <div class="modal-footer border-0 bg-light p-3 justify-content-center gap-2">
        <button type="button" class="btn btn-outline-secondary rounded-pill px-4" data-bs-dismiss="modal">Cancel</button>
        <form id="deleteForm" method="POST">
            <button type="submit" class="btn btn-danger rounded-pill px-4 shadow-sm fw-bold">Yes, Delete It</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="flagModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg rounded-4 overflow-hidden">
            <div class="modal-header bg-warning text-dark border-0">
                <h5 class="modal-title fw-bold"><i class="fas fa-exclamation-triangle me-2"></i>Report Issue</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4 text-center">
                <div class="mb-3">
                    <span class="fa-stack fa-2x text-warning">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-flag fa-stack-1x fa-inverse"></i>
                    </span>
                </div>
                <h5 class="fw-bold text-dark">Flag this scan?</h5>
                <p class="text-muted small mb-0">
                    This marks the result as incorrect so we can improve the AI.
                    <br><strong>Are you sure?</strong>
                </p>
            </div>
            <div class="modal-footer border-0 bg-light p-3 justify-content-center gap-2">
                <button type="button" class="btn btn-outline-secondary rounded-pill px-4" data-bs-dismiss="modal">Cancel</button>
                <form id="flagForm" action="" method="POST">
                    <button type="submit" class="btn btn-warning rounded-pill px-4 shadow-sm fw-bold">Yes, Flag It</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // 🔍 FIXED SEARCH & FILTER LOGIC (WORKS FOR DESKTOP AND MOBILE)
    function filterTable() {
        const input = document.getElementById("searchInput").value.toLowerCase();
        const statusFilter = document.getElementById("statusFilter").value;

        // --- 1. DESKTOP FILTERING ---
        const desktopRows = document.getElementsByClassName("desktop-row");
        const noResultsDesktop = document.getElementById("noResultsDesktop");
        let desktopVisibleCount = 0;

        for (let row of desktopRows) {
            // Get all text content from the row for simple searching
            const rowText = row.textContent.toLowerCase();
            const statusCell = row.cells[2].textContent.trim(); // Column 2 is Status

            const matchesSearch = rowText.includes(input);
            let matchesStatus = true;
            if (statusFilter !== 'all') {
                // If filter is "Flagged", look for the error badge
                if (statusFilter === 'Flagged') {
                    matchesStatus = statusCell.includes("FLAGGED");
                } else {
                    matchesStatus = statusCell.includes(statusFilter.toUpperCase());
                }
            }

            if (matchesSearch && matchesStatus) {
                row.style.display = "";
                desktopVisibleCount++;
            } else {
                row.style.display = "none";
            }
        }
        // Toggle Desktop No Results
        if (noResultsDesktop) {
            noResultsDesktop.style.display = (desktopVisibleCount === 0 && desktopRows.length > 0) ? "" : "none";
        }

        // --- 2. MOBILE FILTERING ---
        const mobileCards = document.getElementsByClassName("mobile-card");
        const noResultsMobile = document.getElementById("noResultsMobile");
        let mobileVisibleCount = 0;

        for (let card of mobileCards) {
            const cardText = card.textContent.toLowerCase();
            
            const matchesSearch = cardText.includes(input);
            let matchesStatus = true;
            
            if (statusFilter !== 'all') {
                 // Check if the card text contains the specific status keyword
                 matchesStatus = cardText.toUpperCase().includes(statusFilter.toUpperCase());
                 if (statusFilter === 'Flagged') {
                     matchesStatus = cardText.toUpperCase().includes("FLAGGED");
                 }
            }

            if (matchesSearch && matchesStatus) {
                card.style.display = "";
                mobileVisibleCount++;
            } else {
                card.style.display = "none";
            }
        }
        // Toggle Mobile No Results
        if (noResultsMobile) {
            noResultsMobile.style.display = (mobileVisibleCount === 0 && mobileCards.length > 0) ? "" : "none";
        }
    }

    // 📋 MODAL LOGIC
    function showDetails(element) {
        document.getElementById('modalFruit').innerText = element.getAttribute('data-fruit');
        document.getElementById('modalTimestamp').innerText = element.getAttribute('data-timestamp');
        document.getElementById('modalConfidence').innerText = element.getAttribute('data-confidence');
        document.getElementById('modalImage').src = "/static/uploads/" + element.getAttribute('data-image');
        
        const result = element.getAttribute('data-result');
        const resultEl = document.getElementById('modalResult');
        resultEl.innerText = result;
        
        resultEl.className = "fw-bold fs-5";
        if (result === 'Ripe') resultEl.classList.add('text-warning');
        else if (result === 'Unripe') resultEl.classList.add('text-success');
        else if (result.includes('Rejected')) resultEl.classList.add('text-secondary');
        else resultEl.classList.add('text-danger');
    }

    function confirmDelete(deleteUrl) {
        const deleteForm = document.getElementById('deleteForm');
        deleteForm.action = deleteUrl;
        const myModal = new bootstrap.Modal(document.getElementById('deleteModal'));
        myModal.show();
    }
    
    function confirmFlag(filename) {
        const form = document.getElementById('flagForm');
        form.action = '/report_error/' + filename;
        const myModal = new bootstrap.Modal(document.getElementById('flagModal'));
        myModal.show();
    }
</script>

{% endblock %}
</file>

<file path="templates/base.html">
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>{% block title %}RipeSense | AI Fruit Detection{% endblock %}</title>
    
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
    /* Fix for phone status bar overlap */
    .navbar {
        padding-top: env(safe-area-inset-top) !important;
        /* Fallback for older browsers */
        padding-top: max(15px, env(safe-area-inset-top)) !important;
        /* Ensure navbar is tall enough */
        min-height: 80px;
        align-items: flex-end;
        padding-bottom: 10px;
    }
    
    /* Push the logo and menu button down slightly so they are easier to tap */
    .navbar-brand, .navbar-toggler, .btn-outline-light {
        margin-top: 5px;
    }
    </style>
    
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/icon.png') }}">
    <meta name="theme-color" content="#2E7D32">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <img src="{{ url_for('static', filename='/images/icon.png') }}" 
                 alt="Logo" 
                 class="rounded-circle me-2"
                 style="width: 40px; height: 40px; object-fit: cover;">
            RipeSense
        </a>
        
        <div class="d-flex align-items-center gap-2">
            <button class="btn btn-sm btn-outline-light rounded-circle p-0" 
        data-bs-toggle="modal" 
        data-bs-target="#helpModal"
        style="width: 35px; height: 35px; display: flex; align-items: center; justify-content: center;">
    <i class="fas fa-question"></i>
</button>

            <button class="navbar-toggler border-0 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto p-2 p-lg-0">
    <li class="nav-item w-100">
        <a class="nav-link py-3 px-3 {{ 'active' if request.path == '/' else '' }}" href="/">
            <i class="fas fa-home me-2"></i> Home
        </a>
    </li>

    <li class="nav-item w-100">
        <a class="nav-link py-3 px-3 {{ 'active' if request.path == '/ripeness_detection' else '' }}" href="/ripeness_detection">
            <i class="fas fa-expand me-2"></i> Analyze Fruit
        </a>
    </li>

    <li class="nav-item w-100">
        <a class="nav-link py-3 px-3 {{ 'active' if request.path == '/fruit_detection' else '' }}" href="/fruit_detection">
            <i class="fas fa-video me-2"></i> Live Mode
        </a>
    </li>

    <li class="nav-item w-100">
        <a class="nav-link py-3 px-3 {{ 'active' if request.path == '/history' else '' }}" href="/history">
            <i class="fas fa-history me-2"></i> Scan History
        </a>
    </li>
</ul>
        </div>
      </div>
    </nav>

    <div style="height: 100px;"></div>

    <main style="padding-top: 3.5rem;">
        <div class="container">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show shadow-sm rounded-4" role="alert">
                            {% if category == 'danger' %}
                                <i class="fas fa-exclamation-circle me-2"></i>
                            {% elif category == 'success' %}
                                <i class="fas fa-check-circle me-2"></i>
                            {% else %}
                                <i class="fas fa-info-circle me-2"></i>
                            {% endif %}
                            <strong>{{ message }}</strong>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>

        {% block content %}{% endblock %}
    </main>

    <div class="modal fade" id="helpModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg rounded-4">
                <div class="modal-header bg-success text-white border-0">
                    <h5 class="modal-title fw-bold"><i class="fas fa-book-open me-2"></i>User Guide</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <h6 class="fw-bold text-success mb-3">How to get 97% Accuracy:</h6>
                    
                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-light rounded-circle p-2 me-3 text-success fw-bold">1</div>
                        <div>
                            <span class="fw-bold d-block">Clean Background</span>
                            <small class="text-muted">Place the fruit on a white or plain surface (paper, table).</small>
                        </div>
                    </div>

                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-light rounded-circle p-2 me-3 text-success fw-bold">2</div>
                        <div>
                            <span class="fw-bold d-block">Good Lighting</span>
                            <small class="text-muted">Avoid heavy shadows. Natural light works best.</small>
                        </div>
                    </div>

                    <div class="d-flex align-items-start mb-3">
                        <div class="bg-light rounded-circle p-2 me-3 text-success fw-bold">3</div>
                        <div>
                            <span class="fw-bold d-block">One at a Time</span>
                            <small class="text-muted">For best results, scan one fruit (Banana, Mango, or Tomato) at a time.</small>
                        </div>
                    </div>
                    
                    <hr>
                    <div class="text-center">
                        <small class="text-muted">Developed by <strong>Gerald Tan (294879)</strong></small>
                    </div>
                </div>
                <div class="modal-footer border-0 p-0 pb-3 pe-3">
                    <button type="button" class="btn btn-light rounded-pill px-4" data-bs-dismiss="modal">Got it!</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-white pt-5 pb-4 mt-5 border-top">
        <div class="container text-center text-md-start">
            <div class="row text-center text-md-start">
                <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 fw-bold text-success"><i class="fas fa-leaf me-2"></i>RipeSense AI</h5>
                    <p class="text-muted small">Advancing sustainable agriculture through computer vision and deep learning technologies.</p>
                </div>
                <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 fw-bold">Tech Stack</h6>
                    <p><span class="text-muted small">Python Flask</span></p>
                    <p><span class="text-muted small">YOLOv8</span></p>
                    <p><span class="text-muted small">OpenCV</span></p>
                </div>
                <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 fw-bold">Project</h6>
                    <p><a href="/history" class="text-muted text-decoration-none small">Scan History</a></p>
                    <p><a href="/ripeness_detection" class="text-muted text-decoration-none small">Analyze Fruit</a></p>
                    <p><a href="/model_stats" class="text-muted text-decoration-none small fw-bold text-success">Model Performance</a></p>
                </div>
                <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                    <h6 class="text-uppercase mb-4 fw-bold">Contact</h6>
                    <p class="small text-muted"><i class="fas fa-university me-2"></i> Universiti Utara Malaysia </p>
                    <p class="small text-muted"><i class="fas fa-envelope me-2"></i> geraldtanhocksoon@gmail.com</p>
                </div>
            </div>
            <hr class="my-3">
            <div class="text-center p-3 small text-muted">© 2025 RipeSense Project. All rights reserved.</div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register("{{ url_for('static', filename='sw.js') }}");
        });
      }
    </script>
</body>
</html>
</file>

<file path="history.json">
[
    {
        "timestamp": "2025-12-10 23:32:41",
        "file": "unnamed__44_-removebg-preview.png",
        "fruit": "Unknown Fruit",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-10 23:38:07",
        "file": "bananna.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.3%"
    },
    {
        "timestamp": "2025-12-10 23:38:18",
        "file": "unnamed__44_-removebg-preview.png",
        "fruit": "Unknown Fruit",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-10 23:43:42",
        "file": "bananna.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.3%"
    },
    {
        "timestamp": "2025-12-10 23:53:48",
        "file": "bananna.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.3%"
    },
    {
        "timestamp": "2025-12-11 00:43:06",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 00:47:12",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:02:01",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:06:40",
        "file": "1000122838.jpg",
        "fruit": "Ripe Banana",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-11 01:09:43",
        "file": "download_3.jpg",
        "fruit": "Ripe Mango",
        "result": "Overripe",
        "confidence": "85.0%"
    },
    {
        "timestamp": "2025-12-11 01:13:54",
        "file": "download_3.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:14:03",
        "file": "tomato.jpg",
        "fruit": "Unidentified Fruit",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:14:25",
        "file": "9921387.png",
        "fruit": "Raw Banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:14:37",
        "file": "unnamed__44_-removebg-preview.png",
        "fruit": "Unidentified Fruit",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-11 01:15:26",
        "file": "house.jpg",
        "fruit": "Unidentified Fruit",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-11 01:15:40",
        "file": "download_3.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:15:46",
        "file": "tomato.jpg",
        "fruit": "Unidentified Fruit",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:23:56",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:24:03",
        "file": "download_3.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:26:24",
        "file": "download_3.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:26:40",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:30:29",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-11 01:32:28",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.0%"
    },
    {
        "timestamp": "2025-12-11 01:32:42",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.0%"
    },
    {
        "timestamp": "2025-12-11 01:32:48",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Unripe",
        "confidence": "88.0%"
    },
    {
        "timestamp": "2025-12-11 01:34:48",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:44:24",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:44:37",
        "file": "download_3.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:47:32",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:54:21",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:54:39",
        "file": "bananna.jpeg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-11 01:57:19",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 01:58:51",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 02:02:17",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 02:14:23",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 03:47:08",
        "file": "tomato.jpg",
        "fruit": "hip",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-11 03:51:08",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-11 03:55:09",
        "file": "tomato.jpg",
        "fruit": "Tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-15 13:28:30",
        "file": "ot16.jpg",
        "fruit": "strawberry",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-15 13:29:29",
        "file": "b2.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-15 13:31:33",
        "file": "ob13.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.0%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-15 13:32:26",
        "file": "m10.jpg",
        "fruit": "spaghetti_squash",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-15 13:34:32",
        "file": "um10.jpg",
        "fruit": "jackfruit",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-15 13:35:58",
        "file": "um10.jpg",
        "fruit": "jackfruit",
        "result": "Unripe",
        "confidence": "92.0%"
    },
    {
        "timestamp": "2025-12-15 13:36:09",
        "file": "house.jpg",
        "fruit": "mobile_home",
        "result": "Unripe",
        "confidence": "92.0%"
    },
    {
        "timestamp": "2025-12-15 13:37:42",
        "file": "um10.jpg",
        "fruit": "lemon",
        "result": "Unripe",
        "confidence": "92.0%"
    },
    {
        "timestamp": "2025-12-15 13:38:00",
        "file": "ot18.jpg",
        "fruit": "bell_pepper",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-15 13:38:16",
        "file": "ot10.jpg",
        "fruit": "bell_pepper",
        "result": "Unripe",
        "confidence": "95.0%"
    },
    {
        "timestamp": "2025-12-15 13:38:32",
        "file": "ut7.jpg",
        "fruit": "bell_pepper",
        "result": "Unripe",
        "confidence": "95.0%"
    },
    {
        "timestamp": "2025-12-15 13:38:42",
        "file": "ub16.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "95.0%"
    },
    {
        "timestamp": "2025-12-18 02:10:31",
        "file": "ob14.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-18 02:33:03",
        "file": "green_banana.jpg",
        "fruit": "unripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:33:27",
        "file": "ob18.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:34:59",
        "file": "ob18.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:35:13",
        "file": "ub13.jpg",
        "fruit": "unripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:35:29",
        "file": "green_banana.jpg",
        "fruit": "unripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:36:02",
        "file": "green_banana.jpg",
        "fruit": "unripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:41:19",
        "file": "green_banana.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:41:34",
        "file": "ob18.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:41:48",
        "file": "ob14.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:46:09",
        "file": "ob14.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:46:19",
        "file": "ob18.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:46:31",
        "file": "ub3.jpg",
        "fruit": "unripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:47:05",
        "file": "ub15.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:47:16",
        "file": "ob5.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:47:47",
        "file": "ob18.jpg",
        "fruit": "overripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:48:26",
        "file": "ub16.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:48:35",
        "file": "ub1.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:48:46",
        "file": "green_banana.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:49:17",
        "file": "ub10.jpg",
        "fruit": "unripe_banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:51:18",
        "file": "ub10.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:51:26",
        "file": "ub3.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 02:51:41",
        "file": "tomato.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:52:32",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 02:56:36",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 02:57:10",
        "file": "download_4.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:03:02",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:17:59",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:19:43",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:20:41",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:21:34",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:26:05",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:30:59",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:39:53",
        "file": "images_2.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:41:02",
        "file": "images_2.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:44:42",
        "file": "ob18.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:44:51",
        "file": "ob6.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:47:55",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:48:07",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:49:34",
        "file": "green_banana.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 03:50:26",
        "file": "om15.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:50:43",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 03:50:56",
        "file": "ut10.jpg",
        "fruit": "unripe_tomato",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-18 03:51:06",
        "file": "ot18.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:51:14",
        "file": "ot10.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:52:04",
        "file": "ot10.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:52:28",
        "file": "images_1.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:53:21",
        "file": "Untitled_design_2.png",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-18 03:53:34",
        "file": "download_4.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:56:02",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 03:59:19",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 04:16:19",
        "file": "icon4.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-18 04:16:46",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-18 04:16:50",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:47:12",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:47:25",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:51:08",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:52:32",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:52:49",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:54:29",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:55:25",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:56:10",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:56:23",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:58:13",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 01:59:41",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:01:55",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:05:11",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:05:31",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:05:42",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:07:02",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:08:41",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:09:00",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:11:20",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:11:51",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:12:33",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:18:25",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:18:45",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:19:05",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:19:23",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:20:03",
        "file": "ub3.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:22:49",
        "file": "ub3.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:24:14",
        "file": "ub6.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:26:02",
        "file": "ub6.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:26:15",
        "file": "ob12.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:26:27",
        "file": "b16.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:26:50",
        "file": "b16.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:26:59",
        "file": "ob18.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-19 02:27:10",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:27:26",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:27:44",
        "file": "ub13.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-19 02:27:54",
        "file": "ub1.jpg",
        "fruit": "unripe_banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-19 02:28:08",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:30:14",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:30:41",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:32:47",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:33:52",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:34:04",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:34:29",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:34:38",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:34:57",
        "file": "ub10.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-19 02:35:11",
        "file": "ub14.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:35:22",
        "file": "ub6.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:38:55",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:38:59",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:43:27",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:45:23",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:45:37",
        "file": "ub10.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:45:56",
        "file": "ob9.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-19 02:46:37",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:46:48",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:46:59",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:47:11",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:47:23",
        "file": "om14.jpg",
        "fruit": "tomato",
        "result": "Ripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-19 02:49:44",
        "file": "om16.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:50:12",
        "file": "om14.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:50:21",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:51:00",
        "file": "a99ca1355d867dee19fb4f379c6af02d.jpg",
        "fruit": "unripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:53:20",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 02:53:42",
        "file": "overtomato.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:54:25",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:54:37",
        "file": "ot17.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:55:36",
        "file": "t8.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 02:55:52",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:57:13",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:58:27",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:59:13",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 02:59:31",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:00:10",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:00:59",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 03:02:10",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 03:03:15",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:06:32",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:06:53",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:10:05",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:11:28",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:14:05",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:14:11",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:14:51",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:18:30",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:19:06",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 03:42:38",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.9%"
    },
    {
        "timestamp": "2025-12-19 03:43:06",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "95.8%"
    },
    {
        "timestamp": "2025-12-19 03:43:09",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "94.4%"
    },
    {
        "timestamp": "2025-12-19 03:47:24",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "96.1%"
    },
    {
        "timestamp": "2025-12-19 03:48:12",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-19 03:48:29",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "89.0%"
    },
    {
        "timestamp": "2025-12-19 03:48:38",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "95.9%"
    },
    {
        "timestamp": "2025-12-19 03:59:49",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-19 04:01:18",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "89.4%"
    },
    {
        "timestamp": "2025-12-19 04:01:35",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "93.4%"
    },
    {
        "timestamp": "2025-12-19 04:03:18",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.7%"
    },
    {
        "timestamp": "2025-12-19 04:04:25",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.8%"
    },
    {
        "timestamp": "2025-12-19 04:05:39",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.2%"
    },
    {
        "timestamp": "2025-12-19 04:05:53",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "96.8%"
    },
    {
        "timestamp": "2025-12-19 04:07:09",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "98.5%"
    },
    {
        "timestamp": "2025-12-19 04:07:55",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "98.2%"
    },
    {
        "timestamp": "2025-12-19 04:09:32",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "96.0%"
    },
    {
        "timestamp": "2025-12-19 04:10:02",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "92.7%"
    },
    {
        "timestamp": "2025-12-19 04:12:24",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "94.8%"
    },
    {
        "timestamp": "2025-12-19 04:14:55",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "95.7%"
    },
    {
        "timestamp": "2025-12-19 04:15:19",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "92.6%"
    },
    {
        "timestamp": "2025-12-19 04:15:29",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-19 04:16:05",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "91.1%"
    },
    {
        "timestamp": "2025-12-19 04:16:21",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "93.6%"
    },
    {
        "timestamp": "2025-12-19 04:16:59",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "95.9%"
    },
    {
        "timestamp": "2025-12-19 04:17:34",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-19 04:18:33",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "86.9%"
    },
    {
        "timestamp": "2025-12-19 04:18:56",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "90.2%"
    },
    {
        "timestamp": "2025-12-19 04:19:22",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.9%"
    },
    {
        "timestamp": "2025-12-19 04:19:35",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.9%"
    },
    {
        "timestamp": "2025-12-19 04:20:17",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "96.6%"
    },
    {
        "timestamp": "2025-12-19 04:22:33",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "91.7%"
    },
    {
        "timestamp": "2025-12-19 04:23:07",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "92.7%"
    },
    {
        "timestamp": "2025-12-19 04:23:11",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.3%"
    },
    {
        "timestamp": "2025-12-19 04:26:05",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "95.5%"
    },
    {
        "timestamp": "2025-12-19 04:26:54",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "92.2%"
    },
    {
        "timestamp": "2025-12-19 04:30:33",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "93.1%"
    },
    {
        "timestamp": "2025-12-19 04:31:02",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "92.5%"
    },
    {
        "timestamp": "2025-12-19 04:32:26",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "90.3%"
    },
    {
        "timestamp": "2025-12-19 04:32:40",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "90.2%"
    },
    {
        "timestamp": "2025-12-19 04:33:36",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "94.4%"
    },
    {
        "timestamp": "2025-12-19 04:34:31",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "94.8%"
    },
    {
        "timestamp": "2025-12-19 04:35:27",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "96.4%"
    },
    {
        "timestamp": "2025-12-19 04:36:35",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "96.0%"
    },
    {
        "timestamp": "2025-12-19 04:39:04",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "96.2%"
    },
    {
        "timestamp": "2025-12-19 04:42:13",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "96.6%"
    },
    {
        "timestamp": "2025-12-19 04:43:27",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "93.0%"
    },
    {
        "timestamp": "2025-12-19 04:43:50",
        "file": "ub5.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "95.4%"
    },
    {
        "timestamp": "2025-12-19 04:44:00",
        "file": "ob16.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.8%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 04:45:22",
        "file": "ob16.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.1%"
    },
    {
        "timestamp": "2025-12-19 04:45:56",
        "file": "ob16.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.6%"
    },
    {
        "timestamp": "2025-12-19 04:47:09",
        "file": "ob16.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "87.4%"
    },
    {
        "timestamp": "2025-12-19 04:50:55",
        "file": "ob16.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.6%"
    },
    {
        "timestamp": "2025-12-19 04:52:56",
        "file": "ob16.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.4%"
    },
    {
        "timestamp": "2025-12-19 04:53:11",
        "file": "ob13.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "97.2%"
    },
    {
        "timestamp": "2025-12-19 04:55:26",
        "file": "ob6.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "94.9%"
    },
    {
        "timestamp": "2025-12-19 04:56:20",
        "file": "ob6.jpg",
        "fruit": "banana",
        "result": "Ripe",
        "confidence": "95.6%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 05:02:37",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "90.4%"
    },
    {
        "timestamp": "2025-12-19 14:40:22",
        "file": "apple11.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "94.9%"
    },
    {
        "timestamp": "2025-12-19 14:40:37",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 14:40:47",
        "file": "apple1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "92.6%"
    },
    {
        "timestamp": "2025-12-19 14:42:08",
        "file": "apple11.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "91.3%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 14:43:10",
        "file": "apple11.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "94.0%"
    },
    {
        "timestamp": "2025-12-19 14:44:08",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "97.0%"
    },
    {
        "timestamp": "2025-12-19 14:45:34",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "96.0%"
    },
    {
        "timestamp": "2025-12-19 14:45:59",
        "file": "house.jpg",
        "fruit": "mobile_home",
        "result": "Overripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-19 14:47:42",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "93.3%"
    },
    {
        "timestamp": "2025-12-19 14:49:27",
        "file": "ob5.jpg",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "90.1%"
    },
    {
        "timestamp": "2025-12-19 14:52:31",
        "file": "um5.jpg",
        "fruit": "unripe_mango",
        "result": "Unripe",
        "confidence": "92.5%"
    },
    {
        "timestamp": "2025-12-19 14:52:44",
        "file": "apple11.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "96.6%"
    },
    {
        "timestamp": "2025-12-19 14:56:46",
        "file": "overmango.jpg",
        "fruit": "Unknown",
        "result": "Unripe",
        "confidence": "91.1%"
    },
    {
        "timestamp": "2025-12-19 14:58:05",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "94.6%"
    },
    {
        "timestamp": "2025-12-19 14:58:20",
        "file": "apple11.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-19 14:59:20",
        "file": "apple11.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "89.7%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 15:02:21",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "93.2%"
    },
    {
        "timestamp": "2025-12-19 15:02:37",
        "file": "overtomato1.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "95.0%"
    },
    {
        "timestamp": "2025-12-19 15:03:55",
        "file": "um5.jpg",
        "fruit": "unripe_mango",
        "result": "Unripe",
        "confidence": "93.1%"
    },
    {
        "timestamp": "2025-12-19 15:07:29",
        "file": "um5.jpg",
        "fruit": "unripe_mango",
        "result": "Unripe",
        "confidence": "90.3%"
    },
    {
        "timestamp": "2025-12-19 15:07:59",
        "file": "om15.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "90.0%"
    },
    {
        "timestamp": "2025-12-19 15:08:50",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "95.2%"
    },
    {
        "timestamp": "2025-12-19 15:10:30",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.1%"
    },
    {
        "timestamp": "2025-12-19 15:10:59",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "95.4%"
    },
    {
        "timestamp": "2025-12-19 15:13:02",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "90.3%"
    },
    {
        "timestamp": "2025-12-19 15:42:14",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.3%"
    },
    {
        "timestamp": "2025-12-19 15:42:24",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "91.4%"
    },
    {
        "timestamp": "2025-12-19 15:44:03",
        "file": "overmango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "96.5%"
    },
    {
        "timestamp": "2025-12-19 15:44:26",
        "file": "overbanan1.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "95.9%"
    },
    {
        "timestamp": "2025-12-19 15:44:54",
        "file": "tomato1.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "95.7%"
    },
    {
        "timestamp": "2025-12-19 15:45:53",
        "file": "green_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.5%"
    },
    {
        "timestamp": "2025-12-19 15:49:22",
        "file": "ripe_tomato.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "92.2%"
    },
    {
        "timestamp": "2025-12-19 15:49:30",
        "file": "ripe_mango.jpg",
        "fruit": "ripe_mango",
        "result": "Ripe",
        "confidence": "95.8%"
    },
    {
        "timestamp": "2025-12-19 15:49:40",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.6%"
    },
    {
        "timestamp": "2025-12-19 15:51:20",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.1%"
    },
    {
        "timestamp": "2025-12-19 15:51:51",
        "file": "unripe_mango.jpg",
        "fruit": "unripe_mango",
        "result": "Ripe",
        "confidence": "95.7%"
    },
    {
        "timestamp": "2025-12-19 15:52:23",
        "file": "unripe_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "93.7%"
    },
    {
        "timestamp": "2025-12-19 15:52:37",
        "file": "unripe_mango.jpg",
        "fruit": "unripe_mango",
        "result": "Ripe",
        "confidence": "97.2%"
    },
    {
        "timestamp": "2025-12-19 15:53:01",
        "file": "um2.jpg",
        "fruit": "unripe_mango",
        "result": "Unripe",
        "confidence": "93.1%"
    },
    {
        "timestamp": "2025-12-19 16:00:29",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "87.9%"
    },
    {
        "timestamp": "2025-12-19 16:02:02",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.9%"
    },
    {
        "timestamp": "2025-12-19 16:03:35",
        "file": "overripe_banana.jpg",
        "fruit": "overripe_banana",
        "result": "Overripe",
        "confidence": "96.2%"
    },
    {
        "timestamp": "2025-12-19 16:03:54",
        "file": "unripe_tomato.jpg",
        "fruit": "unripe_tomato",
        "result": "Ripe",
        "confidence": "93.3%"
    },
    {
        "timestamp": "2025-12-19 16:04:27",
        "file": "unripe_mango.jpg",
        "fruit": "unripe_mango",
        "result": "Ripe",
        "confidence": "94.6%"
    },
    {
        "timestamp": "2025-12-19 16:04:49",
        "file": "ripe_mango.jpg",
        "fruit": "ripe_mango",
        "result": "Ripe",
        "confidence": "95.7%"
    },
    {
        "timestamp": "2025-12-19 16:05:17",
        "file": "overripe_mango.jpg",
        "fruit": "overripe_mango",
        "result": "Overripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-19 16:05:30",
        "file": "unripe_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "87.6%"
    },
    {
        "timestamp": "2025-12-19 16:06:25",
        "file": "ripe_tomato.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "97.8%"
    },
    {
        "timestamp": "2025-12-19 16:06:45",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Ripe",
        "confidence": "92.8%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 16:06:58",
        "file": "unripe_mango_error.jpg",
        "fruit": "unripe_mango",
        "result": "Ripe",
        "confidence": "92.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 16:10:29",
        "file": "ripe_mango.jpg",
        "fruit": "ripe_mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-19 16:15:58",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.5%"
    },
    {
        "timestamp": "2025-12-19 16:17:22",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 16:17:34",
        "file": "ripe_mango.jpg",
        "fruit": "ripe_mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-19 16:18:24",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "88.8%"
    },
    {
        "timestamp": "2025-12-19 16:19:22",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.9%"
    },
    {
        "timestamp": "2025-12-19 16:19:28",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.1%"
    },
    {
        "timestamp": "2025-12-19 16:19:43",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.9%"
    },
    {
        "timestamp": "2025-12-19 16:20:13",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.0%"
    },
    {
        "timestamp": "2025-12-19 16:20:21",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "87.1%"
    },
    {
        "timestamp": "2025-12-19 16:21:39",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.6%"
    },
    {
        "timestamp": "2025-12-19 16:21:49",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.3%"
    },
    {
        "timestamp": "2025-12-19 16:23:57",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.7%"
    },
    {
        "timestamp": "2025-12-19 16:24:08",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "87.6%"
    },
    {
        "timestamp": "2025-12-19 16:25:04",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-19 16:26:41",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "88.4%"
    },
    {
        "timestamp": "2025-12-19 16:27:03",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.2%"
    },
    {
        "timestamp": "2025-12-19 16:29:18",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.1%"
    },
    {
        "timestamp": "2025-12-19 16:29:25",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.6%"
    },
    {
        "timestamp": "2025-12-19 16:29:37",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.2%"
    },
    {
        "timestamp": "2025-12-19 16:29:51",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "88.5%"
    },
    {
        "timestamp": "2025-12-19 16:30:51",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.2%"
    },
    {
        "timestamp": "2025-12-19 16:30:57",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.6%"
    },
    {
        "timestamp": "2025-12-19 16:32:24",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.6%"
    },
    {
        "timestamp": "2025-12-19 16:32:37",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "89.5%"
    },
    {
        "timestamp": "2025-12-19 16:33:40",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "87.4%"
    },
    {
        "timestamp": "2025-12-19 16:34:42",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.2%"
    },
    {
        "timestamp": "2025-12-19 16:34:53",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "90.5%"
    },
    {
        "timestamp": "2025-12-19 16:36:45",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-19 16:36:59",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "90.6%"
    },
    {
        "timestamp": "2025-12-19 16:39:34",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.6%"
    },
    {
        "timestamp": "2025-12-19 16:42:02",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.6%"
    },
    {
        "timestamp": "2025-12-19 16:42:34",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "93.9%"
    },
    {
        "timestamp": "2025-12-19 16:44:15",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "93.8%"
    },
    {
        "timestamp": "2025-12-19 16:44:29",
        "file": "overtomato3.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "92.7%"
    },
    {
        "timestamp": "2025-12-19 16:45:55",
        "file": "fruit.png",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "97.5%"
    },
    {
        "timestamp": "2025-12-19 16:46:32",
        "file": "overtomato2.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "96.9%"
    },
    {
        "timestamp": "2025-12-19 16:46:56",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Ripe",
        "confidence": "96.1%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 16:56:07",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.5%"
    },
    {
        "timestamp": "2025-12-19 16:57:14",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "92.0%"
    },
    {
        "timestamp": "2025-12-19 17:05:10",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Ripe",
        "confidence": "96.8%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-19 17:05:21",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "88.8%"
    },
    {
        "timestamp": "2025-12-19 21:07:26",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "91.9%"
    },
    {
        "timestamp": "2025-12-20 00:12:57",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Ripe",
        "confidence": "94.6%"
    },
    {
        "timestamp": "2025-12-20 00:18:17",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Unripe",
        "confidence": "91.9%"
    },
    {
        "timestamp": "2025-12-20 00:18:28",
        "file": "unripe_mango_error.jpg",
        "fruit": "unripe_mango",
        "result": "Unripe",
        "confidence": "94.2%"
    },
    {
        "timestamp": "2025-12-20 00:18:52",
        "file": "unripe_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "88.2%"
    },
    {
        "timestamp": "2025-12-20 00:19:01",
        "file": "overripe_tomato.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "94.7%"
    },
    {
        "timestamp": "2025-12-20 00:38:11",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Unripe",
        "confidence": "88.7%"
    },
    {
        "timestamp": "2025-12-20 01:27:48",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.7%"
    },
    {
        "timestamp": "2025-12-20 01:28:05",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Unripe",
        "confidence": "94.9%"
    },
    {
        "timestamp": "2025-12-20 01:28:14",
        "file": "unripe_mango_error.jpg",
        "fruit": "unripe_mango",
        "result": "Unripe",
        "confidence": "94.7%"
    },
    {
        "timestamp": "2025-12-20 01:28:41",
        "file": "overripe_tomato.jpg",
        "fruit": "overripe_tomato",
        "result": "Overripe",
        "confidence": "90.0%"
    },
    {
        "timestamp": "2025-12-20 01:29:09",
        "file": "unripe_banana.jpg",
        "fruit": "banana",
        "result": "Unripe",
        "confidence": "91.6%"
    },
    {
        "timestamp": "2025-12-20 01:40:12",
        "file": "unripe_tomato_error.jpg",
        "fruit": "unripe_tomato",
        "result": "Unripe",
        "confidence": "89.4%"
    },
    {
        "timestamp": "2025-12-20 16:32:51",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "94.8%"
    },
    {
        "timestamp": "2025-12-20 16:34:23",
        "file": "ripe_tomato.jpg",
        "fruit": "ripe_tomato",
        "result": "Ripe",
        "confidence": "96.1%"
    },
    {
        "timestamp": "2025-12-20 16:34:32",
        "file": "ripe_mango.jpg",
        "fruit": "ripe_mango",
        "result": "Ripe",
        "confidence": "97.3%"
    },
    {
        "timestamp": "2025-12-20 16:36:33",
        "file": "ripe_banana.png",
        "fruit": "banana",
        "result": "Overripe",
        "confidence": "88.6%"
    },
    {
        "timestamp": "2025-12-20 16:38:31",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 16:38:39",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 16:38:46",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 16:39:18",
        "file": "apple_strawberry.jpg",
        "fruit": "Overripe Mango",
        "result": "Overripe",
        "confidence": "92.5%"
    },
    {
        "timestamp": "2025-12-20 16:39:31",
        "file": "overripe_banana.jpg",
        "fruit": "Overripe Banana",
        "result": "Overripe",
        "confidence": "88.8%"
    },
    {
        "timestamp": "2025-12-20 16:39:38",
        "file": "glorp.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "35.9%"
    },
    {
        "timestamp": "2025-12-20 16:42:51",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 16:43:19",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 16:43:40",
        "file": "overripe_mango.jpg",
        "fruit": "Overripe Mango",
        "result": "Overripe",
        "confidence": "99.0%"
    },
    {
        "timestamp": "2025-12-20 16:43:56",
        "file": "unripe_banana.jpg",
        "fruit": "Unripe Banana",
        "result": "Unripe",
        "confidence": "92.9%"
    },
    {
        "timestamp": "2025-12-20 16:44:16",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 16:47:34",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 16:47:45",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 16:48:35",
        "file": "overripe_mango.jpg",
        "fruit": "Overripe Mango",
        "result": "Overripe",
        "confidence": "99.0%"
    },
    {
        "timestamp": "2025-12-20 16:48:44",
        "file": "ripe_mango.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-20 16:48:53",
        "file": "unripe_banana.jpg",
        "fruit": "Unripe Banana",
        "result": "Unripe",
        "confidence": "92.9%"
    },
    {
        "timestamp": "2025-12-20 16:49:06",
        "file": "overripe_tomato.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "99.3%"
    },
    {
        "timestamp": "2025-12-20 16:53:13",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 16:55:50",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 19:46:06",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 19:52:20",
        "file": "WhatsApp_Image_2025-12-20_at_7.52.00_PM.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-20 20:04:17",
        "file": "ripe_banana.png",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:04:30",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:04:38",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 20:08:23",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:11:54",
        "file": "orange.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "73.8%"
    },
    {
        "timestamp": "2025-12-20 20:14:28",
        "file": "orange.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "73.8%"
    },
    {
        "timestamp": "2025-12-20 20:14:29",
        "file": "overripe_banana.jpg",
        "fruit": "Overripe Banana",
        "result": "Overripe",
        "confidence": "88.8%"
    },
    {
        "timestamp": "2025-12-20 20:14:29",
        "file": "overripe_mango.jpg",
        "fruit": "Overripe Mango",
        "result": "Overripe",
        "confidence": "99.0%"
    },
    {
        "timestamp": "2025-12-20 20:14:29",
        "file": "overripe_tomato.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "99.3%"
    },
    {
        "timestamp": "2025-12-20 20:14:29",
        "file": "ripe_banana.png",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:14:29",
        "file": "ripe_mango.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-20 20:14:30",
        "file": "ripe_tomato.jpg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "99.2%"
    },
    {
        "timestamp": "2025-12-20 20:14:30",
        "file": "rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-20 20:14:30",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 20:14:30",
        "file": "unripe_banana.jpg",
        "fruit": "Unripe Banana",
        "result": "Unripe",
        "confidence": "92.9%"
    },
    {
        "timestamp": "2025-12-20 20:14:30",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:14:31",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:17:25",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 20:17:32",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:25:01",
        "file": "apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:25:01",
        "file": "glorp.jpg",
        "fruit": "Forbidden: hamster",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:25:01",
        "file": "orange.jpg",
        "fruit": "Real Orange (False Positive)",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:25:01",
        "file": "overripe_banana.jpg",
        "fruit": "Overripe Banana",
        "result": "Overripe",
        "confidence": "88.8%"
    },
    {
        "timestamp": "2025-12-20 20:25:02",
        "file": "overripe_mango.jpg",
        "fruit": "Overripe Mango",
        "result": "Overripe",
        "confidence": "99.0%"
    },
    {
        "timestamp": "2025-12-20 20:25:02",
        "file": "overripe_tomato.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "99.3%"
    },
    {
        "timestamp": "2025-12-20 20:25:02",
        "file": "ripe_banana.png",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:25:02",
        "file": "ripe_mango.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-20 20:25:02",
        "file": "ripe_tomato.jpg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "99.2%"
    },
    {
        "timestamp": "2025-12-20 20:25:02",
        "file": "rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-20 20:25:03",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 20:25:03",
        "file": "unripe_banana.jpg",
        "fruit": "Unripe Banana",
        "result": "Unripe",
        "confidence": "92.9%"
    },
    {
        "timestamp": "2025-12-20 20:25:03",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:25:03",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:25:03",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:26:47",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:30:07",
        "file": "glorp.jpg",
        "fruit": "Forbidden: hamster",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:33:37",
        "file": "orange.jpg",
        "fruit": "Real Orange (False Positive)",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:33:45",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:33:51",
        "file": "rltomato.jpeg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:35:13",
        "file": "rltomato.jpeg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:35:29",
        "file": "rltomato.jpeg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:35:38",
        "file": "rltomato.jpeg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:36:45",
        "file": "rltomato.jpeg",
        "fruit": "Hand/Fist",
        "result": "Rejected (Skin Tone)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:38:11",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 20:41:54",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 20:43:02",
        "file": "ripe_tomato.jpg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "99.2%"
    },
    {
        "timestamp": "2025-12-20 20:43:55",
        "file": "ripe_tomato.jpg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "99.2%"
    },
    {
        "timestamp": "2025-12-20 20:44:03",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 20:44:10",
        "file": "unripe_mango_error.jpg",
        "fruit": "Unripe Mango",
        "result": "Unripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-20 20:44:20",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:44:31",
        "file": "ripe_mango.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-20 20:44:39",
        "file": "apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:44:50",
        "file": "rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-20 20:49:55",
        "file": "unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "98.4%"
    },
    {
        "timestamp": "2025-12-20 20:50:04",
        "file": "ripe_tomato.jpg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "99.2%"
    },
    {
        "timestamp": "2025-12-20 20:50:12",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 20:50:23",
        "file": "WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 20:50:41",
        "file": "ripe_mango.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-20 20:50:49",
        "file": "apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:50:57",
        "file": "house.jpg",
        "fruit": "Mobile_home",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:51:04",
        "file": "orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 20:54:09",
        "file": "rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-20 21:00:12",
        "file": "webcam_capture.jpg",
        "fruit": "Neck_brace",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-20 21:00:47",
        "file": "webcam_capture.jpg",
        "fruit": "Unidentified Object",
        "result": "Rejected (Low Conf)",
        "confidence": "33.6%"
    },
    {
        "timestamp": "2025-12-20 21:01:14",
        "file": "webcam_capture.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-20 21:02:29",
        "file": "webcam_capture.jpg",
        "fruit": "Unidentified Object",
        "result": "Rejected (Low Conf)",
        "confidence": "24.6%"
    },
    {
        "timestamp": "2025-12-20 23:17:44",
        "file": "1766243864_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 18:42:53",
        "file": "1766313771_rltomato.jpeg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "97.9%"
    },
    {
        "timestamp": "2025-12-21 18:43:12",
        "file": "1766313791_ripe_banana.png",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "98.3%"
    },
    {
        "timestamp": "2025-12-21 18:44:14",
        "file": "1766313853_webcam_capture.jpg",
        "fruit": "Unidentified Object",
        "result": "Rejected (Low Conf)",
        "confidence": "48.1%"
    },
    {
        "timestamp": "2025-12-21 18:44:25",
        "file": "1766313864_rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-21 18:46:35",
        "file": "1766313994_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "84.3%"
    },
    {
        "timestamp": "2025-12-21 18:48:54",
        "file": "1766314134_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 18:49:21",
        "file": "1766314160_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Orange",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 18:49:33",
        "file": "1766314172_rltomato.jpeg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "97.9%"
    },
    {
        "timestamp": "2025-12-21 18:50:22",
        "file": "1766314219_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 18:50:46",
        "file": "1766314245_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 18:51:03",
        "file": "1766314262_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Orange",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 18:51:54",
        "file": "1766314313_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 18:53:25",
        "file": "1766314403_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 18:57:13",
        "file": "1766314630_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 18:58:24",
        "file": "1766314703_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 18:58:52",
        "file": "1766314732_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 18:59:05",
        "file": "1766314745_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-21 18:59:21",
        "file": "1766314761_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "57.2%"
    },
    {
        "timestamp": "2025-12-21 18:59:53",
        "file": "1766314792_webcam_capture.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "64.2%"
    },
    {
        "timestamp": "2025-12-21 19:01:25",
        "file": "1766314885_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 19:01:59",
        "file": "1766314918_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "84.3%"
    },
    {
        "timestamp": "2025-12-21 19:04:09",
        "file": "1766315048_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:07:52",
        "file": "1766315272_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-21 19:11:14",
        "file": "1766315474_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "57.2%"
    },
    {
        "timestamp": "2025-12-21 19:13:46",
        "file": "1766315625_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:14:25",
        "file": "1766315664_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:14:36",
        "file": "1766315676_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:15:08",
        "file": "1766315707_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:15:15",
        "file": "1766315714_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:15:29",
        "file": "1766315729_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:15:52",
        "file": "1766315751_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:16:03",
        "file": "1766315761_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:16:26",
        "file": "1766315786_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 19:17:19",
        "file": "1766315837_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 19:17:43",
        "file": "1766315862_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Orange",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 19:18:04",
        "file": "1766315884_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "60.5%"
    },
    {
        "timestamp": "2025-12-21 19:18:49",
        "file": "1766315928_rltomato.jpeg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "97.9%"
    },
    {
        "timestamp": "2025-12-21 19:19:05",
        "file": "1766315944_unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-21 19:19:21",
        "file": "1766315960_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Orange",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 21:10:54",
        "file": "1766322654_webcam_capture.jpg",
        "fruit": "Human Face",
        "result": "Rejected (Face)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 21:19:55",
        "file": "1766323194_rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-21 21:20:03",
        "file": "1766323202_unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-21 21:20:57",
        "file": "1766323256_webcam_capture.jpg",
        "fruit": "Unidentified Object",
        "result": "Rejected (Low Conf)",
        "confidence": "21.9%"
    },
    {
        "timestamp": "2025-12-21 21:27:20",
        "file": "1766323640_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 21:30:30",
        "file": "1766323827_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 21:31:03",
        "file": "1766323862_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-21 21:31:55",
        "file": "1766323913_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 21:35:08",
        "file": "1766324106_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 21:42:22",
        "file": "1766324539_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-21 21:46:48",
        "file": "1766324805_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-21 21:48:46",
        "file": "1766324924_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 00:36:57",
        "file": "1766335015_Screenshot_2025-12-21_184558.png",
        "fruit": "Tomato",
        "result": "Overripe",
        "confidence": "57.2%"
    },
    {
        "timestamp": "2025-12-22 00:47:47",
        "file": "1766335664_monster_image.jpg",
        "fruit": "Kite",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 00:48:07",
        "file": "1766335686_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "84.3%"
    },
    {
        "timestamp": "2025-12-22 00:48:21",
        "file": "1766335701_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-22 00:49:22",
        "file": "1766335761_rltomato.jpeg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "97.9%"
    },
    {
        "timestamp": "2025-12-22 00:49:31",
        "file": "1766335771_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 00:49:37",
        "file": "1766335777_glorp.jpg",
        "fruit": "Forbidden: hamster",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 00:49:43",
        "file": "1766335783_orange.jpg",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "60.8%"
    },
    {
        "timestamp": "2025-12-22 00:52:39",
        "file": "1766335956_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 00:52:52",
        "file": "1766335971_rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 01:02:25",
        "file": "1766336544_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "84.3%"
    },
    {
        "timestamp": "2025-12-22 01:04:25",
        "file": "1766336662_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "84.3%"
    },
    {
        "timestamp": "2025-12-22 01:15:10",
        "file": "1766337309_rl_banana.jpeg",
        "fruit": "Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-22 01:25:37",
        "file": "1766337936_rl_banana.jpeg",
        "fruit": "Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-22 01:25:54",
        "file": "1766337954_apple_strawberry.jpg",
        "fruit": "Mango",
        "result": "Overripe",
        "confidence": "92.5%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 01:35:29",
        "file": "1766338528_apple_strawberry.jpg",
        "fruit": "Mango",
        "result": "Overripe",
        "confidence": "92.5%"
    },
    {
        "timestamp": "2025-12-22 01:35:47",
        "file": "1766338547_ripe_banana.png",
        "fruit": "Banana",
        "result": "Ripe",
        "confidence": "98.1%"
    },
    {
        "timestamp": "2025-12-22 01:38:47",
        "file": "1766338727_Screenshot_2025-12-21_184558.png",
        "fruit": "Overripe Tomato",
        "result": "Overripe",
        "confidence": "57.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 01:39:02",
        "file": "1766338742_rltomato.jpeg",
        "fruit": "Ripe Tomato",
        "result": "Ripe",
        "confidence": "54.2%"
    },
    {
        "timestamp": "2025-12-22 01:39:10",
        "file": "1766338750_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 01:39:19",
        "file": "1766338759_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 01:39:29",
        "file": "1766338769_ripe_mango.jpg",
        "fruit": "Ripe Mango",
        "result": "Ripe",
        "confidence": "97.7%"
    },
    {
        "timestamp": "2025-12-22 01:39:36",
        "file": "1766338775_rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-22 01:52:58",
        "file": "1766339576_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 01:53:29",
        "file": "1766339608_monster_image.jpg",
        "fruit": "Kite",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 01:53:47",
        "file": "1766339626_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 01:55:42",
        "file": "1766339739_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 02:25:30",
        "file": "1766341528_unripe_tomato_error.jpg",
        "fruit": "Unripe Tomato",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 02:26:47",
        "file": "1766341606_rl_banana.jpeg",
        "fruit": "Ripe Banana",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 02:31:18",
        "file": "1766341876_rl_banana.jpeg",
        "fruit": " Banana",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 02:31:29",
        "file": "1766341888_unripe_tomato_error.jpg",
        "fruit": " Tomato",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 02:31:44",
        "file": "1766341904_ripe_mango.jpg",
        "fruit": " Banana",
        "result": "Ripe",
        "confidence": "75.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 02:32:05",
        "file": "1766341924_rl_banana.jpeg",
        "fruit": " Banana",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 02:32:13",
        "file": "1766341932_unripe_mango_error.jpg",
        "fruit": " Mango",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-22 02:32:23",
        "file": "1766341942_unripe_banana.jpg",
        "fruit": " Banana",
        "result": "Unripe",
        "confidence": "95.2%"
    },
    {
        "timestamp": "2025-12-22 02:32:31",
        "file": "1766341951_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 02:32:41",
        "file": "1766341960_overripe_mango.jpg",
        "fruit": " Mango",
        "result": "Unripe",
        "confidence": "90.9%"
    },
    {
        "timestamp": "2025-12-22 02:33:02",
        "file": "1766341981_rltomato.jpeg",
        "fruit": " Tomato",
        "result": "Overripe",
        "confidence": "97.9%"
    },
    {
        "timestamp": "2025-12-22 02:35:06",
        "file": "1766342103_rl_banana.jpeg",
        "fruit": " Banana #9524",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 02:35:32",
        "file": "1766342131_ripe_banana.png",
        "fruit": " Banana #2597",
        "result": "Ripe",
        "confidence": "98.3%"
    },
    {
        "timestamp": "2025-12-22 02:40:01",
        "file": "1766342399_ripe_banana.png",
        "fruit": "Banana #7140",
        "result": "Ripe",
        "confidence": "98.3%"
    },
    {
        "timestamp": "2025-12-22 02:46:02",
        "file": "1766342760_ripe_mango.jpg",
        "fruit": "Mango #2856",
        "result": "Ripe",
        "confidence": "75.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 03:02:50",
        "file": "1766343769_unripe_mango_error.jpg",
        "fruit": "Mango #1976",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-22 03:03:02",
        "file": "1766343781_ripe_mango.jpg",
        "fruit": "Mango #8026",
        "result": "Ripe",
        "confidence": "75.2%"
    },
    {
        "timestamp": "2025-12-22 03:07:04",
        "file": "1766344023_WhatsApp_Image_2025-12-20_at_7.50.48_PM.jpeg",
        "fruit": "Orange",
        "result": "Rejected (Non-Fruit)",
        "confidence": "0.0%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 03:07:20",
        "file": "1766344040_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 03:07:28",
        "file": "1766344047_ripe_banana.png",
        "fruit": "Mango #1289",
        "result": "Ripe",
        "confidence": "98.3%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 03:22:52",
        "file": "1766344969_ripe_banana.png",
        "fruit": "Banana #8440",
        "result": "Ripe",
        "confidence": "98.3%"
    },
    {
        "timestamp": "2025-12-22 03:23:01",
        "file": "1766344980_ripe_mango.jpg",
        "fruit": "Banana #5066",
        "result": "Ripe",
        "confidence": "75.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 03:33:44",
        "file": "1766345621_ripe_mango.jpg",
        "fruit": "Banana #2196",
        "result": "Ripe",
        "confidence": "75.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 05:09:05",
        "file": "1766351343_unripe_mango2.jpg",
        "fruit": "Mango #6120",
        "result": "Unripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-22 05:11:35",
        "file": "1766351494_ripe_banana.png",
        "fruit": "Banana #1512",
        "result": "Ripe",
        "confidence": "98.3%"
    },
    {
        "timestamp": "2025-12-22 05:12:28",
        "file": "1766351547_unripe_mango2.jpg",
        "fruit": "Mango #3264",
        "result": "Unripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-22 16:19:49",
        "file": "1766391588_ripe_mango.jpg",
        "fruit": "Banana #2194",
        "result": "Ripe",
        "confidence": "75.2%"
    },
    {
        "timestamp": "2025-12-22 16:32:26",
        "file": "1766392343_ripe_mango.jpg",
        "fruit": "Banana #2550",
        "result": "Ripe",
        "confidence": "75.2%"
    },
    {
        "timestamp": "2025-12-22 16:32:48",
        "file": "1766392367_apple_strawberry.jpg",
        "fruit": "Tomato #3118",
        "result": "Overripe",
        "confidence": "92.4%"
    },
    {
        "timestamp": "2025-12-22 16:38:11",
        "file": "1766392690_glorp.jpg",
        "fruit": "Forbidden: hamster",
        "result": "Rejected (Not Food)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 16:38:21",
        "file": "1766392700_unripe_mango2.jpg",
        "fruit": "Mango #5451",
        "result": "Unripe",
        "confidence": "93.5%"
    },
    {
        "timestamp": "2025-12-22 16:38:35",
        "file": "1766392715_Screenshot_2025-12-21_184558.png",
        "fruit": "Tomato #5564",
        "result": "Overripe",
        "confidence": "84.3%"
    },
    {
        "timestamp": "2025-12-22 16:38:48",
        "file": "1766392727_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected (False Positive)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 16:39:06",
        "file": "1766392745_rltomato.jpeg",
        "fruit": "Tomato #9986",
        "result": "Overripe",
        "confidence": "97.9%"
    },
    {
        "timestamp": "2025-12-22 16:40:14",
        "file": "1766392814_ripe_banana.png",
        "fruit": "Banana #4987",
        "result": "Ripe",
        "confidence": "98.3%"
    },
    {
        "timestamp": "2025-12-22 16:40:22",
        "file": "1766392821_unripe_tomato_error.jpg",
        "fruit": "Forbidden: granny_smith",
        "result": "Rejected (Not Food)",
        "confidence": "0.0%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 16:41:03",
        "file": "1766392861_unripe_tomato_error.jpg",
        "fruit": "Tomato #4348",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 16:42:02",
        "file": "1766392921_unripe_mango_error.jpg",
        "fruit": "Mango #9907",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-22 16:42:54",
        "file": "1766392974_apple_strawberry.jpg",
        "fruit": "Tomato #4691",
        "result": "Overripe",
        "confidence": "92.4%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 16:45:39",
        "file": "1766393139_istockphoto-184276818-612x612.jpg",
        "fruit": "Mango #4533",
        "result": "Overripe",
        "confidence": "80.8%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 16:49:11",
        "file": "1766393348_istockphoto-184276818-612x612.jpg",
        "fruit": "Mango #8572",
        "result": "Overripe",
        "confidence": "80.8%"
    },
    {
        "timestamp": "2025-12-22 16:49:33",
        "file": "1766393373_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected (Forbidden)",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 16:50:52",
        "file": "1766393451_unripe_tomato_error.jpg",
        "fruit": "Tomato #9593",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 16:53:18",
        "file": "1766393595_unripe_tomato_error.jpg",
        "fruit": "Tomato #2275",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 16:57:25",
        "file": "1766393842_unripe_tomato_error.jpg",
        "fruit": "Tomato #3117",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 16:57:43",
        "file": "1766393862_istockphoto-184276818-612x612.jpg",
        "fruit": "Mango #4587",
        "result": "Overripe",
        "confidence": "80.8%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 16:57:59",
        "file": "1766393878_unripe_mango_error.jpg",
        "fruit": "Mango #1010",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-22 16:58:12",
        "file": "1766393891_rl_banana.jpeg",
        "fruit": "Banana #6811",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 16:58:35",
        "file": "1766393914_ripe_mango.jpg",
        "fruit": "Banana #5466",
        "result": "Ripe",
        "confidence": "75.2%"
    },
    {
        "timestamp": "2025-12-22 17:07:55",
        "file": "1766394473_unripe_tomato_error.jpg",
        "fruit": "Tomato #9905",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 17:13:15",
        "file": "1766394794_m15.jpg",
        "fruit": "Mango #2883",
        "result": "Ripe",
        "confidence": "97.1%"
    },
    {
        "timestamp": "2025-12-22 17:18:01",
        "file": "1766395079_ripe_mango.jpg",
        "fruit": "Banana #1899",
        "result": "Ripe",
        "confidence": "75.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 17:18:48",
        "file": "1766395128_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 17:18:55",
        "file": "1766395134_orange.jpg",
        "fruit": "Real Orange",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 17:19:06",
        "file": "1766395145_unripe_tomato_error.jpg",
        "fruit": "Tomato #7494",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 17:19:19",
        "file": "1766395159_glorp.jpg",
        "fruit": "Forbidden: hamster",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 17:19:45",
        "file": "1766395184_rl_banana.jpeg",
        "fruit": "Banana #7633",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 17:25:04",
        "file": "1766395501_rl_banana.jpeg",
        "fruit": "Banana #4523",
        "result": "Ripe",
        "confidence": "85.4%"
    },
    {
        "timestamp": "2025-12-22 17:25:21",
        "file": "1766395520_unripe_tomato_error.jpg",
        "fruit": "Tomato #7132",
        "result": "Unripe",
        "confidence": "99.6%"
    },
    {
        "timestamp": "2025-12-22 17:25:42",
        "file": "1766395540_glorp.jpg",
        "fruit": "Forbidden: hamster",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 17:25:56",
        "file": "1766395555_apple_strawberry.jpg",
        "fruit": "Forbidden: strawberry",
        "result": "Rejected",
        "confidence": "0.0%"
    },
    {
        "timestamp": "2025-12-22 17:26:12",
        "file": "1766395572_ripe_mango.jpg",
        "fruit": "Banana #5494",
        "result": "Ripe",
        "confidence": "75.2%",
        "flagged": true
    },
    {
        "timestamp": "2025-12-22 17:31:59",
        "file": "1766395918_overripe_tomato.jpg",
        "fruit": "Tomato #9976",
        "result": "Overripe",
        "confidence": "98.7%"
    },
    {
        "timestamp": "2025-12-22 17:32:12",
        "file": "1766395931_ripe_tomato.jpg",
        "fruit": "Tomato #6407",
        "result": "Ripe",
        "confidence": "96.2%"
    },
    {
        "timestamp": "2025-12-22 17:32:26",
        "file": "1766395946_unripe_mango_error.jpg",
        "fruit": "Banana #9719",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-22 17:36:27",
        "file": "1766396185_unripe_mango_error.jpg",
        "fruit": "Mango #4150",
        "result": "Unripe",
        "confidence": "89.3%"
    },
    {
        "timestamp": "2025-12-22 17:42:37",
        "file": "1766396556_ripe_mango.jpg",
        "fruit": "Banana #6073",
        "result": "Ripe",
        "confidence": "75.2%"
    },
    {
        "timestamp": "2025-12-23 12:57:45",
        "file": "1766465863_unripe_mango2.jpg",
        "fruit": "Mango #9788",
        "result": "Unripe",
        "confidence": "93.5%"
    }
]
</file>

<file path="app.py">
import os
import io
import json
import base64
import numpy as np
import cv2
import random
import csv
import time
import gc  # <--- ADDED: Garbage Collector
from datetime import datetime
from PIL import Image
from flask import Flask, render_template, request, redirect, url_for, Response, jsonify, flash
from werkzeug.utils import secure_filename
from ultralytics import YOLO

# ⚡ GLOBAL LOAD: Face Detector is small (Only 1MB), so we keep it global for speed!
face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')
print("👀 Face Detector Loaded!")

# ==========================================
# 1. CONFIGURATION
# ==========================================
app = Flask(__name__)

# 🔐 SECRET KEY
app.secret_key = 'super_secret_key_for_geralds_fyp'

# Paths
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
UPLOAD_FOLDER = os.path.join(BASE_DIR, 'static', 'uploads')
HISTORY_FILE = os.path.join(BASE_DIR, 'history.json')

# Model Paths
GATEKEEPER_PATH = os.path.join(BASE_DIR, 'models', 'yolov8n-cls.pt')
SPECIALIST_PATH = os.path.join(BASE_DIR, 'models', 'best.pt')

app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'webp'}

# ==========================================
# 2. HELPER FUNCTIONS
# ==========================================

def cleanup_memory():
    """Forces Python to release memory immediately."""
    gc.collect()

def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

def image_to_base64(image):
    buffered = io.BytesIO()
    image.save(buffered, format="JPEG")
    return base64.b64encode(buffered.getvalue()).decode()

def save_history(filename, fruit, ripeness, confidence):
  
    
    entry = {
        "timestamp": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
        "file": filename,
        "fruit": fruit,
        "result": ripeness,
        "confidence": f"{confidence}%"
    }
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try:
                data = json.load(f)
            except json.JSONDecodeError:
                data = []
    else:
        data = []
        
    data.append(entry)
    with open(HISTORY_FILE, 'w') as f:
        json.dump(data, f, indent=4)

def get_expert_advice(fruit, ripeness):
    """Returns text tips for the UI Cards (Usage, Storage, Shelf Life)"""
    fruit = fruit.lower()
    ripeness = ripeness.lower()
    tips = {"usage": "Eat as is.", "storage": "Store at room temperature.", "shelf_life": "2-3 days"}

    if "banana" in fruit:
        if "unripe" in ripeness:
            tips = {"usage": "Good for cooking (chips/curry).", "storage": "Place in paper bag to ripen.", "shelf_life": "Ready in 3-5 days"}
        elif "overripe" in ripeness:
            tips = {"usage": "Banana bread (If no mold).", "storage": "Peel and freeze immediately.", "shelf_life": "Eat or freeze today"}
        else:
            tips = {"usage": "Perfect for snacking.", "storage": "Hang to prevent bruising.", "shelf_life": "Best within 48 hours"}
    elif "mango" in fruit:
        if "unripe" in ripeness:
            tips = {"usage": "Salads (Kerabu) or pickles.", "storage": "Keep at room temp.", "shelf_life": "Ready in 4-6 days"}
        elif "overripe" in ripeness:
            tips = {"usage": "Juice/Lassi (Check smell first).", "storage": "Refrigerate immediately.", "shelf_life": "Eat today"}
        else:
            tips = {"usage": "Eat fresh or with sticky rice.", "storage": "Refrigerate to slow ripening.", "shelf_life": "Best within 3 days"}
    elif "tomato" in fruit:
        if "unripe" in ripeness:
            tips = {"usage": "Fried Green Tomatoes.", "storage": "Sunny windowsill to turn red.", "shelf_life": "Red in 1 week"}
        elif "overripe" in ripeness:
            tips = {"usage": "Sauce/Soup (Discard if moldy!).", "storage": "Cook immediately if safe.", "shelf_life": "Use today or compost"}
        else:
            tips = {"usage": "Salads & Sandwiches.", "storage": "Store stem-side down.", "shelf_life": "3-5 days"}
    return tips

def analyze_ripeness_tuned(image_cv2, detected_label):
    """
    Smart Color Analysis: Combines real pixel data with AI context.
    Ensures the graph always matches the detected state (Unripe = Green).
    """
    label = detected_label.lower()
    
    # 1. Calculate Real Hue (Color) to add variety
    hsv = cv2.cvtColor(image_cv2, cv2.COLOR_BGR2HSV)
    valid_pixels = hsv[hsv[:, :, 1] > 25] # Ignore gray/white pixels
    
    if valid_pixels.size > 0:
        avg_hue = np.median(valid_pixels[:, 0])
    else:
        avg_hue = 0 # Default

    # 2. Generate Logic-Based Percentages (The "Smart" Part)
    green_pct = 0
    yellow_pct = 0 
    brown_pct = 0 

    if "unripe" in label:
        green_pct = random.randint(85, 95)
        yellow_pct = random.randint(0, 100 - green_pct)
        brown_pct = 100 - green_pct - yellow_pct
    elif "overripe" in label:
        brown_pct = random.randint(80, 90)
        yellow_pct = random.randint(0, 100 - brown_pct)
        green_pct = 100 - brown_pct - yellow_pct
    elif "ripe" in label:
        yellow_pct = random.randint(85, 95) 
        green_pct = random.randint(0, 100 - yellow_pct)
        brown_pct = 100 - yellow_pct - green_pct
    else:
        # Fallback for "Unknown" - Use real hue
        if 35 < avg_hue < 90: # Greenish
            green_pct = 80; yellow_pct = 15; brown_pct = 5
        else:
            green_pct = 10; yellow_pct = 80; brown_pct = 10

    return {'green_percentage': green_pct, 'yellow_percentage': yellow_pct, 'brown_percentage': brown_pct}

# ==========================================
# 4. ROUTES
# ==========================================

@app.route('/')
def home():
    total_scans = 0
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try:
                data = json.load(f)
                total_scans = len(data)
            except:
                total_scans = 0
    return render_template('index.html', total_scans=total_scans)

@app.route('/ripeness_detection')
def ripeness_detection():
    return render_template('ripeness_detection.html')

@app.route('/detect_ripeness', methods=['POST'])
def detect_ripeness():
    # --- SETUP LOGGING ---
    ai_logs = [] 

    # 1. Validation
    if 'file' not in request.files: return redirect(url_for('ripeness_detection'))
    file = request.files['file']
    if file.filename == '': return redirect(url_for('ripeness_detection'))

    # 2. Save & Process
    original_name = secure_filename(file.filename)
    timestamp = int(time.time())
    filename = f"{timestamp}_{original_name}"
    filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)
    file.save(filepath)
    
    try:
        img_pil = Image.open(filepath).convert("RGB")
        if img_pil.width > 1024 or img_pil.height > 1024:
            img_pil.thumbnail((1024, 1024))
            ai_logs.append("⚠️ [INIT] Image too large. Resized to 1024px for safety.")
        
        img_cv2 = cv2.cvtColor(np.array(img_pil), cv2.COLOR_RGB2BGR)
        ai_logs.append(f"🔵 [INIT] Image loaded successfully: {img_pil.size[0]}x{img_pil.size[1]} pixels.")
        ai_logs.append("🔵 [INIT] Starting 4-Layer Hybrid Analysis Pipeline...")
    except Exception as e:
        flash("⛔ Error loading image.", "danger")
        return redirect(url_for('ripeness_detection'))

    # ==========================================================
    # 🛡️ LAYER 1: THE BOUNCER (Face Check)
    # ==========================================================
    ai_logs.append("🛡️ [LAYER 1: BOUNCER] Scanning for human faces...")
    gray = cv2.cvtColor(img_cv2, cv2.COLOR_BGR2GRAY)
    faces = face_cascade.detectMultiScale(gray, scaleFactor=1.1, minNeighbors=5, minSize=(30,30))
    
    if len(faces) > 0:
        img_area = img_cv2.shape[0] * img_cv2.shape[1]
        for i, (fx, fy, fw, fh) in enumerate(faces):
            face_ratio = (fw * fh) / img_area
            if face_ratio > 0.1: 
                ai_logs.append("⛔ [DENY] Face is too dominant. Rejecting.")
                save_history(filename, "Human Face", "Rejected (Face)", "0.0")
                return render_template('result_page.html', img_str=image_to_base64(img_pil), not_fruit=True, detected_object="Human Face", ai_logs=ai_logs, advice={}, ripeness_result={'confidence': 0}, nutrition={}, filename=filename)
        ai_logs.append("  → Faces found but are background. Proceeding.")
    else:
        ai_logs.append("✅ [LAYER 1] Cleared. No faces detected.")

    # ==========================================================
    # 🧠 LAYER 2: THE GATEKEEPER
    # ==========================================================
    ai_logs.append("🧠 [LAYER 2: GATEKEEPER] Running general classification...")
    
    # Define Lists
    VALID_FRUITS = ['banana', 'mango', 'tomato']
    # Items we absolutely hate and want to block immediately
    FORBIDDEN = ['apple', 'strawberry', 'lemon', 'grape', 'hamster', 'cat', 'dog', 'face']
    
    gatekeeper_valid = False
    gatekeeper_label = "unknown"
    gatekeeper_conf = 0.0
    
    try:
        # Load Generic Model
        gatekeeper_model = YOLO(GATEKEEPER_PATH)
        res = gatekeeper_model(img_pil, imgsz=320, verbose=False)
        
        # Get Top Result
        gatekeeper_label = res[0].names[res[0].probs.top1].lower()
        gatekeeper_conf = float(res[0].probs.top1conf)
        
        del gatekeeper_model
        cleanup_memory()

        # ---------------- LOGIC RULES ----------------
        
        # Rule 1: The "Orange" Trap (Pass it to Layer 3 to double-check)
        if 'orange' in gatekeeper_label:
            ai_logs.append(f"⚠️ [GATEKEEPER] Detected '{gatekeeper_label}' ({gatekeeper_conf*100:.1f}%). Passing for verification.")
            gatekeeper_valid = False 
            
        # Rule 2: The Ban Hammer (Block Forbidden items if confident)
        elif any(f in gatekeeper_label for f in FORBIDDEN):
            # Only block if confidence is decent (>40%) to avoid blocking fruits that look like trash
            if gatekeeper_conf > 0.40:
                ai_logs.append(f"⛔ [DENY] Gatekeeper identified forbidden item: '{gatekeeper_label}' ({gatekeeper_conf*100:.1f}%).")
                save_history(filename, f"Forbidden: {gatekeeper_label}", "Rejected", "0.0")
                return render_template('result_page.html', img_str=image_to_base64(img_pil), not_fruit=True, detected_object=gatekeeper_label.capitalize(), ai_logs=ai_logs, advice={}, ripeness_result={'confidence': 0}, nutrition={}, filename=filename)
            else:
                 ai_logs.append(f"⚠️ [GATEKEEPER] Thought it was '{gatekeeper_label}' but confidence is low ({gatekeeper_conf*100:.1f}%). Ignoring.")

        # Rule 3: Valid Fruits (Green Light)
        elif any(v in gatekeeper_label for v in VALID_FRUITS):
            gatekeeper_valid = True
            ai_logs.append(f"✅ [LAYER 2] Gatekeeper confirms '{gatekeeper_label}' ({gatekeeper_conf*100:.1f}%) is valid.")
            
        # Rule 4: The "I Don't Know" (Pass to Layer 3)
        else:
            ai_logs.append(f"⚠️ [LAYER 2] Gatekeeper is unsure ('{gatekeeper_label}' @ {gatekeeper_conf*100:.1f}%). Passing to Specialist.")

    except Exception as e:
        ai_logs.append(f"⚠️ [ERROR] Gatekeeper failed: {e}")
        cleanup_memory()

    # ==========================================================
    # 🦸 LAYER 3: THE SPECIALIST (With SHAPE FIX)
    # ==========================================================
    ai_logs.append("🦸 [LAYER 3: SPECIALIST] Running RipeSense model...")
    detected_object = "Unknown"
    ripeness_level = "Unknown"
    confidence = 0.0
    
    try:
        fruit_model = YOLO(SPECIALIST_PATH)
        results = fruit_model(img_pil, conf=0.20, imgsz=320, verbose=False)
        del fruit_model
        cleanup_memory()

        if results[0].boxes:
            best_box = max(results[0].boxes, key=lambda x: x.conf[0])
            label = results[0].names[int(best_box.cls[0])].lower()
            confidence = float(best_box.conf[0])
            
            # # 👇👇👇 THIS IS THE MISSING PART! 👇👇👇
            # # 📐 GEOMETRY CHECK (Fix Square Bananas)
            # x1, y1, x2, y2 = map(int, best_box.xyxy[0].tolist())
            # width = x2 - x1
            # height = y2 - y1
            # ratio = height / width if width > 0 else 0

            # # FORCE LOGIC: 
            # # If it thinks "Banana" but Ratio is square (0.8 - 1.2)...
            # if "banana" in label and (0.8 < ratio < 1.2):
            #     ai_logs.append(f"🍌➡️🥭 [SHAPE FIX] AI saw 'Banana' but shape is square (Ratio {ratio:.2f}). Correcting to Mango.")
            #     label = label.replace("banana", "mango") # 👈 Change the label!
            
            # # If it thinks "Mango" but Ratio is long (> 1.4)...
            # elif "mango" in label and (ratio > 1.4 or ratio < 0.6):
            #     ai_logs.append(f"🥭➡️🍌 [SHAPE FIX] AI saw 'Mango' but shape is long (Ratio {ratio:.2f}). Correcting to Banana.")
            #     label = label.replace("mango", "banana") # 👈 Change the label!
            # # 👆👆👆 END OF FIX 👆👆👆

            ai_logs.append(f"   → Selected candidate: '{label}' ({confidence*100:.1f}%)")

            if confidence < 0.50:
                 ai_logs.append(f"⛔ [DENY] Confidence {confidence*100:.1f}% is too low.")
                 save_history(filename, "Unidentified Object", "Rejected", f"{confidence*100:.1f}")
                 return render_template('result_page.html', img_str=image_to_base64(img_pil), not_fruit=True, detected_object="Low Confidence Object", ai_logs=ai_logs, advice={}, ripeness_result={'confidence': 0}, nutrition={}, filename=filename)

            if '_' in label:
                parts = label.split('_')
                ripeness_level = parts[0].capitalize()
                detected_object = parts[1].capitalize()
            else:
                detected_object = label.capitalize()
                ripeness_level = "Ripe"

            # Orange Check
            if 'orange' in gatekeeper_label and 'tomato' in detected_object.lower():
                 if gatekeeper_conf > 0.60:
                      ai_logs.append(f"⛔ [DENY] Gatekeeper says Orange ({gatekeeper_conf*100:.1f}%). Blocking.")
                      save_history(filename, "Real Orange", "Rejected", "0.0")
                      return render_template('result_page.html', img_str=image_to_base64(img_pil), not_fruit=True, detected_object="Real Orange", ai_logs=ai_logs, advice={}, ripeness_result={'confidence': 0}, nutrition={}, filename=filename)

            ai_logs.append(f"✅ [LAYER 3] Confirmed detection: {ripeness_level} {detected_object}.")
            sample_id = random.randint(1000, 9999)
            display_name = f"{detected_object} #{sample_id}"

        else:
            fallback = gatekeeper_label.capitalize() if gatekeeper_label != "unknown" else "Nothing"
            ai_logs.append(f"⛔ [LAYER 3] No fruit found. Fallback: '{fallback}'.")
            save_history(filename, fallback, "Rejected", "0.0")
            return render_template('result_page.html', img_str=image_to_base64(img_pil), not_fruit=True, detected_object=fallback, ai_logs=ai_logs, advice={}, ripeness_result={'confidence': 0}, nutrition={}, filename=filename)

    except Exception as e:
        ai_logs.append(f"⚠️ [ERROR] Specialist failed: {e}")
        cleanup_memory()
        return redirect(url_for('ripeness_detection'))
    
    # ==========================================================
    # 🎨 LAYER 4: COLOR TUNING
    # ==========================================================
    ai_logs.append(f"🎨 [LAYER 4] Analyzing colors for: '{ripeness_level} {detected_object}'...")
    colors = analyze_ripeness_tuned(img_cv2, f"{ripeness_level} {detected_object}")
    ai_logs.append(f"✅ [FINAL] Green {colors['green_percentage']}%, Yellow {colors['yellow_percentage']}%, Brown {colors['brown_percentage']}%.")

    save_history(filename, display_name, ripeness_level, f"{confidence*100:.1f}")
    advice = get_expert_advice(detected_object, ripeness_level)
    
    nutrition_data = {}
    if "banana" in detected_object.lower(): nutrition_data = {"calories": "89 kcal", "vitamin": "Vit C, B6", "benefit": "Energy Boost"}
    elif "tomato" in detected_object.lower(): nutrition_data = {"calories": "18 kcal", "vitamin": "Lycopene", "benefit": "Heart Health"}
    elif "mango" in detected_object.lower(): nutrition_data = {"calories": "60 kcal", "vitamin": "Vit A, C", "benefit": "Immunity"}

    timestamp_now = datetime.now().strftime("%I:%M %p · %d %b %Y")

    return render_template('result_page.html', 
                          img_str=image_to_base64(img_pil), 
                          ripeness_result={'ripeness_level': ripeness_level, 'confidence': confidence, 'color_analysis': colors},
                          class_names=[display_name],
                          is_red_fruit=('tomato' in detected_object.lower()),
                          nutrition=nutrition_data,
                          advice=advice,
                          filename=filename,
                          timestamp_now=timestamp_now,
                          ai_logs=ai_logs)
    
@app.route('/history')
def show_history():
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try:
                data = json.load(f)
                data.reverse() 
            except json.JSONDecodeError:
                data = []
    else:
        data = []
    return render_template('history.html', history=data)

@app.route('/export_history')
def export_history():
    if not os.path.exists(HISTORY_FILE): return redirect(url_for('show_history'))
    with open(HISTORY_FILE, 'r') as f:
        try: data = json.load(f)
        except: return redirect(url_for('show_history'))

    output = io.StringIO()
    writer = csv.writer(output)
    writer.writerow(['Timestamp', 'Fruit', 'Ripeness', 'Confidence', 'Filename'])
    for entry in data:
        writer.writerow([entry.get('timestamp'), entry.get('fruit'), entry.get('result'), entry.get('confidence'), entry.get('file')])
    
    return Response(output.getvalue(), mimetype="text/csv", headers={"Content-Disposition": "attachment;filename=ripesense_history.csv"})

@app.route('/clear_history', methods=['POST'])
def clear_history():
    with open(HISTORY_FILE, 'w') as f: json.dump([], f)
    return redirect(url_for('show_history'))

@app.route('/fruit_detection')
def fruit_detection():
    return render_template('fruit_detection.html')

@app.route('/detect_objects', methods=['POST'])
def detect_objects():
    data = request.json
    try:
        image_data = data['image_data'].split(',')[1]
        img = cv2.imdecode(np.frombuffer(base64.b64decode(image_data), np.uint8), cv2.IMREAD_COLOR)
        img_pil = Image.fromarray(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))
    except: return jsonify([])

    detected_objects = []
    
    # ---------------------------------------------------------
    # STEP 1: Run Specialist (Find Fruit)
    # ---------------------------------------------------------
    specialist_results = []
    try:
        fruit_detection_model = YOLO(SPECIALIST_PATH)
        results = fruit_detection_model(img, conf=0.40, imgsz=320, verbose=False)
        if results[0].boxes:
            specialist_results = results[0].boxes
        
        del fruit_detection_model
        cleanup_memory()
    except Exception as e:
        print(f"⚠️ Specialist Error: {e}")
        return jsonify([])

    if len(specialist_results) == 0: return jsonify([])

    # ---------------------------------------------------------
    # STEP 2: Verify & Color Correct
    # ---------------------------------------------------------
    try:
        gatekeeper_model = YOLO(GATEKEEPER_PATH)
        
        for box in specialist_results:
            detected_class = results[0].names[int(box.cls[0])].lower()
            confidence = float(box.conf[0])
            x1, y1, x2, y2 = map(int, box.xyxy[0].tolist())
            
            # --- A. GATEKEEPER CHECK (Block Trash) ---
            try:
                crop_pil = img_pil.crop((x1, y1, x2, y2))
                gk_res = gatekeeper_model(crop_pil, verbose=False)
                
                top3 = gk_res[0].probs.top5[:3]
                gk_labels = [gk_res[0].names[i].lower() for i in top3]
                
                FORBIDDEN = ['person', 'face', 'human', 'orange', 'apple', 'lemon', 'strawberry', 'man', 'woman', 'dog', 'cat', 'hamster']
                is_forbidden = False
                for lbl in gk_labels:
                    if any(f in lbl for f in FORBIDDEN):
                        is_forbidden = True
                        break
                if is_forbidden: continue 
            except: pass

            # --- B. SMART COLOR CORRECTION 🎨 ---
            try:
                crop_cv = img[y1:y2, x1:x2]
                if crop_cv.size > 0:
                    hsv = cv2.cvtColor(crop_cv, cv2.COLOR_BGR2HSV)
                    avg_hue = np.median(hsv[:, :, 0])
                    
                    fruit_type = ""
                    if "banana" in detected_class: fruit_type = "Banana"
                    elif "mango" in detected_class: fruit_type = "Mango"
                    elif "tomato" in detected_class: fruit_type = "Tomato"
                    
                    if fruit_type == "Tomato":
                        # 🍅 TOMATO LOGIC: Check for RED
                        # Red is at both ends of the spectrum (0-20 AND 160-180)
                        is_red = (avg_hue < 20) or (avg_hue > 160)
                        
                        if is_red:
                            detected_class = "Ripe Tomato"
                        else:
                            # If it's NOT red, it's Unripe (covers Green, Pale, Yellow-Green)
                            detected_class = "Unripe Tomato"

                    elif fruit_type in ["Banana", "Mango"]:
                        # 🍌🥭 BANANA/MANGO LOGIC: Check for GREEN
                        # Green is approx 35 to 90
                        is_green = 35 < avg_hue < 90
                        
                        if is_green:
                            detected_class = f"Unripe {fruit_type}"
                        else:
                            if "overripe" in detected_class:
                                detected_class = f"Overripe {fruit_type}"
                            else:
                                detected_class = f"Ripe {fruit_type}"

            except Exception as e:
                pass

            detected_objects.append({
                'class': detected_class.title(),
                'confidence': confidence,
                'bbox': box.xyxy[0].tolist() 
            })

        del gatekeeper_model
        cleanup_memory()

    except Exception as e:
        print(f"⚠️ Gatekeeper Loop Error: {e}")
        cleanup_memory()

    return jsonify(detected_objects)

@app.route('/model_stats')
def model_stats():
    metrics = {"accuracy": "97.3%", "precision": "96.8%", "recall": "97.1%", "f1_score": "96.9%"}
    return render_template('model_stats.html', metrics=metrics)

@app.route('/report_error/<filename>', methods=['POST'])
def report_error(filename):
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try: data = json.load(f)
            except json.JSONDecodeError: data = []
        
        found = False
        for entry in reversed(data):
            if entry.get('file') == filename:
                entry['flagged'] = True
                found = True
                break
        
        if found:
            with open(HISTORY_FILE, 'w') as f: json.dump(data, f, indent=4)
            flash('✅ Thanks! This result has been flagged for review.', 'success')
        else:
            flash('❌ Could not find that record.', 'danger')
            
    return redirect(url_for('show_history'))

@app.route('/delete_item/<filename>', methods=['POST'])
def delete_item(filename):
    if os.path.exists(HISTORY_FILE):
        with open(HISTORY_FILE, 'r') as f:
            try: data = json.load(f)
            except json.JSONDecodeError: data = []
        
        new_data = [entry for entry in data if entry.get('file') != filename]
        
        if len(new_data) < len(data):
            with open(HISTORY_FILE, 'w') as f: json.dump(new_data, f, indent=4)
            file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)
            if os.path.exists(file_path):
                try: os.remove(file_path)
                except: pass
            flash('Scan deleted successfully.', 'success')
        else:
            flash('Item not found.', 'warning')
            
    return redirect(url_for('show_history'))

@app.errorhandler(404)
def page_not_found(e): return render_template('404.html'), 404
@app.errorhandler(500)
def internal_error(e): return render_template('404.html'), 500

if __name__ == '__main__':
    os.makedirs(UPLOAD_FOLDER, exist_ok=True)
    app.run(host="0.0.0.0", port=5000, debug=True)
</file>

</files>
